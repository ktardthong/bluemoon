<md-content>
  <div ui-view="header"></div>

  <section class="gray-background">

    <div class="container margin-top animated slideInUp">
      <div class="pull-right">
        <a class="dropdown-item" href="#" ng-click="authCtrl.logout()">Logout</a>
      </div>


      <div class="card  container-fluid">



        <div class="md-padding col-xs-12 col-sm-3">

          <div ng-if="profileCtrl.isOwner == true">true</div>
          <div ng-if="profileCtrl.isOwner == false">false</div>

          <div flow-init
               flow-name="uploader.flow"
               flow-files-added="profileCtrl.uploadFile($files)">
              <img  ng-src="{{profileCtrl.profile[0].photo}}"
                    class="preview img-circle"
                    flow-img="uploader.flow.files[0]" width="142px"/><br>
            <md-button
              ng-if="profileCtrl.isOwner"
              class="md-primary ion-camera" flow-btn type="file"></md-button>
          </div>
        </div>

        <div class="md-padding col-xs-12 col-sm-9">

          <div class="pull-right"
               ng-if="profileCtrl.isOwner == false">
            <button class="btn btn-success-outline">{{ 'KEY_FOLLOW' | translate }}</button>
          </div>

          <p class="md-title">
            @{{ profileCtrl.profile[0].displayName }}
          </p>
          <p class="md-headline">
            {{ profileCtrl.profile[0].firstname }}

            {{profileCtrl.profile[0].lastname}}

            <md-button ng-if="profileCtrl.isOwner" ng-click="nameEdit=true">Edit</md-button>

            <!-- bio form -->
            <section class="md-whiteframe-1dp md-padding" ng-show="nameEdit" ng-init="nameEdit=false">
              <form ng-submit="profileCtrl.updateName(profileCtrl.profile.$id);nameEdit=false;">
                <md-input-container class="md-block">
                  <label>Firstname</label>
                  <input ng-model="profileCtrl.profile.firstname">
                </md-input-container>
                <md-input-container class="md-block">
                  <label>Lastname</label>
                  <input ng-model="profileCtrl.profile.lastname">
                </md-input-container>

                <div class="end right">
                  <md-button ng-click="nameEdit=false">Cancel</md-button>
                  <md-button class="md-primary"
                             type="submit"
                             ng-if="(profileCtrl.profile.firstname.length && profileCtrl.profile.lastname.length) > 0 ">Update</md-button>
                </div>
              </form>
            </section>
          </p>

          ???>>> {{ profileCtrl.profile.firstname }}
          <div ng-bind-html="profileCtrl.profile.firstname"
               contenteditable="true"
               ng-model="profileCtrl.profile.firstname"
               cols="50"
               rows="10">
          </div>

          <div ng-bind-html="profileCtrl.profile.userLocation.name" contenteditable="true"
               ng-model="profileCtrl.profile.userLocation.name"
               cols="50"
               rows="10">
          </div>

          <div class="form-group">
            <input type="text" class="form-control"
                   placeholder="{{ 'KEY_LOCATION' | translate}}"
                   ng-autocomplete
                   ng-model = "profileCtrl.profile.userLocation.name"
                   details  = "profileCtrl.location.details"
                   options  = "{ types: '(cities)'}">
          </div>


          <!-- Bio -->
          <p class="md-body-2">

            <p class="md-text" ng-mouseover="bioEdit=true">{{profileCtrl.profile.biography}}
            <md-button ng-if="profileCtrl.isOwner" ng-click="bioEdit=true">Add Profile Bio</md-button>

            <!-- bio form -->
            <section class="md-whiteframe-1dp md-padding" ng-show="bioEdit" ng-init="bioEdit=false">
              <form ng-submit="profileCtrl.updateBio(profileCtrl.profile.$id);bioEdit=false;">
                <md-input-container class="md-block">
                  <label>Biography</label>
                  <textarea ng-model="profileCtrl.profile.biography"
                            columns="1" md-maxlength="140" rows="5"></textarea>
                </md-input-container>
                <div class="end right">
                  <md-button ng-click="bioEdit=false">Cancel</md-button>
                  <md-button class="md-primary" type="submit" ng-if="profileCtrl.profile.biography.length > 0 ">Update</md-button>
                </div>
              </form>
            </section>
            </p>
          </p>

          <!-- Description
          <p class="md-body-2">
            <md-button>Write a description about yourself</md-button>
            <section class="md-whiteframe-1dp md-padding">
              <md-input-container class="md-block">
                <label>Description</label>
                <textarea ng-model="user.biography" columns="1" md-maxlength="600" rows="5"></textarea>
              </md-input-container>
              <div class="end right">
                <md-button>Cancel</md-button>
                <md-button class="md-primary">Update</md-button>
              </div>
            </section>
          </p>

          <md-button ui-sref="profileEdit({Name:profileCtrl.profile.displayName})">edit</md-button>
          -->
          <md-button ng-if="profileCtrl.isOwner"
                     ng-click="profileCtrl.linkFacebook()">facebook </md-button>
        </div>
      </div>

      <md-divider></md-divider>

      <div layout="row">
        <div flex-gt-md-auto="" class="md-padding">
          <md-list>
            <md-subheader class="md-no-sticky"> feed </md-subheader>
            <md-list-item><md-button>Activity</md-button></md-list-item>
            <md-list-item ng-click="profileCtrl.getUserPost(profileCtrl.profile.$id)">Posts</md-list-item>
            <md-list-item>Questions</md-list-item>
            <md-list-item>Reply</md-list-item>
            <md-divider></md-divider>
            <md-list-item>Log</md-list-item>
          </md-list>
        </div>
        <div flex-gt-md-auto="" class="md-padding">

          <topic-list topics="profileCtrl.feed"></topic-list>

        </div>
      </div>

      <!--{{ profileCtrl.auth.ref.getAuth()}}-->
      <!--{{profileCtrl.profile}}-->



  </section>
</md-content>
