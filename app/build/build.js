"use strict";function show(e){return console.log(e),JSON.stringify(e,null,2)}function extend(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t&&"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}),e}function moveFbRecord(e,t){e.once("value",function(o){t.set(o.val(),function(t){t?"undefined"!=typeof console&&console.error&&console.error(t):e.remove()})})}var app=angular.module("App",["firebase","angular-md5","ngRoute","ui.router","ngMaterial","angularMoment","flow","slugifier","ngAutocomplete","ngTagsInput","cgNotify","pascalprecht.translate","angular-flexslider","ngSanitize","ui.bootstrap","angular-smilies","ngCookies","notification"]).config(["$mdThemingProvider",function(e){e.definePalette("slack",{50:"ffebee",100:"ffcdd2",200:"ef9a9a",300:"e57373",400:"ef5350",500:"4D394B",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),e.theme("default").primaryPalette("slack")}]).config(["$translateProvider",function(e){e.preferredLanguage("Eng"),e.useSanitizeValueStrategy("escape")}]).config(["$stateProvider","$urlRouterProvider","$controllerProvider",function(e,t,o){app.registerCtrl=o.register,e.state("home",{url:"/",views:{"":{controller:"DashboardCtrl as  dashboardCtrl",templateUrl:"home/home.html",resolve:{requireNoAuth:["$state","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){e.go("dashboard")},function(e){return e})}]}},"login-form@home":{templateUrl:"templates/html/login-form.html"}}}).state("trending",{url:"/explore/trending",views:{"":{controller:"DashboardCtrl as  dashboardCtrl",templateUrl:"home/trend.html",resolve:{feed:["Topics",function(e){return e.latestFeed()}]}}}}).state("category",{url:"/category/{Slug}",views:{"":{templateUrl:"category/index.html",resolve:{cateName:["$stateParams","Category",function(e,t){return t.getName(e.Slug).$loaded()}],cateTopics:["$stateParams","Topics",function(e,t){return t.list(e.Slug)}]}}}}).state("places",{url:"/places/{place_slug}/{place_id}",views:{"header@places":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"},"":{controller:"PlacesCtrl as placesCtrl",templateUrl:"place/index.html",resolve:{placeLanding:["Places","Topics","$stateParams","$firebaseArray",function(e,t,o,r){var n;return e.getPlaceRef(o.place_id).on("value",function(e){n=e.val(),console.log(e.val())}),n}]}}}}).state("tag",{url:"/tag/{Tag}",views:{"header@tag":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"},"":{controller:"TagCtrl as tagCtrl",templateUrl:"tag/index.html",resolve:{tagName:["$stateParams",function(e){return e.Tag}],tagLanding:["Topics","$stateParams","Tags",function(e,t,o){var r=t.Tag;return e.topicsByTag(r)}]}}}}).state("topic",{url:"/{Slug}",resolve:{},views:{"":{controller:"TopicLandingCtrl as topicLandingCtrl",templateUrl:"topics/index.html",resolve:{isOwner:["Auth","Users","$stateParams","Topics",function(e,t,o,r){var n="";return e.ref.getAuth()?r.fortopic(o.Slug).$loaded().then(function(t){return null!=t[0]?(n=t[0].uid,e.ref.getAuth().uid==n?!0:!1):void 0}):!1}],topicLanding:["$stateParams","Topics",function(e,t){return t.fortopic(e.Slug).$loaded()}],replyList:["$stateParams","Topics","$state","FirebaseUrl","$q",function(e,t,o,r,n){var i="",l=[],a=n.defer();return t.fortopic(e.Slug).$loaded().then(function(e){null!=e[0]?i=e[0].$id:o.go("topic-notfound");var t=new Firebase(r);return t.child("topics/"+i+"/replies").once("value",function(o){o.forEach(function(o){var r=o.key();t.child("topics/"+i+"/replies/"+r).once("value",function(o){t.child("users/"+o.val().uid).once("value",function(t){e=extend({},o.val(),t.val()),l.push({uid:e.uid,firstname:e.firstname,lastname:e.lastname,photo:e.photo,displayName:e.displyName,body:e.body,created:e.created}),a.resolve(l)})})})}),a.promise})}],viewData:["$stateParams","Topics","Users","Auth",function(e,t,o,r){var n,i,l=moment().toISOString(),a={userIP:"",created:l};return o.getLocationIP().success(function(e){a.userIP=e.data}).then(function(e){a.userIP=e.data}),t.getTopicBySlug(e.Slug).$loaded().then(function(e){return"undefined"!==e[0].$id&&(n=e[0].$id,i=t.getViews(n),i.obj.$loaded().then(function(e){null==e.count?i.ref.child("count").set(1):i.ref.child("count").set(e.count+1)}),r.auth.$requireAuth().then(function(e){var t=e.uid;i.ref.child("history").child(t).push().set(a),o.userRef(e.uid).child("views").child(n).push().set(a)})),i.obj})}],followers:["$stateParams","Topics",function(e,t){return t.getTopicBySlug(e.Slug).$loaded().then(function(e){var o=e[0].$id;return t.getFollowers(o).obj.$loaded().then(function(e){return e})})}]}}}}).state("topic-notfound",{url:"/err/notfound"}).state("profile",{url:"/profile/{Name}",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"profile/index.html",resolve:{isOwner:["Auth","Users","$stateParams",function(e,t,o){return e.ref.getAuth()?t.getProfileByUsername(o.Name).$loaded().then(function(t){return t[0].$id==e.ref.getAuth().uid?!0:!1}):!1}],userPosts:["Users","Topics","$stateParams",function(e,t,o){return e.getProfileByUsername(o.Name).$loaded().then(function(e){return"undefined"!==e[0].$id?t.createdBy(e[0].$id):void 0})}],profile:["$state","$stateParams","$rootScope","Auth","Users",function(e,t,o,r,n){return n.getProfileByUsername(t.Name).$loaded().then(function(e){return e})}]}},"header@profile":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("acccountEdit",{url:"/account/edit",views:{"passwordEdit@acccountEdit":{url:"/account/changePassword",templateUrl:"profile/passwd.html"},"userEdit@acccountEdit":{url:"/account/edit-form",templateUrl:"profile/edit-form.html"},"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"profile/edit.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["$state","$rootScope","Auth","Users",function(e,t,o,r){return o.auth.$requireAuth().then(function(t){return r.getProfile(t.uid).$loaded().then(function(t){return t.displayName?t:void e.go("get_started")})},function(t){e.go("home")})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}}}}).state("accountPassword",{url:"/account/changePassword",templateUrl:"profile/passwd.html"}).state("accountUserEdit",{url:"/account/edit-form",templateUrl:"profile/edit-form.html"}).state("dashboard",{url:"/user/dashboard",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"dashboard/index.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["$state","$rootScope","Auth","Users",function(e,t,o,r){return o.auth.$requireAuth().then(function(t){return r.getProfile(t.uid).$loaded().then(function(o){return o.stat||(r.userRef(t.uid).child("stat/upvoted/count").set(0),r.userRef(t.uid).child("stat/posted/count").set(0),r.userRef(t.uid).child("stat/comment/count").set(0),r.userRef(t.uid).child("stat/follower/count").set(0),r.userRef(t.uid).child("stat/following/count").set(0)),o.displayName?o:void e.go("get_started")})},function(t){return e.go("home"),t})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}}}}).state("dashboard.list",{url:"/feed/{Slug}",views:{"":{controller:"CateCtrl as cateCtrl",templateUrl:"category/index.html",resolve:{cateName:["$stateParams","Category",function(e,t){return t.getName(e.Slug).$loaded()}],cateTopics:["$stateParams","Topics","FirebaseUrl","$q",function(e,t,o,r){var n,i=[],l=r.defer(),a=new Firebase(o);return t.list(e.Slug).$loaded().then(function(e){for(var t=0;t<e.length;t++)a.child("topics/"+e[t].$id).once("value",function(o){a.child("users/"+e[t].uid).once("value",function(e){n=extend({},o.val(),e.val()),i.push({topic:n.topic,slug:n.slug,uid:n.uid,firstname:n.firstname,lastname:n.lastname,photo:n.photo,displayName:n.displayName,body:n.body,created:n.created,photos:n.photos,postedCount:n.stat.posted.count}),l.resolve(i)})});return l.promise})}]}}}}).state("follow_cates",{url:"/user/follow-categories",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"auth/follow-categories.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["Users","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){return e.getProfile(t.uid).$loaded()})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}}}}).state("get_started",{url:"/user/get_started",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"auth/get_started.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["Users","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){return e.getProfile(t.uid).$loaded()})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}},"header@get_started":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("login",{url:"/user/login",views:{"":{templateUrl:"auth/login.html"},"login-form@login":{templateUrl:"templates/html/login-form.html"}}}).state("register",{url:"/user/register",views:{"":{templateUrl:"auth/register.html"}},resolve:{requireNoAuth:["$state","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){e.go("home")},function(e){return e})}]}}),t.otherwise("/")}]).filter("orderObjectBy",function(){return function(e,t,o){var r=[];return angular.forEach(e,function(e){r.push(e.$id).set(e)}),r.sort(function(e,o){return e[t]>o[t]?1:-1}),o&&r.reverse(),r}}).filter("decodeURI",function(){return function(e){return e?decodeURI(e):""}}).filter("nl2br",["$sce",function(e){return function(t){return t?e.trustAsHtml(t.replace(/\n/g,"<br/>")):""}}]).constant("FirebaseUrl","https://bmxyz.firebaseio.com/");angular.module("App").controller("AuthCtrl",["$scope","Auth","Users","$state","$rootScope","$mdSidenav","$translate","$cookies","NotiService","$notification",function(e,t,o,r,n,i,l,a,s,u){console.log("authCtrl");var c=this;u.requestPermission().then(function(e){console.log(e)}),c.auth=t,c.users=o,c.notification=s,c.badgeValue=0,null!=t.ref.getAuth()?c.profile=c.users.getProfile(t.ref.getAuth().uid):c.profile="",c.user={email:"",password:""},e.$watch("NotiService.replyStatus(authCtrl.profile)",function(){console.log("watching reply status "+c.profile)}),e.$watch("badgeValue",function(){return console.log(">>>"+c.badgeValue.value),s.unreadNotification(c.profile.$id).then(function(e){c.badgeValue=e})}),console.log(c.badgeValue),c.resetCounter=function(){c.notification.resetUnread(c.profile.$id)},c.toggleLang=function(e){l.use(e),a.put("userLang",e),t.ref.getAuth()&&c.users.userArrRef(t.ref.getAuth().uid).update({lang:e})},c.profile.lang?c.toggleLang(c.profile.lang):a.get("userLang")?c.toggleLang(a.get("userLang")):c.toggleLang("Eng"),c.login=function(){c.auth.auth.$authWithPassword(c.user).then(function(e){r.go("dashboard")},function(e){c.error=e})},c.logout=function(){t.auth.$unauth(),r.go("login")},c.register=function(){t.auth.$createUser(c.user).then(function(e){c.login()},function(e){c.error=e})}}]),angular.module("App").factory("Auth",["$firebaseAuth","FirebaseUrl",function(e,t){var o=new Firebase(t),r=e(o);console.log("auth service");var n={ref:o,auth:r,getUid:function(){var e=o.getAuth();return null!=e?o.getAuth().uid:!1}};return n}]),angular.module("App").controller("CateCtrl",["$state","Category","cateName","cateTopics",function(e,t,o,r){var n=this;n.cateName=o,n.category=t,n.cateTopics=r,console.log("CateCtrl")}]),angular.module("App").factory("CateService",["$firebaseObject","$firebaseArray","FirebaseUrl",function(e,t,o){var r=new Firebase(o+"categories"),n=e(r);console.log("category service");var i={name:function(t){var o=r.orderByChild("slug").equalTo(t);return e(o)},fortopic:function(t){return e(usersRef.child(uid))},addChild:function(e){return r.child(e)},followList:function(e){var o=r.orderByChild("news/follower").equalTo(e);return t(o)},unFollow:function(e,t){var r=new Firebase(o+"categories/"+e+"/follower/"+t);r.remove()},userFollow:function(e,t){var r=!1,n=new Firebase(o+"categories/"+e+"/follower/"+t);return n.once("value",function(e){r=e.exists()}),r},arr:t(r),all:n};return i}]),angular.module("App").controller("DashboardCtrl",["Auth","$state","Category","CateService","Tags","Topics",function(e,t,o,r,n,i){var l=this;l.auth=e,l.cate=r,l.categories=o,l.topics=i,l.topic_grid=!1,l.tags=n.arr,l.userCateFollow=[],l.cateIsFollow=[],l.followList="",l.userFeed="null",l.latestFeed=l.topics.latestFeed(),l.followCate=function(t){l.cate.addChild(t+"/follower").child(e.ref.getAuth().uid).push().set(moment().toISOString())},console.log("DashboardCtrl")}]),angular.module("App").directive("mainHeader",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/toolbar/main_toolbar.html"}}).directive("badgeNotification",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/html/badge-notification.html",scope:{notification:"="}}}).directive("reviewScore",function(){return{templateUrl:"templates/html/review-summary-list.html",scope:{review:"="}}}).directive("userFollowerBtn",function(){return{restrict:"E",transclude:!0,templateUrl:"templates/html/follow-user.html",scope:{follow:"="}}}).directive("cateFollowBtn",function(){return{templateUrl:"templates/html/category-follow-btn.html",scope:{cate:"="}}}).directive("topicGrid",function(){return{templateUrl:"templates/html/category-grid.html"}}).directive("tagGrid",function(){return{templateUrl:"templates/html/tag-grid.html"}}).directive("topicCreate",function(){return{templateUrl:"templates/html/topic-create.html",scope:{topic:"="}}}).directive("topicList",function(){return{templateUrl:"templates/html/topic-list.html",scope:{topics:"="}}}).directive("topicActionsCard",function(){return{templateUrl:"templates/html/topic-actions-card.html",scope:{topic:"="}}}).directive("enforceMaxTags",function(){return{require:"ngModel",link:function(e,t,o,r){var n=o.maxTags?parseInt(o.maxTags,"4"):null;r.$parsers.push(function(e){return e&&n&&e.length>n&&e.splice(e.length-1,1),e})}}}),angular.module("App").config(["$translateProvider",function(e){e.translations("Eng",{KEY_DASHBOARD:"Dashboard",KEY_LANGUAGES:"Languages",KEY_HOME:"Home",KEY_REGISTER:"Register",KEY_LOGIN:"Log in",KEY_LOGOUT:"Log out",KEY_FOLLOW:"Follow",KEY_FOLLOWER:"Follower",KEY_UNFOLLOW:"Unfollow",KEY_FOLLOWING:"Following",KEY_POST:"Post",KEY_POSTED:"Posted",KEY_UPVOTE:"Upvote",KEY_UPVOTED:"Upvoted",KEY_DWN_VOTE:"Downvote",KEY_DWN_VOTED:"Downvoted",KEY_VIEW:"View",KEY_REMOVE:"Remove",KEY_CANCEL:"Cancel",KEY_QUESTION:"Question",KEY_TOPIC:"Topic",KEY_CHG_PWD:"Change Password",KEY_PASSWORD:"Password",KEY_OLD_PWD:"Old Password",KEY_NEW_PWD:"New Password",KEY_NEW_PWD_C:"New password confirmation",KEY_SAVE:"Save",KEY_SAVE_DRAFT:"Save as draft",KEY_TAGS:"Tags",KEY_EXPLORE:"Explore",KEY_FEAT_CAT:"Features categories",KEY_COMMENTS:"Comments",KEY_REPLY:"Reply",KEY_REVIEW:"Review",KEY_EDIT:"Edit",KEY_TREND:"Trend",KEY_TRENDING:"Trending",KEY_WRITE_REPLY:"Write a reply",KEY_LATEST_FEED:"Latest Feed",KEY_CONF_REMOVE:"Are you sure you want to remove?",KEY_CONF_REM_C:"Once remove, you will not be ableto to get this topic back",KEY_WHAT_ON_UR_MIND:"What's on your mind?",KEY_YOU_WANT_FOLLOW:"You may want to follow",KEY_NO_ACCT_REGISTER:"Don't have account? Register",KEY_CANT_CHNG_USER:"Don't have account? Register",KEY_YOUR_ACCOUNT:"Your account",KEY_NOTHING_HERE:"Nothing here, yet",KEY_WHO_TO_FOLLOW:"Who to follow",KEY_CAT_WILL_APPEAR:"Follow some categories and it will appear here",KEY_WHT_UR_STORY:"What's your story",KEY_WRT_COMMENT:"Write a comment",KEY_FIRSTNAME:"First name",KEY_LASTNAME:"Last name",KEY_BIRTHDAY:"Birthday",KEY_MONTH:"Month",KEY_DAY:"Day",KEY_EMAIL:"Email",KEY_CONF_EMAIL:"Confirm Email",KEY_GENDER:"Gender",KEY_MALE:"Male",KEY_FEMALE:"Female",KEY_USERNAME:"Username",KEY_LOCATION:"Location",KEY_ED_PROFILE:"Edit Profile",KEY_ED_CHG_PWD:"Change Password",KEY_ED_PROFILE:"Edit Profile",KEY_ED_SITE:"Website",KEY_ED_PHONE:"Phone",KEY_ED_BIO:"Biography"}),e.translations("ไทย",{KEY_DASHBOARD:"ห้องทั้งหมด",KEY_LANGUAGES:"ภาษา",KEY_HOME:"หน้าแรก",KEY_REGISTER:"สมัครใช้",KEY_LOGIN:"เข้าสู่ระบบ",KEY_FOLLOW:"ติดตาม",KEY_POST:"โพสต์"}),e.preferredLanguage("en")}]),angular.module("App").controller("NotiCtrl",["$state","Category","Topics","NotiService",function(e,t,o,r){var n=this;n.topics=o,n.feed=feed,n.notiService=r,n.notifyTo=function(e){return n.arr.push(e).$add(e)}}]),angular.module("App").factory("NotiService",["$firebaseObject","$firebaseArray","FirebaseUrl","Users","$notification","$q",function(e,t,o,r,n,i){var l=new Firebase(o+"notification"),a=e(l),s=r;console.log("noti service");var u={unreadNotification:function(e){var t,r=new Firebase(o+"notification/"+e+"/unread"),l=i.defer();return r.once("value",function(e){t=e.val(),console.log(e.val()),t>0&&(n("New message from Qanya",{body:"You have "+t+" unread messages",dir:"auto",lang:"en",tag:"my-tag",icon:"http://www.cl.cam.ac.uk/research/srg/netos/images/qsense-logo.png",focusWindowOnClick:!0}),l.resolve(t))}),l.promise},notifyFollower:function(e,t){var o=s.getFollower(t);o.once("value",function(t){t.forEach(function(t){u.updateNotificationCount(e,t.key())})})},replyStatus:function(e){return n("New message from Qanya",{body:"You have new message",dir:"auto",lang:"en",tag:"my-tag",icon:"http://www.cl.cam.ac.uk/research/srg/netos/images/qsense-logo.png",focusWindowOnClick:!0}),e},notifyLog:function(e,t,r){console.log("uid "+t),console.log("from uid "+r);var n=new Firebase(o+"notification/"+t);n.push().set({topicId:e,from:r,is_read:!1,timestamp:moment().toISOString()}),u.replyStatus(t)},resetUnread:function(e){var t=new Firebase(o+"notification/"+e+"/unread");t.set(0)},updateNotificationCount:function(e,t,r){var n=new Firebase(o+"notification/"+t+"/unread");n.once("value",function(e){"null"==e.val()?n.set(1):n.set(e.val()+1)},function(e){console.log("The read failed: "+e.code)}),u.notifyLog(e,t,r)},addChild:function(e){return l.child(e)},addArrChild:function(t){return e(l.child(t))},arr:t(l),all:a};return u}]),angular.module("App").controller("PlacesCtrl",["$state","$scope","$rootScope","$mdDialog","$mdMedia","Tags","Topics","Auth","Users","Slug","Languages","placeLanding",function(e,t,o,r,n,i,l,a,s,u,c,d){var f=this;console.log(d),f.placeLanding=d}]),angular.module("App").factory("Places",["$firebaseArray","FirebaseUrl",function(e,t){var o=new Firebase(t+"places"),r=new Firebase(t+"places_details"),n=e(o),i={addChild:function(e){return o.child(e)},addPlaceDetailChild:function(e){return r.child(e)},getPlaceRef:function(e){return o.child(e+"/info")},arr:n};return i}]),angular.module("App").factory("Category",["$firebaseObject","$firebaseArray","FirebaseUrl",function(e,t,o){var r=new Firebase(o+"categories"),n=e(r);t(r);console.log("Util category Service");var i={getName:function(t){var o=r.child(t);return e(o)},all:n};return i}]).factory("Languages",["$firebaseArray","FirebaseUrl",function(e,t){var o=new Firebase(t+"languages"),r=e(o);return console.log("Util language"),r}]).factory("Archive",["$firebaseArray","FirebaseUrl",function(e,t){var o=new Firebase(t+"archive"),r=e(o);console.log("Util language");var n={addChild:function(e){return o.child(e)},ref:o,arr:r};return n}]),angular.module("App").controller("TagCtrl",["Auth","Users","$state","$rootScope","tagLanding","tagName",function(e,t,o,r,n,i){var l=this;l.tagLanding=n,l.tagName=i}]),angular.module("App").factory("Tags",["$firebaseArray","$firebaseObject","FirebaseUrl","$q",function(e,t,o,r){var n=new Firebase(o+"tags"),i=e(n);console.log("tag service");var l={addChild:function(e){return n.child(e)},tagsUrl:function(){return e(n)},getTagRef:function(e){return n.child(e)},getTagObject:function(e){return t(n.child(e))},topicTags:function(e){var t=r.defer(),n=new Firebase(o);return n.child("tags/"+e).on("child_added",function(o){n.child("topics").orderByChild("tags").equalTo(e).on("child_added",function(e){return t.resolve(),extend({},o.val(),e.val())})})},arr:i};return l}]),angular.module("App").controller("TopicLandingCtrl",["$state","$scope","Slug","Topics","Auth","Users","isOwner","topicLanding","replyList","viewData","followers",function(e,t,o,r,n,i,l,a,s,u,c){console.log("topicLandingCtrl");var d=this;d.auth=n,d.users=i,d.topicLanding=a,d.topics=r,d.replyList=s,d.views=u,d.followers=c,d.isOwner=l,d.inReplyArr=[]}]),angular.module("App").controller("TopicCtrl",["$state","$scope","$rootScope","$mdDialog","$mdMedia","$http","FirebaseUrl","$translate","$notification","NotiService","Tags","Topics","Auth","Users","Slug","Places","Languages","Archive",function(e,t,o,r,n,i,l,a,s,u,c,d,f,p,g,h,m,v){console.log("topicCtrl");var w=this;w.tags=c,w.topics=d,w.auth=f,w.users=p,w.languages=m,w.places=h,w.archive=v,w.noti=u,null!=w.auth.ref.getAuth()?(w.profile=w.users.getProfile(w.auth.ref.getAuth().uid),w.uid=w.profile.$id,w.userRef=w.users.userRef(w.uid),w.userUpvotedTopics=w.users.upvotes(w.uid),w.userDownvotedTopics=w.users.downvotes(w.uid),w.userFollowing=w.users.following(w.uid)):(w.profile="",w.uid="",w.userRef=""),w.imageStrings=[],w.imageText=[],w.inReplyArr=[],w.loadBusy=!1,w.slugReturn=null,w.criteria=!1,w.criteriaReply=null,w.reviewCriteria=!1,w.critReplyData=null,w.newTopic={location:"",url:"",ipInfo:"",tags:""},t.$watch("",function(){console.log(">>> watching at topic controller")}),w.avgReviewReply=function(){for(var e=Object.keys(w.criteriaReply).length,t=0,o=0;e>o;o++)t+=w.criteriaReply[o];w.replyReviewAverage=t/e,console.log(w.criteriaReply),w.critReplyData={avg:w.replyReviewAverage,data:w.criteriaReply}},w.avgReviewScore=function(e){if(e){for(var t=0,o=0;o<e.length;o++)t+=e[o].rating;return t/e.length}},a(["KEY_REMOVE","KEY_CANCEL","KEY_CONF_REMOVE","KEY_CONF_REM_C"]).then(function(e){w.removeTrans=e.KEY_REMOVE,w.cancelTrans=e.KEY_CANCEL,w.confirmRem=e.KEY_CONF_REMOVE,w.confirmRemContent=e.KEY_CONF_REM_C}),w.userName=function(e){},w.showMdLogin=function(e){var o=(n("sm")||n("xs"))&&t.customFullscreen;r.show({templateUrl:"templates/html/md-login-form.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:o})},w.decodeText=function(e){return console.log(decodeURI(e)),decodeURI(e)},w.loadMore=function(e){w.loadBusy=!0;for(var t=[],o=0;o<e.length;o++)t.push(e[o]);return console.log(t),t},w.loadTags=function(e){console.log(w.tags.tagsUrl())},w.uploadFile=function(e,t){angular.forEach(e,function(e,t){var o=new FileReader;o.onload=function(e){var o=e.target.result;w.imageStrings[t]=o},o.readAsDataURL(e.file)})},w.showConfirmRemove=function(t,o,n){var i=r.confirm().title(w.confirmRem).textContent(w.confirmRemContent).targetEvent(t).ok(w.removeTrans).cancel(w.cancelTrans);r.show(i).then(function(){w.removeTopic(o,n)&&e.go("dashboard")})},w.removeTopic=function(e,t){return e==w.uid?(moveFbRecord(w.topics.refChild(t.$id),w.archive.addChild(t.$id)),!0):!1},w.reply=function(e){w.topics.replyArr(e.$id).$add({topicId:e.$id,body:w.newReply.body,uid:w.uid,review:w.critReplyData,created:moment().toISOString()}).then(function(){w.noti.updateNotificationCount(e.$id,e.uid,w.uid)}),w.topics.replyCount(e.$id).$loaded().then(function(t){t.count?w.topics.replyCountRef(e.$id).set(t.count+1):w.topics.replyCountRef(e.$id).set(1)}),w.users.userRef(w.uid).child("stat/comment/count").set(w.profile.stat.comment.count+1),w.users.userRef(w.uid).child("stat/comment/topics/"+e.$id).push().set(moment().toISOString())},w.replyInReply=function(e,t){w.topics.replyInReplyArr(e,t).$add({body:w.replyInReply.body,uid:w.uid,created:moment().toISOString()})},w.addNewChoice=function(){var e=w.reviewCriteria.length+1;w.reviewCriteria.push({id:"criteria"+e})},w.removeChoice=function(){var e=w.reviewCriteria.length-1;w.reviewCriteria.splice(e)},w.createTopic=function(e,t){var o="";""!==w.newTopic.location&&(console.log(w.newTopic.location),o={place_id:w.newTopic.location.details.place_id,slug:g.slugify(w.newTopic.location.details.name),name:w.newTopic.location.details.name,address:w.newTopic.location.details.formatted_address,lat:w.newTopic.location.details.geometry.location.lat(),lng:w.newTopic.location.details.geometry.location.lng(),lng:w.newTopic.location.details.geometry.location.lng(),lng:w.newTopic.location.details.geometry.location.lng()}),w.topics.arr.$add({type:w.type,lang:w.newTopic.lang,topic:w.newTopic.topic,body:w.newTopic.body,category:e,uid:w.uid,slug:w.newTopic.topic,photos:w.imageStrings,photos_text:w.imageText,location:o,url:w.newTopic.url,draft:t,created:moment().toISOString(),tags:w.newTopic.tags,userIP:w.newTopic.ipInfo,review:w.reviewCriteria}).then(function(e){var t="";if(t=""==g.slugify(w.newTopic.topic)?w.newTopic.topic:g.slugify(w.newTopic.topic),w.topics.getTopicByKey(e.key()).update({slug:t+e.key()}),w.users.userRef(w.uid).child("stat/posted/count").set(w.profile.stat.posted.count+1),w.users.userRef(w.uid).child("stat/posted/topics/"+e.key()).push().set(moment().toISOString()),""!==o&&(w.places.addChild(o.place_id).child(e.key()).push().set(moment().toISOString()),w.places.addChild(o.place_id).child("info").set(o)),null!==w.newTopic.tags)for(var r=0;r<w.newTopic.tags.length;++r)w.tags.addChild(w.newTopic.tags[r].text).child(e.key()).push().set(moment().toISOString());w.noti.notifyFollower(e.key(),w.uid),w.newTopic={body:""}})},w.checkFollow=function(e){return w.users.checkFollow(w.uid,e)?!0:!1},w.followUser=function(e){w.users.getProfile(e).$loaded().then(function(t){w.users.userRef(e).child("stat/follower/count").set(t.stat.follower.count+1),w.users.userRef(e).child("stat/follower/uid/"+w.uid).push().set(moment().toISOString())}),w.users.getProfile(w.uid).$loaded().then(function(t){w.users.userRef(w.uid).child("stat/following/count").set(t.stat.follower.count+1),w.users.userRef(w.uid).child("stat/following/uid/"+e).push().set(moment().toISOString())})},w.unfollowUser=function(e){w.users.getProfile(e).$loaded().then(function(t){w.users.userRef(e).child("stat/follower/count").set(t.stat.follower.count-1),w.users.userRef(e).child("stat/follower/uid/"+w.uid).remove()}),w.users.getProfile(w.uid).$loaded().then(function(t){w.users.userRef(w.uid).child("stat/following/count").set(t.stat.following.count-1),w.users.userRef(w.uid).child("stat/following/uid/"+e).remove()})},w.upvote=function(e){void 0!=e.downvotes&&void 0!=e.downvotes[w.uid]&&w.cancelDownvote(e),w.topics.upvoteTopic(e.$id,w.uid).$loaded().then(function(t){w.userUpvotedTopics.child(e.$id).set(t.$value),w.users.getProfile(e.uid).$loaded().then(function(t){w.users.userRef(e.uid).child("stat/upvoted/count").set(t.stat.upvoted.count+1),w.users.userRef(e.uid).child("stat/upvoted/topics/"+e.$id).push().set(moment().toISOString())})})},w.cancelUpvote=function(e){w.topics.undoUpvote(e.$id,w.uid),w.users.getProfile(e.uid).$loaded().then(function(t){w.users.userRef(e.uid).child("stat/upvoted/count").set(t.stat.upvoted.count-1),w.users.userRef(e.uid).child("stat/upvoted/topics/"+e.$id).remove()}),w.userUpvotedTopics.child(e.$id).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")})},w.downvote=function(e){void 0!=e.upvotes&&void 0!=e.upvotes[w.uid]&&w.cancelUpvote(e),w.topics.downvoteTopic(e.$id,w.uid).$loaded().then(function(t){w.userDownvotedTopics.child(e.$id).set(t.$value)})},w.cancelDownvote=function(e){w.topics.undoDownvote(e.$id,w.uid),w.userDownvotedTopics.child(e.$id).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")})},w.followTopic=function(e){w.topics.follow(e.$id,w.uid).$loaded().then(function(t){w.userFollowing.child(e.$id).set(t.history[w.uid])})},w.unfollowTopic=function(e){w.topics.unfollow(e.$id,w.uid),w.userFollowing.child(e.$id).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")})}}]),angular.module("App").factory("Topics",["$firebaseObject","$firebaseArray","FirebaseUrl",function(e,t,o){var r=new Firebase(o+"topics"),n=e(r);t(r);console.log("topic service");var i={getTopicReply:function(e){var r=new Firebase(o);r.child("topics/"+e+"/replies").once("value",function(o){o.forEach(function(o){var n=o.key();console.log(n),r.child("topics/"+e+"/replies/"+n).once("value",function(e){console.log(e.val().uid),console.log(e),r.child("users/"+e.val().uid).once("value",function(o){return console.log(e.val()),console.log(extend({},e.val(),o.val())),t(extend({},e.val(),o.val()))})})})})},getTag:function(e){return t(r.orderByChild("tags").equalTo(e))},getSlug:function(e){var o=r.orderByChild("slug").equalTo(e);return t(o)},createdBy:function(e){return t(r.orderByChild("uid").equalTo(e))},refChild:function(e){return r.child(e)},countUserTopics:function(){},list:function(e){var o=r.orderByChild("category").equalTo(e).limitToLast(15);return t(o)},name:function(t){var o=r.orderByChild("slug").equalTo(t);return e(o)},fortopicRef:function(e){return r.orderByChild("slug").equalTo(e)},getTopicByKey:function(e){return new Firebase(o+"topics/"+e)},getTopicBySlug:function(e){return t(r.orderByChild("slug").equalTo(e).limitToFirst(1))},incrementView:function(e){},fortopic:function(e){return t(i.fortopicRef(e))},replyList:function(e){var o=r.child(e+"/replies");return t(o)},replyArr:function(e){return t(r.child(e+"/replies"))},replyCount:function(t){return e(r.child(t+"/replies/"))},replyCountRef:function(e){return r.child(e+"/replies/count")},replyInReply:function(e,o){return t(r.child(e+"/replies/"+o+"/inReply"))},replyInReplyArr:function(e,o){return t(r.child(e+"/replies/"+o+"/inReply"))},getUpvotes:function(e){return{ref:r.child(e+"/upvotes"),array:t(r.child(e+"/upvotes"))}},getDownvotes:function(e){return{ref:r.child(e+"/downvotes"),array:t(r.child(e+"/downvotes"))}},getFollowers:function(t){return{ref:r.child(t+"/followers"),obj:e(r.child(t+"/followers"))}},upvoteTopic:function(t,o){return r.child(t+"/upvotes").child(o).set(moment().toISOString()),e(r.child(t+"/upvotes").child(o))},undoUpvote:function(e,t){return r.child(e+"/upvotes").child(t).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")}),r.child(e+"/upvotes")},downvoteTopic:function(t,o){return r.child(t+"/downvotes").child(o).set(moment().toISOString()),e(r.child(t+"/downvotes").child(o))},undoDownvote:function(e,t){return r.child(e+"/downvotes").child(t).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")}),r.child(e+"/downvotes")},follow:function(t,o){return r.child(t+"/followers").child("history").child(o).set(moment().toISOString()),e(r.child(t+"/followers").child("count")).$loaded().then(function(e){null===e.value||void 0===e.value?r.child(t+"/followers").child("count").set(1):r.child(t+"/followers").child("count").set(e.$value+1)}),e(r.child(t+"/followers"))},unfollow:function(t,o){return r.child(t+"/followers").child("history").child(o).remove(function(o){o?console.log("Error:",o):(console.log("Removed successfully!"),e(r.child(t+"/followers").child("count")).$loaded().then(function(e){r.child(t+"/followers").child("count").set(e.$value-1)}))}),r.child(t+"/followers")},getViews:function(t){return{ref:r.child(t).child("views"),obj:e(r.child(t).child("views"))}},latestFeed:function(){return t(r.orderByChild("created").limitToLast(10))},topicsByTag:function(e){return t(r.orderByChild("tags").equalTo(e))},arr:t(r),all:n,ref:r};return i}]),angular.module("App").controller("ProfileCtrl",["$scope","$rootScope","$state","$filter","md5","Auth","Users","Topics","notify","CateService","profile","isOwner","userPosts",function(e,t,o,r,n,i,l,a,s,u,c,d,f){console.log("ProfileCtrl");var p=this;p.profile=c,p.auth=i,p.users=l,p.topics=a,p.isOwner=d,p.cate=u,p.$state=o,p.userPosts=f,p.userFeed="",p.feed="",p.editInit="userEdit",p.nameExist=!1,p.getUserPost=function(e){p.feed=p.topics.createdBy(e)},p.oldProfileValue=p.profile,
p.userCreated=function(e){return p.topics.createdBy(e)},p.imageStrings=[],p.userCateFollow=[],p.cateIsFollow=[],p.followList="",p.followCateListArr=function(e){p.followList=p.cate.followList(e)},i.ref.getAuth()&&p.followCateListArr(i.ref.getAuth().uid),p.followCate=function(e,t){p.cateIsFollow[e]=!0,p.cate.addChild(t+"/follower").child(i.ref.getAuth().uid).push().set(moment().toISOString())},p.uploadFile=function(e){angular.forEach(e,function(e,t){var o=new FileReader;o.onload=function(e){var o=e.target.result;p.imageStrings[t]=o,p.users.userArrRef(i.ref.getAuth().uid).update({photo:o}),s({message:"Saved",position:"center",duration:3e3})},o.readAsDataURL(e.file)})},p.saveProfile=function(e){p.profile.updated=moment().toISOString(),null!==p.location&&(locationDetail={place_id:p.location.details.place_id,name:p.location.details.name,address:p.location.details.formatted_address,lat:p.location.details.geometry.location.lat(),lng:p.location.details.geometry.location.lng()},p.profile.userLocation=locationDetail),p.profile.$save().then(function(){s({message:"Saved",position:"center",duration:3e3}),void 0!==e&&o.go(e)})["catch"](function(e){s({message:"Error saving data",position:"center",duration:3e3})})},p.updateName=function(){p.users.userArrRef(i.ref.getAuth().uid).update({firstname:p.profile.firstname,lastname:p.profile.lastname}),p.users.userArrRef(i.ref.getAuth().uid+"/log").push().set({action:"name_change",oldname:p.oldProfileValue.firstname+"-"+p.oldProfileValue.lastname,created:moment().toISOString()}),s({message:"Saved",position:"center",duration:3e3})},p.updateBio=function(){p.users.userArrRef(i.ref.getAuth().uid).update({biography:p.profile.biography}),s({message:"Saved",position:"center",duration:3e3})},p.updateProfile=function(){p.profile.$save().then(function(){o.go("dashboard")})},p.checkUsername=function(){p.users.checkUsernameExist(p.profile.displayName).once("value",function(e){return null!==e.val()?p.nameExist=!0:p.nameExist=!1})}}]),angular.module("App").factory("Users",["$firebaseArray","$firebaseObject","FirebaseUrl","$http",function(e,t,o,r){var n=new Firebase(o+"users"),i=e(n);console.log("User Service");var l={getLocationIP:function(){return r({url:"http://ipinfo.io/json",method:"GET"})},getLocationIPData:function(){return r({url:"http://ipinfo.io/json",method:"GET"}).then(function(e){return e.data})},profile:function(e){return i.$getRecord(e)},getProfileByUsername:function(t){return e(n.orderByChild("displayName").equalTo(t))},checkUsernameExist:function(e){return n.orderByChild("displayName").equalTo(e)},getProfile:function(e){return console.log(e),t(n.child(e))},getDisplayName:function(e){return console.log(e),null!==e||""!==e?i.$getRecord(e).displayName:void 0},getFollower:function(e){return n.child(e+"/stat/follower/uid")},checkFollow:function(e,t){var r=!1,n=new Firebase(o+"users/"+e+"/stat/following/uid/"+t);return n.once("value",function(e){r=e.exists()}),r},userChangePassword:function(e,t,r){var n=new Firebase(o);n.changePassword({email:e,oldPassword:t,newPassword:r},function(e){if(e)switch(e.code){case"INVALID_PASSWORD":console.log("The specified user account password is incorrect.");break;case"INVALID_USER":console.log("The specified user account does not exist.");break;default:console.log("Error changing password:",e)}else console.log("User password changed successfully!")})},userRef:function(e){return n.child(e)},upvotes:function(e){return n.child(e).child("upvotes")},downvotes:function(e){return n.child(e).child("downvotes")},following:function(e){return n.child(e).child("following")},userArrRef:function(e){return n.child(e)},all:i};return l}]),angular.module("App").factory("UniqueIDGenerator",function(){return{generatePushID:function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,o=[],r=(new Date).getTime(),n=r===t;t=r;for(var i=new Array(8),l=7;l>=0;l--)i[l]=e.charAt(r%64),r=Math.floor(r/64);if(0!==r)throw new Error("We should have converted the entire timestamp.");var a=i.join("");if(n){for(l=11;l>=0&&63===o[l];l--)o[l]=0;o[l]++}else for(l=0;12>l;l++)o[l]=Math.floor(64*Math.random());for(l=0;12>l;l++)a+=e.charAt(o[l]);if(20!=a.length)throw new Error("Length should be 20.");return a}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInRvcGljcy5jb250cm9sbGVyLmpzIiwiYXV0aC5jb250cm9sbGVyLmpzIiwiYXV0aC5zZXJ2aWNlLmpzIiwiY2F0ZWdvcnkuY29udHJvbGxlci5qcyIsImNhdGVnb3J5LnNlcnZpY2UuanMiLCJkYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImRpcmVjdGl2ZXMuanMiLCJsYW5nLmpzIiwibm90aWZpY2F0aW9uLmNvbnRyb2xsZXIuanMiLCJub3RpZmljYXRpb24uc2VydmljZS5qcyIsInBsYWNlLmNvbnRyb2xsZXIuanMiLCJwbGFjZS5zZXJ2aWNlLmpzIiwidXRpbGl0aWVzLnNlcnZpY2UuanMiLCJ0YWcuY29udHJvbGxlci5qcyIsInRhZy5zZXJ2aWNlLmpzIiwidG9waWMtbGFuZGluZy5jb250cm9sbGVyLmpzIiwidG9waWNzLnNlcnZpY2UuanMiLCJwcm9maWxlLmNvbnRyb2xsZXIuanMiLCJ1c2Vycy5zZXJ2aWNlLmpzIiwiaGVscGVycy5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNob3ciLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJleHRlbmQiLCJiYXNlIiwicGFydHMiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiY2FsbCIsImFyZ3VtZW50cyIsImZvckVhY2giLCJwIiwiayIsImhhc093blByb3BlcnR5IiwibW92ZUZiUmVjb3JkIiwib2xkUmVmIiwibmV3UmVmIiwib25jZSIsInNuYXAiLCJzZXQiLCJ2YWwiLCJlcnJvciIsInJlbW92ZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJkZWZpbmVQYWxldHRlIiwiNTAiLCIxMDAiLCIyMDAiLCIzMDAiLCI0MDAiLCI1MDAiLCI2MDAiLCI3MDAiLCI4MDAiLCI5MDAiLCJBMTAwIiwiQTIwMCIsIkE0MDAiLCJBNzAwIiwiY29udHJhc3REZWZhdWx0Q29sb3IiLCJjb250cmFzdERhcmtDb2xvcnMiLCJjb250cmFzdExpZ2h0Q29sb3JzIiwidW5kZWZpbmVkIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsIiR0cmFuc2xhdGVQcm92aWRlciIsInByZWZlcnJlZExhbmd1YWdlIiwidXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5IiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkY29udHJvbGxlclByb3ZpZGVyIiwicmVnaXN0ZXJDdHJsIiwicmVnaXN0ZXIiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwiIiwiY29udHJvbGxlciIsInRlbXBsYXRlVXJsIiwicmVzb2x2ZSIsInJlcXVpcmVOb0F1dGgiLCIkc3RhdGUiLCJBdXRoIiwiYXV0aCIsIiRyZXF1aXJlQXV0aCIsInRoZW4iLCJnbyIsImxvZ2luLWZvcm1AaG9tZSIsImZlZWQiLCJUb3BpY3MiLCJsYXRlc3RGZWVkIiwiY2F0ZU5hbWUiLCIkc3RhdGVQYXJhbXMiLCJDYXRlZ29yeSIsImdldE5hbWUiLCJTbHVnIiwiJGxvYWRlZCIsImNhdGVUb3BpY3MiLCJsaXN0IiwiaGVhZGVyQHBsYWNlcyIsInBsYWNlTGFuZGluZyIsIlBsYWNlcyIsIiRmaXJlYmFzZUFycmF5IiwiZ2V0UGxhY2VSZWYiLCJwbGFjZV9pZCIsIm9uIiwic25hcHNob3QiLCJoZWFkZXJAdGFnIiwidGFnTmFtZSIsIlRhZyIsInRhZ0xhbmRpbmciLCJUYWdzIiwidGFnIiwidG9waWNzQnlUYWciLCJpc093bmVyIiwiVXNlcnMiLCJ0b3BpY1VpZCIsInJlZiIsImdldEF1dGgiLCJmb3J0b3BpYyIsInVpZCIsInRvcGljTGFuZGluZyIsInJlcGx5TGlzdCIsIkZpcmViYXNlVXJsIiwiJHEiLCJ0b3BpY0tleSIsImpzb25BcnIiLCJkZWZlcnJlZCIsImRlZmVyIiwiJGlkIiwiZmIiLCJGaXJlYmFzZSIsImNoaWxkIiwidXNlclNuYXAiLCJjaGlsZFNuYXBzaG90Iiwia2V5IiwiY2hpbGRWYWwiLCJtZWRpYVNuYXAiLCJwdXNoIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJwaG90byIsImRpc3BsYXlOYW1lIiwiZGlzcGx5TmFtZSIsImJvZHkiLCJjcmVhdGVkIiwicHJvbWlzZSIsInZpZXdEYXRhIiwidGltZSIsIm1vbWVudCIsInRvSVNPU3RyaW5nIiwiaGlzdG9yeU9iaiIsInVzZXJJUCIsImdldExvY2F0aW9uSVAiLCJzdWNjZXNzIiwiZ2V0VG9waWNCeVNsdWciLCJnZXRWaWV3cyIsIm9iaiIsImNvdW50IiwidXNlclJlZiIsImZvbGxvd2VycyIsImdldEZvbGxvd2VycyIsInZhbHVlIiwiZ2V0UHJvZmlsZUJ5VXNlcm5hbWUiLCJOYW1lIiwicHJvZmlsZSIsInVzZXJQb3N0cyIsImNyZWF0ZWRCeSIsIiRyb290U2NvcGUiLCJoZWFkZXJAcHJvZmlsZSIsInBhc3N3b3JkRWRpdEBhY2Njb3VudEVkaXQiLCJ1c2VyRWRpdEBhY2Njb3VudEVkaXQiLCJnZXRQcm9maWxlIiwic3RhdCIsInRvcGljTGlzdCIsImkiLCJsZW5ndGgiLCJ0b3BpYyIsInNsdWciLCJwaG90b3MiLCJwb3N0ZWRDb3VudCIsInBvc3RlZCIsImhlYWRlckBnZXRfc3RhcnRlZCIsImxvZ2luLWZvcm1AbG9naW4iLCJvdGhlcndpc2UiLCJmaWx0ZXIiLCJpdGVtcyIsImZpZWxkIiwicmV2ZXJzZSIsImZpbHRlcmVkIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsInRleHQiLCJkZWNvZGVVUkkiLCIkc2NlIiwidHJ1c3RBc0h0bWwiLCJyZXBsYWNlIiwiY29uc3RhbnQiLCIkc2NvcGUiLCIkbWRTaWRlbmF2IiwiJHRyYW5zbGF0ZSIsIiRjb29raWVzIiwiTm90aVNlcnZpY2UiLCIkbm90aWZpY2F0aW9uIiwiYXV0aEN0cmwiLCJ0aGlzIiwicmVxdWVzdFBlcm1pc3Npb24iLCJwZXJtaXNzaW9uIiwidXNlcnMiLCJub3RpZmljYXRpb24iLCJiYWRnZVZhbHVlIiwidXNlciIsImVtYWlsIiwicGFzc3dvcmQiLCIkd2F0Y2giLCJ1bnJlYWROb3RpZmljYXRpb24iLCJyZXNldENvdW50ZXIiLCJyZXNldFVucmVhZCIsInRvZ2dsZUxhbmciLCJsYW5nS2V5IiwidXNlIiwicHV0IiwidXNlckFyclJlZiIsInVwZGF0ZSIsImxhbmciLCJnZXQiLCJsb2dpbiIsIiRhdXRoV2l0aFBhc3N3b3JkIiwibG9nb3V0IiwiJHVuYXV0aCIsIiRjcmVhdGVVc2VyIiwiZmFjdG9yeSIsIiRmaXJlYmFzZUF1dGgiLCJnZXRVaWQiLCJjYXRlQ3RybCIsImNhdGVnb3J5IiwiJGZpcmViYXNlT2JqZWN0IiwiY2F0ZWdvcmllcyIsIkNhdGUiLCJuYW1lIiwidG9waWNfc2x1ZyIsIm9yZGVyQnlDaGlsZCIsImVxdWFsVG8iLCJ1c2Vyc1JlZiIsImFkZENoaWxkIiwiY2hpbGRuYW1lIiwiZm9sbG93TGlzdCIsInVuRm9sbG93IiwidXNlckZvbGxvdyIsImZvbGxvdyIsImV4aXN0cyIsImFyciIsImFsbCIsIkNhdGVTZXJ2aWNlIiwiZGFzaGJvYXJkQ3RybCIsImNhdGUiLCJ0b3BpY3MiLCJ0b3BpY19ncmlkIiwidGFncyIsInVzZXJDYXRlRm9sbG93IiwiY2F0ZUlzRm9sbG93IiwidXNlckZlZWQiLCJmb2xsb3dDYXRlIiwiY2F0ZV9zbHVnIiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJ0cmFuc2NsdWRlIiwic2NvcGUiLCJyZXZpZXciLCJyZXF1aXJlIiwibGluayIsImVsZW1lbnQiLCJhdHRycyIsIm5nQ3RybCIsIm1heFRhZ3MiLCJwYXJzZUludCIsIiRwYXJzZXJzIiwic3BsaWNlIiwidHJhbnNsYXRpb25zIiwiS0VZX0RBU0hCT0FSRCIsIktFWV9MQU5HVUFHRVMiLCJLRVlfSE9NRSIsIktFWV9SRUdJU1RFUiIsIktFWV9MT0dJTiIsIktFWV9MT0dPVVQiLCJLRVlfRk9MTE9XIiwiS0VZX0ZPTExPV0VSIiwiS0VZX1VORk9MTE9XIiwiS0VZX0ZPTExPV0lORyIsIktFWV9QT1NUIiwiS0VZX1BPU1RFRCIsIktFWV9VUFZPVEUiLCJLRVlfVVBWT1RFRCIsIktFWV9EV05fVk9URSIsIktFWV9EV05fVk9URUQiLCJLRVlfVklFVyIsIktFWV9SRU1PVkUiLCJLRVlfQ0FOQ0VMIiwiS0VZX1FVRVNUSU9OIiwiS0VZX1RPUElDIiwiS0VZX0NIR19QV0QiLCJLRVlfUEFTU1dPUkQiLCJLRVlfT0xEX1BXRCIsIktFWV9ORVdfUFdEIiwiS0VZX05FV19QV0RfQyIsIktFWV9TQVZFIiwiS0VZX1NBVkVfRFJBRlQiLCJLRVlfVEFHUyIsIktFWV9FWFBMT1JFIiwiS0VZX0ZFQVRfQ0FUIiwiS0VZX0NPTU1FTlRTIiwiS0VZX1JFUExZIiwiS0VZX1JFVklFVyIsIktFWV9FRElUIiwiS0VZX1RSRU5EIiwiS0VZX1RSRU5ESU5HIiwiS0VZX1dSSVRFX1JFUExZIiwiS0VZX0xBVEVTVF9GRUVEIiwiS0VZX0NPTkZfUkVNT1ZFIiwiS0VZX0NPTkZfUkVNX0MiLCJLRVlfV0hBVF9PTl9VUl9NSU5EIiwiS0VZX1lPVV9XQU5UX0ZPTExPVyIsIktFWV9OT19BQ0NUX1JFR0lTVEVSIiwiS0VZX0NBTlRfQ0hOR19VU0VSIiwiS0VZX1lPVVJfQUNDT1VOVCIsIktFWV9OT1RISU5HX0hFUkUiLCJLRVlfV0hPX1RPX0ZPTExPVyIsIktFWV9DQVRfV0lMTF9BUFBFQVIiLCJLRVlfV0hUX1VSX1NUT1JZIiwiS0VZX1dSVF9DT01NRU5UIiwiS0VZX0ZJUlNUTkFNRSIsIktFWV9MQVNUTkFNRSIsIktFWV9CSVJUSERBWSIsIktFWV9NT05USCIsIktFWV9EQVkiLCJLRVlfRU1BSUwiLCJLRVlfQ09ORl9FTUFJTCIsIktFWV9HRU5ERVIiLCJLRVlfTUFMRSIsIktFWV9GRU1BTEUiLCJLRVlfVVNFUk5BTUUiLCJLRVlfTE9DQVRJT04iLCJLRVlfRURfUFJPRklMRSIsIktFWV9FRF9DSEdfUFdEIiwiS0VZX0VEX1NJVEUiLCJLRVlfRURfUEhPTkUiLCJLRVlfRURfQklPIiwibm90aUN0cmwiLCJub3RpU2VydmljZSIsIm5vdGlmeVRvIiwiJGFkZCIsIm5vdGkiLCJOb3RpZmljYXRpb24iLCJjb3VudGVyIiwiZGlyIiwiaWNvbiIsImZvY3VzV2luZG93T25DbGljayIsIm5vdGlmeUZvbGxvd2VyIiwidG9waWNJZCIsImdldEZvbGxvd2VyIiwidXBkYXRlTm90aWZpY2F0aW9uQ291bnQiLCJyZXBseVN0YXR1cyIsIm5vdGlmeUxvZyIsImZyb21fdWlkIiwiZnJvbSIsImlzX3JlYWQiLCJ0aW1lc3RhbXAiLCJlcnJvck9iamVjdCIsImNvZGUiLCJhZGRBcnJDaGlsZCIsIiRtZERpYWxvZyIsIiRtZE1lZGlhIiwiTGFuZ3VhZ2VzIiwicGxhY2VzQ3RybCIsInBsYWNlRGV0YWlsX3JlZiIsInBsYWNlcyIsImFkZFBsYWNlRGV0YWlsQ2hpbGQiLCJhcmNoaXZlIiwiQXJjaGl2ZSIsInRhZ0N0cmwiLCJ0YWdzVXJsIiwiZ2V0VGFnUmVmIiwiZ2V0VGFnT2JqZWN0IiwidG9waWNUYWdzIiwidGFnU25hcCIsInRvcGljU25hcCIsInRvcGljTGFuZGluZ0N0cmwiLCJpblJlcGx5QXJyIiwiJGh0dHAiLCJ0b3BpY0N0cmwiLCJsYW5ndWFnZXMiLCJ1c2VyVXB2b3RlZFRvcGljcyIsInVwdm90ZXMiLCJ1c2VyRG93bnZvdGVkVG9waWNzIiwiZG93bnZvdGVzIiwidXNlckZvbGxvd2luZyIsImZvbGxvd2luZyIsImltYWdlU3RyaW5ncyIsImltYWdlVGV4dCIsImxvYWRCdXN5Iiwic2x1Z1JldHVybiIsImNyaXRlcmlhIiwiY3JpdGVyaWFSZXBseSIsInJldmlld0NyaXRlcmlhIiwiY3JpdFJlcGx5RGF0YSIsIm5ld1RvcGljIiwibG9jYXRpb24iLCJpcEluZm8iLCJhdmdSZXZpZXdSZXBseSIsIm9iakNvdW50IiwiT2JqZWN0Iiwia2V5cyIsImF2ZyIsInJlcGx5UmV2aWV3QXZlcmFnZSIsImF2Z1Jldmlld1Njb3JlIiwicmF0aW5nIiwicmVtb3ZlVHJhbnMiLCJjYW5jZWxUcmFucyIsImNvbmZpcm1SZW0iLCJjb25maXJtUmVtQ29udGVudCIsInVzZXJOYW1lIiwidXNlcklkIiwic2hvd01kTG9naW4iLCJldiIsInVzZUZ1bGxTY3JlZW4iLCJjdXN0b21GdWxsc2NyZWVuIiwicGFyZW50IiwiZG9jdW1lbnQiLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJmdWxsc2NyZWVuIiwiZGVjb2RlVGV4dCIsImxvYWRNb3JlIiwibG9hZFRhZ3MiLCJxdWVyeSIsInVwbG9hZEZpbGUiLCJmaWxlcyIsImluZGV4IiwiZmxvd0ZpbGUiLCJmaWxlUmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImV2ZW50IiwidXJpIiwidGFyZ2V0IiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImZpbGUiLCJzaG93Q29uZmlybVJlbW92ZSIsInRvcGljX293bmVyIiwiY29uZmlybSIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJvayIsImNhbmNlbCIsInJlbW92ZVRvcGljIiwicmVmQ2hpbGQiLCJyZXBseSIsInRvcGljT2JqIiwicmVwbHlBcnIiLCJuZXdSZXBseSIsInJlcGx5Q291bnQiLCJyZXBseUNvdW50UmVmIiwiY29tbWVudCIsInJlcGx5SW5SZXBseSIsInJlcGx5SWQiLCJyZXBseUluUmVwbHlBcnIiLCJhZGROZXdDaG9pY2UiLCJuZXdJdGVtTm8iLCJpZCIsInJlbW92ZUNob2ljZSIsImxhc3RJdGVtIiwiY3JlYXRlVG9waWMiLCJpc0RyYWZ0IiwibG9jYXRpb25EZXRhaWwiLCJkZXRhaWxzIiwic2x1Z2lmeSIsImFkZHJlc3MiLCJmb3JtYXR0ZWRfYWRkcmVzcyIsImxhdCIsImdlb21ldHJ5IiwibG5nIiwidHlwZSIsInBob3Rvc190ZXh0IiwiZHJhZnQiLCJzbHVnVGV4dCIsImdldFRvcGljQnlLZXkiLCJjaGVja0ZvbGxvdyIsImZvbGxvd191aWQiLCJmb2xsb3dVc2VyIiwiZm9sbG93ZXIiLCJ1bmZvbGxvd1VzZXIiLCJ1cHZvdGUiLCJjYW5jZWxEb3dudm90ZSIsInVwdm90ZVRvcGljIiwiJHZhbHVlIiwidXB2b3RlZCIsImNhbmNlbFVwdm90ZSIsInVuZG9VcHZvdGUiLCJkb3dudm90ZSIsImRvd252b3RlVG9waWMiLCJ1bmRvRG93bnZvdGUiLCJmb2xsb3dUb3BpYyIsImhpc3RvcnkiLCJ1bmZvbGxvd1RvcGljIiwidW5mb2xsb3ciLCJnZXRUb3BpY1JlcGx5IiwiZ2V0VGFnIiwiZ2V0U2x1ZyIsImNvdW50VXNlclRvcGljcyIsImxpbWl0VG9MYXN0IiwiZm9ydG9waWNSZWYiLCJ0b3BpY19rZXkiLCJsaW1pdFRvRmlyc3QiLCJpbmNyZW1lbnRWaWV3IiwiZ2V0VXB2b3RlcyIsImFycmF5IiwiZ2V0RG93bnZvdGVzIiwiJGZpbHRlciIsIm1kNSIsIm5vdGlmeSIsInByb2ZpbGVDdHJsIiwiZWRpdEluaXQiLCJuYW1lRXhpc3QiLCJnZXRVc2VyUG9zdCIsIm9sZFByb2ZpbGVWYWx1ZSIsInVzZXJDcmVhdGVkIiwiZm9sbG93Q2F0ZUxpc3RBcnIiLCJtZXNzYWdlIiwicG9zaXRpb24iLCJkdXJhdGlvbiIsInNhdmVQcm9maWxlIiwicmVkaXJlY3QiLCJ1cGRhdGVkIiwidXNlckxvY2F0aW9uIiwiJHNhdmUiLCJ1cGRhdGVOYW1lIiwiYWN0aW9uIiwib2xkbmFtZSIsInVwZGF0ZUJpbyIsImJpb2dyYXBoeSIsInVwZGF0ZVByb2ZpbGUiLCJjaGVja1VzZXJuYW1lIiwiY2hlY2tVc2VybmFtZUV4aXN0IiwibWV0aG9kIiwiZ2V0TG9jYXRpb25JUERhdGEiLCIkZ2V0UmVjb3JkIiwidXNlcm5hbWUiLCJnZXREaXNwbGF5TmFtZSIsImZvbGxvd19pZCIsInVzZXJDaGFuZ2VQYXNzd29yZCIsIm9sZHBhc3MiLCJuZXdwYXNzIiwiY2hhbmdlUGFzc3dvcmQiLCJvbGRQYXNzd29yZCIsIm5ld1Bhc3N3b3JkIiwiZ2VuZXJhdGVQdXNoSUQiLCJQVVNIX0NIQVJTIiwibGFzdFB1c2hUaW1lIiwibGFzdFJhbmRDaGFycyIsIm5vdyIsIkRhdGUiLCJnZXRUaW1lIiwiZHVwbGljYXRlVGltZSIsInRpbWVTdGFtcENoYXJzIiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwiRXJyb3IiLCJqb2luIiwicmFuZG9tIl0sIm1hcHBpbmdzIjoiQUFBQSxZQXVyQkEsU0FBQUEsTUFB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QSxLQUFBN1ksRUFBQSxFQUFBLEdBQUFBLEVBQUFBLElBQ0F3UyxHQUFBd0YsRUFBQVEsT0FBQU4sRUFBQWxZLEdBRUEsSUFBQSxJQUFBd1MsRUFBQXZTLE9BQUEsS0FBQSxJQUFBMFksT0FBQSx1QkFFQSxPQUFBbkciLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWFpbiBtb2R1bGUgb2YgdGhlIGFwcGxpY2F0aW9uLlxuICovXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcCcsIFtcbiAgICAnZmlyZWJhc2UnLFxuICAgICdhbmd1bGFyLW1kNScsIC8vIEVuY3J5cHQgZW1haWxcbiAgICAnbmdSb3V0ZScsXG4gICAgJ3VpLnJvdXRlcicsXG4gICAgJ25nTWF0ZXJpYWwnLCAvLyBJbnRlcmZhY2VcbiAgICAnYW5ndWxhck1vbWVudCcsIC8vIFRpbWUgbWFuYWdlbWVudFxuICAgICdmbG93JywgLy8gSW1hZ2UgdXBsb2FkXG4gICAgJ3NsdWdpZmllcicsIC8vIENyZWF0ZSBTbHVnc1xuICAgICduZ0F1dG9jb21wbGV0ZScsIC8vIEdvb2dsZSBwbGFjZXNcbiAgICAnbmdUYWdzSW5wdXQnLCAvLyBUYWdzXG4gICAgJ2NnTm90aWZ5JywgLy8gTm90aWZpY2F0aW9uIC0gaHR0cHM6Ly9naXRodWIuY29tL2Nncm9zcy9hbmd1bGFyLW5vdGlmeVxuICAgICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJywgLy8gVHJhbnNsYXRpb24gLSBodHRwczovL2FuZ3VsYXItdHJhbnNsYXRlLmdpdGh1Yi5pby9cbiAgICAvLydmYWNlYm9vaycsICAgICAgIC8vICBGYWNlYm9vayAtIGh0dHBzOi8vZ2l0aHViLmNvbS9DaXVsL2FuZ3VsYXItZmFjZWJvb2tcbiAgICAnYW5ndWxhci1mbGV4c2xpZGVyJywgLy8gSW1hZ2Ugc2xpZGVyIC0gaHR0cHM6Ly9naXRodWIuY29tL3RoZW5pa3NvL2FuZ3VsYXItZmxleHNsaWRlclxuXG4gICAgLy8gRW1vdGljb24gLS0gaHR0cDovL21pc3RpYzEwMC5naXRodWIuaW8vYW5ndWxhci1zbWlsaWVzL1xuICAgICduZ1Nhbml0aXplJyxcbiAgICAndWkuYm9vdHN0cmFwJywgICAvLyAgT1IgbWdjcmVhLm5nU3RyYXBcbiAgICAnYW5ndWxhci1zbWlsaWVzJyxcblxuICAgICduZ0Nvb2tpZXMnLCAgICAgIC8vICBjb29raWVzIHN0dWZmXG4gICAgJ25vdGlmaWNhdGlvbicsICAgLy8gIHdlYiBub3RpZmljYXRpb24gLSBodHRwczovL2dpdGh1Yi5jb20vbmVvemlyby9hbmd1bGFyLW5vdGlmaWNhdGlvblxuXG4gIF0pXG5cbiAgLmNvbmZpZyhmdW5jdGlvbiAoJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ3NsYWNrJywge1xuICAgICAgJzUwJzogJ2ZmZWJlZScsXG4gICAgICAnMTAwJzogJ2ZmY2RkMicsXG4gICAgICAnMjAwJzogJ2VmOWE5YScsXG4gICAgICAnMzAwJzogJ2U1NzM3MycsXG4gICAgICAnNDAwJzogJ2VmNTM1MCcsXG4gICAgICAnNTAwJzogJzREMzk0QicsIC8vIHByaW1hcnkgY29sb3VyXG4gICAgICAnNjAwJzogJ2U1MzkzNScsXG4gICAgICAnNzAwJzogJ2QzMmYyZicsXG4gICAgICAnODAwJzogJ2M2MjgyOCcsXG4gICAgICAnOTAwJzogJ2I3MWMxYycsXG4gICAgICAnQTEwMCc6ICdmZjhhODAnLFxuICAgICAgJ0EyMDAnOiAnZmY1MjUyJyxcbiAgICAgICdBNDAwJzogJ2ZmMTc0NCcsXG4gICAgICAnQTcwMCc6ICdkNTAwMDAnLFxuICAgICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2xpZ2h0JywgLy8gd2hldGhlciwgYnkgZGVmYXVsdCwgdGV4dCAoY29udHJhc3QpXG4gICAgICAvLyBvbiB0aGlzIHBhbGV0dGUgc2hvdWxkIGJlIGRhcmsgb3IgbGlnaHRcbiAgICAgICdjb250cmFzdERhcmtDb2xvcnMnOiBbJzUwJywgJzEwMCcsIC8vIGh1ZXMgd2hpY2ggY29udHJhc3Qgc2hvdWxkIGJlICdkYXJrJyBieSBkZWZhdWx0XG4gICAgICAgICcyMDAnLCAnMzAwJywgJzQwMCcsICdBMTAwJ10sXG4gICAgICAnY29udHJhc3RMaWdodENvbG9ycyc6IHVuZGVmaW5lZCAvLyBjb3VsZCBhbHNvIHNwZWNpZnkgdGhpcyBpZiBkZWZhdWx0IHdhcyAnZGFyaydcbiAgICB9KVxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAucHJpbWFyeVBhbGV0dGUoJ3NsYWNrJylcbiAgfSlcblxuICAvLyBGYWNlYm9vayBDb25maWdcbiAgLyouY29uZmlnKFxuICAgIGZ1bmN0aW9uIChGYWNlYm9va1Byb3ZpZGVyKSB7XG4gICAgICB2YXIgbXlBcHBJZCA9ICc5MzEzNzYxMjAyNjM4NTYnXG4gICAgICBGYWNlYm9va1Byb3ZpZGVyLnNldEFwcElkKG15QXBwSWQpXG4gICAgICBGYWNlYm9va1Byb3ZpZGVyLmluaXQobXlBcHBJZClcbiAgICB9XG4gICkqL1xuXG4gIC8vU2VjdXJpdHkgZm9yIFRyYW5zbGF0ZVxuICAuY29uZmlnKGZ1bmN0aW9uICgkdHJhbnNsYXRlUHJvdmlkZXIpIHtcbiAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoJ0VuZycpO1xuICAgIC8vIEVuYWJsZSBlc2NhcGluZyBvZiBIVE1MXG4gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnVzZVNhbml0aXplVmFsdWVTdHJhdGVneSgnZXNjYXBlJyk7XG4gIH0pXG5cblxuXG4gIC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsJGNvbnRyb2xsZXJQcm92aWRlcikge1xuXG4gICAgYXBwLnJlZ2lzdGVyQ3RybCA9ICRjb250cm9sbGVyUHJvdmlkZXIucmVnaXN0ZXI7XG5cbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgLnN0YXRlKCdob21lJywge1xuICAgICAgICB1cmw6ICcvJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwgYXMgIGRhc2hib2FyZEN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdob21lL2hvbWUuaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgIHJlcXVpcmVOb0F1dGg6IGZ1bmN0aW9uICgkc3RhdGUsIEF1dGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJylcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICdsb2dpbi1mb3JtQGhvbWUnOiB7XG4gICAgICAgICAgICAvL2NvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL2xvZ2luLWZvcm0uaHRtbCdcbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9KVxuXG5cbiAgICAgIC8vVHJlbmRpbmdcbiAgICAgIC5zdGF0ZSgndHJlbmRpbmcnLCB7XG4gICAgICAgIHVybDogJy9leHBsb3JlL3RyZW5kaW5nJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwgYXMgIGRhc2hib2FyZEN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdob21lL3RyZW5kLmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICBmZWVkOiBmdW5jdGlvbiAoVG9waWNzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5sYXRlc3RGZWVkKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0pXG5cblxuICAgICAgLy8gQ2F0ZWdvcnkgTGFuZGluZ1xuICAgICAgLnN0YXRlKCdjYXRlZ29yeScsIHtcbiAgICAgICAgdXJsOiAnL2NhdGVnb3J5L3tTbHVnfScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIC8vY29udHJvbGxlcjogJ0NhdGVDdHJsIGFzIGNhdGVDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2F0ZWdvcnkvaW5kZXguaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgIC8vIEdldHRpbmcgQ2F0ZWdvcnkgZGV0YWlsc1xuICAgICAgICAgICAgICBjYXRlTmFtZTogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgQ2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ2F0ZWdvcnkuZ2V0TmFtZSgkc3RhdGVQYXJhbXMuU2x1ZykuJGxvYWRlZCgpXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIC8vIEdldHRpbmcgbGlzdCBvZiBjYXRlZ29yeSB0b3BpY3MgaGVyZVxuICAgICAgICAgICAgICBjYXRlVG9waWNzOiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBUb3BpY3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmxpc3QoJHN0YXRlUGFyYW1zLlNsdWcpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgICB9KVxuXG5cbiAgICAgIC8vIFBsYWNlcyBsYW5kaW5nIHBhZ2VcbiAgICAgIC5zdGF0ZSgncGxhY2VzJywge1xuICAgICAgICB1cmw6ICcvcGxhY2VzL3twbGFjZV9zbHVnfS97cGxhY2VfaWR9JyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnaGVhZGVyQHBsYWNlcyc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQbGFjZXNDdHJsIGFzIHBsYWNlc0N0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwbGFjZS9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgcGxhY2VMYW5kaW5nOiBmdW5jdGlvbiAoUGxhY2VzLCBUb3BpY3MsICRzdGF0ZVBhcmFtcywgJGZpcmViYXNlQXJyYXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YVxuICAgICAgICAgICAgICAgIFBsYWNlcy5nZXRQbGFjZVJlZigkc3RhdGVQYXJhbXMucGxhY2VfaWQpLm9uKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwc2hvdCkge1xuICAgICAgICAgICAgICAgICAgZGF0YSA9IHNuYXBzaG90LnZhbCgpXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzbmFwc2hvdC52YWwoKSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhXG4gICAgICAgICAgICAgIC8vIHJldHVybiAgJGZpcmViYXNlQXJyYXkoUGxhY2VzLmdldFBsYWNlUmVmKCRzdGF0ZVBhcmFtcy5wbGFjZV9pZCkpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cblxuICAgICAgLy8gVGFnIGxhbmRpbmcgcGFnZVxuICAgICAgLnN0YXRlKCd0YWcnLCB7XG4gICAgICAgIHVybDogJy90YWcve1RhZ30nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdoZWFkZXJAdGFnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1RhZ0N0cmwgYXMgdGFnQ3RybCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RhZy9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgdGFnTmFtZTogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAkc3RhdGVQYXJhbXMuVGFnXG4gICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgdGFnTGFuZGluZzogZnVuY3Rpb24gKFRvcGljcywgJHN0YXRlUGFyYW1zLCBUYWdzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9ICRzdGF0ZVBhcmFtcy5UYWdcbiAgICAgICAgICAgICAgICAvLyB2YXIgZmIgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwpXG4gICAgICAgICAgICAgICAgLy8gdmFyIGRhdGFSZXQgPSAnJ1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiBzaG93KFRhZ3MudG9waWNUYWdzKHRhZykpXG4gICAgICAgICAgICAgICAgLypyZXR1cm4gZmIuY2hpbGQoJ3RhZ3MvJyArIHRhZylcbiAgICAgICAgICAgICAgICAgICAgLm9uKCd2YWx1ZScsIGZ1bmN0aW9uICh0YWdTbmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZiLmNoaWxkKCd0b3BpY3MnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9yZGVyQnlDaGlsZChcInRhZ3NcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcXVhbFRvKHRhZylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbigndmFsdWUnLCBmdW5jdGlvbiAodG9waWNTbmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93KCBleHRlbmQoe30sIHRhZ1NuYXAudmFsKCksIHRvcGljU25hcC52YWwoKSkgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvISpkYXRhUmV0ID0gZXh0ZW5kKHt9LCB0YWdTbmFwLnZhbCgpLCB0b3BpY1NuYXAudmFsKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRmaXJlYmFzZUFycmF5KGRhdGFSZXQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVJldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKiEvXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KSovXG4gICAgICAgICAgICAgICAgLy8gdmFyIHRhZ09iaiA9IFRhZ3MuZ2V0VGFnT2JqZWN0KHRhZylcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGFnT2JqLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyAgIHJldHVybiBUb3BpY3MudG9waWNzQnlUYWcodGFnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGV4dGVuZCh7fSwgdGFnT2JqLiR2YWx1ZSwgc25hcC52YWwoKSkpXG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBleHRlbmQoe30sIHRhZ09iai4kdmFsdWUsIHNuYXAudmFsKCkpXG4gICAgICAgICAgICAgICAgLy8gICB9KVxuICAgICAgICAgICAgICAgIC8vIH0pXG5cbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGZiLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHZhciBkYXRhID0gc25hcHNob3QudmFsKClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihkYXRhU25hcCkge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBpbmRleCA9IHdvcmQuaW5kZXhPZignICcpXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGZpcnN0ID0gZGF0YVNuYXAuTmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGxhc3QgPSB3b3JkLnN1YnN0cmluZyhpbmRleCArIDEpXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGNhbmRpZGF0ZSA9IGRhdGFTbmFwLk5hbWVcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmluZGV4T2YoZmlyc3QpID49IDAgJiYgY2FuZGlkYXRlLmluZGV4T2YobGFzdCkgPj0gMClcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YVNuYXAuQ0lEKVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHJlamVjdCgnU29tZSBzb3J0IG9mIGZhaWx1cmUnKVxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyAgICAgfSlcbiAgICAgICAgICAgICAgICAvLyB9KVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy50b3BpY3NCeVRhZyh0YWcpXG4gICAgICAgICAgICAgIC8vIC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXApe1xuICAgICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG5cbiAgICAgIC8vIFRvcGljIGxhbmRpbmcgcGFnZVxuICAgICAgLnN0YXRlKCd0b3BpYycsIHtcbiAgICAgICAgdXJsOiAnL3tTbHVnfScsXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAvKlNsdWc6IGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsJHN0YXRlLEF1dGgpIHtcbiAgICAgICAgICAgICRzdGF0ZVBhcmFtcy5TbHVnID0gZGVjb2RlVVJJQ29tcG9uZW50KCRzdGF0ZVBhcmFtcy5TbHVnKVxuICAgICAgICAgICAgaWYoJHN0YXRlUGFyYW1zLlNsdWcgPT0gJycpe1xuICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2Rhc2hib2FyZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0qL1xuICAgICAgICB9LFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVG9waWNMYW5kaW5nQ3RybCBhcyB0b3BpY0xhbmRpbmdDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndG9waWNzL2luZGV4Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICBpc093bmVyOiBmdW5jdGlvbiAoQXV0aCwgVXNlcnMsICRzdGF0ZVBhcmFtcywgVG9waWNzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvcGljVWlkID0gJydcbiAgICAgICAgICAgICAgICAvLyBJZiB1c2VyIGxvZ2luLCBjaGVjayBpZiB0aGV5IGFyZSB0aGUgdG9waWMgb3duZXJcbiAgICAgICAgICAgICAgICBpZiAoQXV0aC5yZWYuZ2V0QXV0aCgpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmZvcnRvcGljKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVswXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdG9waWNVaWQgPSBkYXRhWzBdLnVpZFxuICAgICAgICAgICAgICAgICAgICAgIGlmIChBdXRoLnJlZi5nZXRBdXRoKCkudWlkID09IHRvcGljVWlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdG9waWNMYW5kaW5nOiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBUb3BpY3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmZvcnRvcGljKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKCk7XG4gICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgcmVwbHlMaXN0OiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBUb3BpY3MsICRzdGF0ZSwgRmlyZWJhc2VVcmwsJHEpIHtcblxuICAgICAgICAgICAgICAgIHZhciB0b3BpY0tleSA9ICcnXG4gICAgICAgICAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgICAgICAgICAgdmFyIGpzb25EYXRhO1xuICAgICAgICAgICAgICAgIHZhciBqc29uQXJyID0gW107XG5cbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5mb3J0b3BpYygkc3RhdGVQYXJhbXMuU2x1ZykuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbMF0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BpY0tleSA9IGRhdGFbMF0uJGlkXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ3RvcGljLW5vdGZvdW5kJylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCk7XG5cbiAgICAgICAgICAgICAgICAgIGZiLmNoaWxkKCd0b3BpY3MvJyt0b3BpY0tleSArICcvcmVwbGllcycpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24odXNlclNuYXApIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlclNuYXAuZm9yRWFjaChmdW5jdGlvbihjaGlsZFNuYXBzaG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IGNoaWxkU25hcHNob3Qua2V5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgZmIuY2hpbGQoJ3RvcGljcy8nK3RvcGljS2V5ICsgJy9yZXBsaWVzLycra2V5KS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKGNoaWxkVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYi5jaGlsZCgndXNlcnMvJytjaGlsZFZhbC52YWwoKS51aWQpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24obWVkaWFTbmFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBleHRlbmQoe30sIGNoaWxkVmFsLnZhbCgpLCBtZWRpYVNuYXAudmFsKCkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbkFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZDogICAgICAgICAgICBkYXRhLnVpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0bmFtZTogICAgICBkYXRhLmZpcnN0bmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiAgICAgICBkYXRhLmxhc3RuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG86ICAgICAgICAgIGRhdGEucGhvdG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogICAgZGF0YS5kaXNwbHlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogICAgICAgICAgIGRhdGEuYm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6ICAgICAgICBkYXRhLmNyZWF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShqc29uQXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdmlld0RhdGE6IGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIFRvcGljcywgVXNlcnMsIEF1dGgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9waWNLZXksIHZpZXdzXG4gICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBtb21lbnQoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlPYmogPSB7J3VzZXJJUCc6ICcnLCAnY3JlYXRlZCc6IHRpbWV9XG4gICAgICAgICAgICAgICAgVXNlcnMuZ2V0TG9jYXRpb25JUCgpLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIGhpc3RvcnlPYmoudXNlcklQID0gZGF0YS5kYXRhXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgaGlzdG9yeU9iai51c2VySVAgPSBkYXRhLmRhdGFcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuZ2V0VG9waWNCeVNsdWcoJHN0YXRlUGFyYW1zLlNsdWcpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZGF0YVswXS4kaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcGljS2V5ID0gZGF0YVswXS4kaWRcbiAgICAgICAgICAgICAgICAgICAgdmlld3MgPSBUb3BpY3MuZ2V0Vmlld3ModG9waWNLZXkpXG5cbiAgICAgICAgICAgICAgICAgICAgdmlld3Mub2JqLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY291bnQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlld3MucmVmLmNoaWxkKCdjb3VudCcpLnNldCgxKVxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3cy5yZWYuY2hpbGQoJ2NvdW50Jykuc2V0KGRhdGEuY291bnQgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgdWlkID0gYXV0aC51aWRcbiAgICAgICAgICAgICAgICAgICAgICB2aWV3cy5yZWYuY2hpbGQoJ2hpc3RvcnknKS5jaGlsZCh1aWQpLnB1c2goKS5zZXQoaGlzdG9yeU9iailcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgndmlld3MnKS5jaGlsZCh0b3BpY0tleSkucHVzaCgpLnNldChoaXN0b3J5T2JqKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXdzLm9ialxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZvbGxvd2VyczogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgVG9waWNzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5nZXRUb3BpY0J5U2x1Zygkc3RhdGVQYXJhbXMuU2x1ZykuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgIHZhciB0b3BpY0tleSA9IGRhdGFbMF0uJGlkXG4gICAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmdldEZvbGxvd2Vycyh0b3BpY0tleSkub2JqLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIFRvcGljIG5vdCBmb3VuZFxuICAgICAgLnN0YXRlKCd0b3BpYy1ub3Rmb3VuZCcsIHtcbiAgICAgICAgdXJsOiAnL2Vyci9ub3Rmb3VuZCdcbiAgICAgIH0pXG5cbiAgICAgIC8vIFByb2ZpbGUgbGFuZGluZyBwYWdlXG4gICAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XG4gICAgICAgIHVybDogJy9wcm9maWxlL3tOYW1lfScsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgJyc6IHtcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9maWxlQ3RybCBhcyBwcm9maWxlQ3RybCcsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Byb2ZpbGUvaW5kZXguaHRtbCcsXG4gICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgIGlzT3duZXI6IGZ1bmN0aW9uIChBdXRoLCBVc2VycywgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgaWYgKEF1dGgucmVmLmdldEF1dGgoKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGVCeVVzZXJuYW1lKCRzdGF0ZVBhcmFtcy5OYW1lKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZmlsZVswXS4kaWQgPT0gQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgdXNlclBvc3RzOiBmdW5jdGlvbiAoVXNlcnMsIFRvcGljcywgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGVCeVVzZXJuYW1lKCRzdGF0ZVBhcmFtcy5OYW1lKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGVbMF0uJGlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmNyZWF0ZWRCeShwcm9maWxlWzBdLiRpZClcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9maWxlOiBmdW5jdGlvbiAoJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRyb290U2NvcGUsIEF1dGgsIFVzZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGVCeVVzZXJuYW1lKCRzdGF0ZVBhcmFtcy5OYW1lKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2ZpbGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICAnaGVhZGVyQHByb2ZpbGUnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLy8gUHJvZmlsZSBsYW5kaW5nIHBhZ2VcbiAgICAgIC8vIEBwcm9maWxlQ3RybFxuICAgICAgLnN0YXRlKCdhY2Njb3VudEVkaXQnLCB7XG4gICAgICAgIHVybDogJy9hY2NvdW50L2VkaXQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICdwYXNzd29yZEVkaXRAYWNjY291bnRFZGl0Jzoge1xuICAgICAgICAgICAgdXJsOiAnL2FjY291bnQvY2hhbmdlUGFzc3dvcmQnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL3Bhc3N3ZC5odG1sJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgJ3VzZXJFZGl0QGFjY2NvdW50RWRpdCc6IHtcbiAgICAgICAgICAgIHVybDogJy9hY2NvdW50L2VkaXQtZm9ybScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Byb2ZpbGUvZWRpdC1mb3JtLmh0bWwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJvZmlsZS9lZGl0Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uICgkc3RhdGUsICRyb290U2NvcGUsIEF1dGgsIFVzZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gVXNlcnMuZ2V0UHJvZmlsZShhdXRoLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZ2V0X3N0YXJ0ZWQnKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBhdXRoOiBmdW5jdGlvbiAoJHN0YXRlLCBVc2VycywgQXV0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLnN0YXRlKCdhY2NvdW50UGFzc3dvcmQnLCB7XG4gICAgICAgIHVybDogJy9hY2NvdW50L2NoYW5nZVBhc3N3b3JkJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL3Bhc3N3ZC5odG1sJ1xuICAgICAgfSlcblxuICAgICAgLnN0YXRlKCdhY2NvdW50VXNlckVkaXQnLCB7XG4gICAgICAgIHVybDogJy9hY2NvdW50L2VkaXQtZm9ybScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAncHJvZmlsZS9lZGl0LWZvcm0uaHRtbCdcbiAgICAgIH0pXG5cbiAgICAgIC8vIERhc2hib2FyZFxuICAgICAgLy8gQHByb2ZpbGVDdHJsXG4gICAgICAuc3RhdGUoJ2Rhc2hib2FyZCcsIHtcbiAgICAgICAgdXJsOiAnL3VzZXIvZGFzaGJvYXJkJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnZGFzaGJvYXJkL2luZGV4Lmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uICgkc3RhdGUsICRyb290U2NvcGUsIEF1dGgsIFVzZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gVXNlcnMuZ2V0UHJvZmlsZShhdXRoLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBubyBzdGF0IG9iamVjdFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2ZpbGUuc3RhdCkge1xuICAgICAgICAgICAgICAgICAgICAgIFVzZXJzLnVzZXJSZWYoYXV0aC51aWQpLmNoaWxkKCdzdGF0L3Vwdm90ZWQvY291bnQnKS5zZXQoMClcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgnc3RhdC9wb3N0ZWQvY291bnQnKS5zZXQoMClcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgnc3RhdC9jb21tZW50L2NvdW50Jykuc2V0KDApXG4gICAgICAgICAgICAgICAgICAgICAgVXNlcnMudXNlclJlZihhdXRoLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93ZXIvY291bnQnKS5zZXQoMClcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dpbmcvY291bnQnKS5zZXQoMClcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIGRpc3BsYXluYW1lIC0gZ28gdG8gZ2V0X3N0YXJ0ZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZmlsZVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZ2V0X3N0YXJ0ZWQnKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvclxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGF1dGg6IGZ1bmN0aW9uICgkc3RhdGUsIFVzZXJzLCBBdXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cblxuICAgICAgLy8gbmVzdGVkIGxpc3Qgd2l0aCBjdXN0b20gY29udHJvbGxlclxuICAgICAgLnN0YXRlKCdkYXNoYm9hcmQubGlzdCcsIHtcbiAgICAgICAgdXJsOiAnL2ZlZWQve1NsdWd9JyxcbiAgICAgICAgLy90ZW1wbGF0ZVVybDogJy9mZWVkcy9mZWVkLmh0bWwnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ2F0ZUN0cmwgYXMgY2F0ZUN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjYXRlZ29yeS9pbmRleC5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgLy8gR2V0dGluZyBDYXRlZ29yeSBkZXRhaWxzXG4gICAgICAgICAgICAgIGNhdGVOYW1lOiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBDYXRlZ29yeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBDYXRlZ29yeS5nZXROYW1lKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKClcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgLy8gR2V0dGluZyBsaXN0IG9mIGNhdGVnb3J5IHRvcGljcyBoZXJlXG4gICAgICAgICAgICAgIGNhdGVUb3BpY3M6IGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIFRvcGljcyxGaXJlYmFzZVVybCwkcSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRvcGljTGlzdCA9W107XG4gICAgICAgICAgICAgICAgdmFyIGpzb25BcnIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmxpc3QoJHN0YXRlUGFyYW1zLlNsdWcpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uKHRvcGljTGlzdCkge1xuXG4gICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTwgdG9waWNMaXN0Lmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgICAgICBmYi5jaGlsZCgndG9waWNzLycrdG9waWNMaXN0W2ldLiRpZCkub25jZSgndmFsdWUnLCBmdW5jdGlvbihjaGlsZFZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgIGZiLmNoaWxkKCd1c2Vycy8nK3RvcGljTGlzdFtpXS51aWQpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24gKG1lZGlhU25hcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGV4dGVuZCh7fSwgY2hpbGRWYWwudmFsKCksIG1lZGlhU25hcC52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uQXJyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICB0b3BpYzogICAgICAgICAgZGF0YS50b3BpYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc2x1ZzogICAgICAgICAgIGRhdGEuc2x1ZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdWlkOiAgICAgICAgICAgIGRhdGEudWlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdG5hbWU6ICAgICAgZGF0YS5maXJzdG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RuYW1lOiAgICAgICBkYXRhLmxhc3RuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwaG90bzogICAgICAgICAgZGF0YS5waG90byxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6ICAgIGRhdGEuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6ICAgICAgICAgICBkYXRhLmJvZHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6ICAgICAgICBkYXRhLmNyZWF0ZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHBob3RvczogICAgICAgICBkYXRhLnBob3RvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdGVkQ291bnQ6ICAgIGRhdGEuc3RhdC5wb3N0ZWQuY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShqc29uQXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC8vIEZvbGxsb3cgQ2F0ZWdvcnlcbiAgICAgIC8vIEBwcm9maWxlQ3RybFxuICAgICAgLnN0YXRlKCdmb2xsb3dfY2F0ZXMnLCB7XG4gICAgICAgIHVybDogJy91c2VyL2ZvbGxvdy1jYXRlZ29yaWVzJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aC9mb2xsb3ctY2F0ZWdvcmllcy5odG1sJyxcbiAgICAgICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICAgICAgdXNlclBvc3RzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGlzT3duZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9maWxlOiBmdW5jdGlvbiAoVXNlcnMsIEF1dGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlKGF1dGgudWlkKS4kbG9hZGVkKClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBhdXRoOiBmdW5jdGlvbiAoJHN0YXRlLCBVc2VycywgQXV0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICAvLyBHZXR0aW5nIHN0YXJ0ZWRcbiAgICAgIC8vIEBwcm9maWxlQ3RybFxuICAgICAgLnN0YXRlKCdnZXRfc3RhcnRlZCcsIHtcbiAgICAgICAgdXJsOiAnL3VzZXIvZ2V0X3N0YXJ0ZWQnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZmlsZUN0cmwgYXMgcHJvZmlsZUN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoL2dldF9zdGFydGVkLmh0bWwnLFxuICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uIChVc2VycywgQXV0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkudGhlbihmdW5jdGlvbiAoYXV0aCkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGUoYXV0aC51aWQpLiRsb2FkZWQoKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGF1dGg6IGZ1bmN0aW9uICgkc3RhdGUsIFVzZXJzLCBBdXRoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgICdoZWFkZXJAZ2V0X3N0YXJ0ZWQnOiB7XG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogJy91c2VyL2xvZ2luJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAnJzoge1xuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoL2xvZ2luLmh0bWwnXG4gICAgICAgICAgfSxcbiAgICAgICAgICAnbG9naW4tZm9ybUBsb2dpbic6IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2h0bWwvbG9naW4tZm9ybS5odG1sJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgLnN0YXRlKCdyZWdpc3RlcicsIHtcbiAgICAgICAgdXJsOiAnL3VzZXIvcmVnaXN0ZXInLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICcnOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGgvcmVnaXN0ZXIuaHRtbCdcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlc29sdmU6IHtcbiAgICAgICAgICByZXF1aXJlTm9BdXRoOiBmdW5jdGlvbiAoJHN0YXRlLCBBdXRoKSB7XG4gICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICByZXR1cm4gZXJyb3JcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpXG4gIH0pXG5cbiAgLmZpbHRlcignb3JkZXJPYmplY3RCeScsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW1zLCBmaWVsZCwgcmV2ZXJzZSkge1xuICAgICAgdmFyIGZpbHRlcmVkID0gW11cbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgZmlsdGVyZWQucHVzaChpdGVtLiRpZCkuc2V0KGl0ZW0pXG4gICAgICB9KVxuICAgICAgZmlsdGVyZWQuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gKGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTEpXG4gICAgICB9KVxuICAgICAgaWYgKHJldmVyc2UpIGZpbHRlcmVkLnJldmVyc2UoKVxuICAgICAgcmV0dXJuIGZpbHRlcmVkXG4gICAgfVxuICB9KVxuXG4gIC5maWx0ZXIoJ2RlY29kZVVSSScsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgIHJldHVybiB0ZXh0ID8gZGVjb2RlVVJJKHRleHQpIDogJydcbiAgICB9XG4gIH0pXG5cbiAgLy8gRm9ybWF0dGluZyB0ZXh0cyB0byBpbmNsdWRlIG5ldyBsaW5lXG4gIC5maWx0ZXIoJ25sMmJyJywgZnVuY3Rpb24gKCRzY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgIHJldHVybiB0ZXh0ID8gJHNjZS50cnVzdEFzSHRtbCh0ZXh0LnJlcGxhY2UoL1xcbi9nLCAnPGJyLz4nKSkgOiAnJ1xuICAgIH1cbiAgfSlcblxuICAuY29uc3RhbnQoJ0ZpcmViYXNlVXJsJywgJ2h0dHBzOi8vYm14eXouZmlyZWJhc2Vpby5jb20vJylcblxuZnVuY3Rpb24gc2hvdyAoZGF0YSkge1xuICBjb25zb2xlLmxvZyhkYXRhKVxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMilcbn1cblxuLy8gZm9yIGpvaW5pbmcgLSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9rYXRvd3VsZi82NTk4MjM4XG5mdW5jdGlvbiBleHRlbmQgKGJhc2UpIHtcbiAgdmFyIHBhcnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxuICBwYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgaWYgKHAgJiYgdHlwZW9mIChwKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGZvciAodmFyIGsgaW4gcCkge1xuICAgICAgICBpZiAocC5oYXNPd25Qcm9wZXJ0eShrKSkge1xuICAgICAgICAgIGJhc2Vba10gPSBwW2tdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pXG4gIHJldHVybiBiYXNlXG59XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ1RvcGljQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwkc2NvcGUsJHJvb3RTY29wZSwgJG1kRGlhbG9nLCAkbWRNZWRpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLEZpcmViYXNlVXJsLCR0cmFuc2xhdGUsJG5vdGlmaWNhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2VydmljZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlTZXJ2aWNlLFRhZ3MsIFRvcGljcywgQXV0aCwgVXNlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbHVnLFBsYWNlcywgTGFuZ3VhZ2VzLEFyY2hpdmUpe1xuXG4gICAgY29uc29sZS5sb2coXCJ0b3BpY0N0cmxcIik7XG5cbiAgICB2YXIgdG9waWNDdHJsID0gdGhpcztcblxuXG4gICAgLy9QYXJzZXIgaGVyZVxuICAgIHRvcGljQ3RybC50YWdzICAgICAgPSBUYWdzO1xuICAgIHRvcGljQ3RybC50b3BpY3MgICAgPSBUb3BpY3M7XG4gICAgdG9waWNDdHJsLmF1dGggICAgICA9IEF1dGg7XG4gICAgdG9waWNDdHJsLnVzZXJzICAgICA9IFVzZXJzO1xuICAgIHRvcGljQ3RybC5sYW5ndWFnZXMgPSBMYW5ndWFnZXM7XG4gICAgdG9waWNDdHJsLnBsYWNlcyAgICA9IFBsYWNlcztcbiAgICB0b3BpY0N0cmwuYXJjaGl2ZSAgID0gQXJjaGl2ZTtcbiAgICB0b3BpY0N0cmwubm90aSAgICAgID0gTm90aVNlcnZpY2U7XG5cbiAgICBpZih0b3BpY0N0cmwuYXV0aC5yZWYuZ2V0QXV0aCgpICE9IG51bGwgKXtcbiAgICAgIHRvcGljQ3RybC5wcm9maWxlICA9IHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKHRvcGljQ3RybC5hdXRoLnJlZi5nZXRBdXRoKCkudWlkKTtcbiAgICAgIHRvcGljQ3RybC51aWQgPSB0b3BpY0N0cmwucHJvZmlsZS4kaWQ7XG4gICAgICB0b3BpY0N0cmwudXNlclJlZiA9IHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpO1xuICAgICAgdG9waWNDdHJsLnVzZXJVcHZvdGVkVG9waWNzID0gdG9waWNDdHJsLnVzZXJzLnVwdm90ZXModG9waWNDdHJsLnVpZCk7XG4gICAgICB0b3BpY0N0cmwudXNlckRvd252b3RlZFRvcGljcyA9IHRvcGljQ3RybC51c2Vycy5kb3dudm90ZXModG9waWNDdHJsLnVpZCk7XG4gICAgICB0b3BpY0N0cmwudXNlckZvbGxvd2luZyA9IHRvcGljQ3RybC51c2Vycy5mb2xsb3dpbmcodG9waWNDdHJsLnVpZCk7XG4gICAgfVxuICAgIGVsc2V7XG4gICAgICB0b3BpY0N0cmwucHJvZmlsZSA9Jyc7XG4gICAgICB0b3BpY0N0cmwudWlkID0gJyc7XG4gICAgICB0b3BpY0N0cmwudXNlclJlZiA9ICcnO1xuICAgIH1cblxuXG5cbiAgICAvL1ByZXNldCBQYXJhbWV0ZXJzXG4gICAgdG9waWNDdHJsLmltYWdlU3RyaW5ncyAgPSBbXTtcbiAgICB0b3BpY0N0cmwuaW1hZ2VUZXh0ICAgICA9IFtdO1xuICAgIHRvcGljQ3RybC5pblJlcGx5QXJyICAgID0gW107XG4gICAgdG9waWNDdHJsLmxvYWRCdXN5ICAgICAgPSBmYWxzZTtcbiAgICB0b3BpY0N0cmwuc2x1Z1JldHVybiAgICA9IG51bGw7XG4gICAgdG9waWNDdHJsLmNyaXRlcmlhICAgICAgPSBmYWxzZTtcbiAgICB0b3BpY0N0cmwuY3JpdGVyaWFSZXBseSA9IG51bGw7XG4gICAgdG9waWNDdHJsLnJldmlld0NyaXRlcmlhPWZhbHNlO1xuICAgIHRvcGljQ3RybC5jcml0UmVwbHlEYXRhID0gbnVsbDtcblxuICAgIC8vaWYgYWxsb3cgbnVsbCBpbiB0aGUgZm9ybVxuICAgIHRvcGljQ3RybC5uZXdUb3BpYyAgICAgID0ge1xuICAgICAgJ2xvY2F0aW9uJzogJycsXG4gICAgICAndXJsJyA6ICcnLFxuICAgICAgJ2lwSW5mbyc6ICcnLFxuICAgICAgJ3RhZ3MnOiAnJyxcblxuICAgIH1cblxuXG4gICAgJHNjb3BlLiR3YXRjaCgnJyxmdW5jdGlvbigpe1xuICAgICAgY29uc29sZS5sb2coXCI+Pj4gd2F0Y2hpbmcgYXQgdG9waWMgY29udHJvbGxlclwiKTtcbiAgICB9KVxuXG4gICAgLy9DYWxjIGF2ZXJhZ2UgcmV2aWV3IGlucHV0IGluIHJlcGx5XG4gICAgdG9waWNDdHJsLmF2Z1Jldmlld1JlcGx5ID0gZnVuY3Rpb24oKXtcblxuICAgICAgdmFyIG9iakNvdW50ID0gT2JqZWN0LmtleXModG9waWNDdHJsLmNyaXRlcmlhUmVwbHkpLmxlbmd0aDtcbiAgICAgIHZhciBhdmcgPSAwXG4gICAgICBmb3IodmFyIGk9MDtpPG9iakNvdW50O2krKyl7XG4gICAgICAgIGF2ZyA9IGF2ZyArIHRvcGljQ3RybC5jcml0ZXJpYVJlcGx5W2ldO1xuICAgICAgfVxuXG4gICAgICB0b3BpY0N0cmwucmVwbHlSZXZpZXdBdmVyYWdlID0gYXZnL29iakNvdW50O1xuXG4gICAgICBjb25zb2xlLmxvZyh0b3BpY0N0cmwuY3JpdGVyaWFSZXBseSk7XG5cbiAgICAgIHRvcGljQ3RybC5jcml0UmVwbHlEYXRhID0geyBhdmc6IHRvcGljQ3RybC5yZXBseVJldmlld0F2ZXJhZ2UsIGRhdGE6IHRvcGljQ3RybC5jcml0ZXJpYVJlcGx5fVxuICAgIH1cblxuXG4gICAgLy9HZXQgdGhlIGF2ZXJhZ2Ugc2NvcmUgZnJvbSBjcml0ZXJpYSB2YWx1ZXNcbiAgICB0b3BpY0N0cmwuYXZnUmV2aWV3U2NvcmUgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgIGlmKGRhdGEpXG4gICAgICB7XG4gICAgICB2YXIgYXZnID0wO1xuICAgICAgZm9yKHZhciBpPTA7aTxkYXRhLmxlbmd0aDtpKyspe1xuICAgICAgICBhdmcgPSBhdmcgKyBkYXRhW2ldLnJhdGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdmcvZGF0YS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvL0xhYmVsIGZvciByZW1vdmUgdG9waWNzXG4gICAgJHRyYW5zbGF0ZShbJ0tFWV9SRU1PVkUnLCAnS0VZX0NBTkNFTCcsJ0tFWV9DT05GX1JFTU9WRScsJ0tFWV9DT05GX1JFTV9DJ10pLnRoZW4oZnVuY3Rpb24gKHRyYW5zbGF0aW9ucykge1xuICAgICAgdG9waWNDdHJsLnJlbW92ZVRyYW5zID0gdHJhbnNsYXRpb25zLktFWV9SRU1PVkU7XG4gICAgICB0b3BpY0N0cmwuY2FuY2VsVHJhbnMgPSB0cmFuc2xhdGlvbnMuS0VZX0NBTkNFTDtcbiAgICAgIHRvcGljQ3RybC5jb25maXJtUmVtICA9IHRyYW5zbGF0aW9ucy5LRVlfQ09ORl9SRU1PVkU7XG4gICAgICB0b3BpY0N0cmwuY29uZmlybVJlbUNvbnRlbnQgPSAgdHJhbnNsYXRpb25zLktFWV9DT05GX1JFTV9DO1xuICAgIH0pO1xuXG5cbiAgICB0b3BpY0N0cmwudXNlck5hbWUgPSBmdW5jdGlvbih1c2VySWQpe1xuICAgICAgaWYodXNlcklkIT0gbnVsbCl7XG4gICAgICAgIC8vcmV0dXJuIHRvcGljQ3RybC51c2Vycy5nZXREaXNwbGF5TmFtZSh1c2VySWQpO1xuICAgICAgfVxuICAgIH1cblxuXG5cblxuICAgIC8vTG9naW4gZm9yIG1hdGVyaWFsXG4gICAgdG9waWNDdHJsLnNob3dNZExvZ2luID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgIHZhciB1c2VGdWxsU2NyZWVuID0gKCRtZE1lZGlhKCdzbScpIHx8ICRtZE1lZGlhKCd4cycpKSAmJiAkc2NvcGUuY3VzdG9tRnVsbHNjcmVlbjtcbiAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICAvL2NvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9tZC1sb2dpbi1mb3JtLmh0bWwnLFxuICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuICAgICAgICAgIHRhcmdldEV2ZW50OiBldixcbiAgICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOiB0cnVlLFxuICAgICAgICAgIGZ1bGxzY3JlZW46IHVzZUZ1bGxTY3JlZW5cbiAgICAgICAgfSlcbiAgICB9XG5cblxuXG4gICAgdG9waWNDdHJsLmRlY29kZVRleHQgPSBmdW5jdGlvbih0ZXh0KXtcbiAgICAgIC8vcmV0dXJuICRmaWx0ZXIoJ3NsdWdpZnknKShpdGVtLm5hbWUpO1xuICAgICAgY29uc29sZS5sb2coZGVjb2RlVVJJKHRleHQpKTtcbiAgICAgIHJldHVybiBkZWNvZGVVUkkodGV4dCk7XG4gICAgfVxuXG5cbiAgICB0b3BpY0N0cmwubG9hZE1vcmUgPSBmdW5jdGlvbihpdGVtcykge1xuICAgICAgdG9waWNDdHJsLmxvYWRCdXN5ID0gdHJ1ZTtcbiAgICAgIHZhciBkYXRhID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRhdGEucHVzaChpdGVtc1tpXSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIHJldHVybiBkYXRhXG4gICAgfTtcblxuICAgIHRvcGljQ3RybC5sb2FkVGFncyA9IGZ1bmN0aW9uKHF1ZXJ5KSB7XG4gICAgICBjb25zb2xlLmxvZyh0b3BpY0N0cmwudGFncy50YWdzVXJsKCkpO1xuICAgIH07XG5cblxuICAgIC8qdG9waWNDdHJsLnVzZXJzLmdldExvY2F0aW9uSVAoKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5pcEluZm8gPSBkYXRhO1xuICAgIH0pOyovXG5cblxuICAgIC8vVXBsb2FkIFByb2ZpbGUgaW1hZ2VcbiAgICB0b3BpY0N0cmwudXBsb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGVzLGluZGV4KSB7XG4gICAgICBhbmd1bGFyLmZvckVhY2goZmlsZXMsIGZ1bmN0aW9uIChmbG93RmlsZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciB1cmkgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgIHRvcGljQ3RybC5pbWFnZVN0cmluZ3NbaW5kZXhdID0gdXJpO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmxvd0ZpbGUuZmlsZSk7XG4gICAgICB9KVxuICAgIH07XG5cblxuICAgIC8vU2hvdyBjb25maXJtIHJlbW92ZSB0b3BpY1xuICAgIHRvcGljQ3RybC5zaG93Q29uZmlybVJlbW92ZSA9IGZ1bmN0aW9uKGV2LHRvcGljX293bmVyLG9iail7XG4gICAgICAvLyBBcHBlbmRpbmcgZGlhbG9nIHRvIGRvY3VtZW50LmJvZHkgdG8gY292ZXIgc2lkZW5hdiBpbiBkb2NzIGFwcFxuICAgICAgdmFyIGNvbmZpcm0gPSAkbWREaWFsb2cuY29uZmlybSgpXG4gICAgICAgIC50aXRsZSh0b3BpY0N0cmwuY29uZmlybVJlbSlcbiAgICAgICAgLnRleHRDb250ZW50KHRvcGljQ3RybC5jb25maXJtUmVtQ29udGVudClcbiAgICAgICAgLnRhcmdldEV2ZW50KGV2KVxuICAgICAgICAub2sodG9waWNDdHJsLnJlbW92ZVRyYW5zKVxuICAgICAgICAuY2FuY2VsKHRvcGljQ3RybC5jYW5jZWxUcmFucyk7XG4gICAgICAkbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZih0b3BpY0N0cmwucmVtb3ZlVG9waWModG9waWNfb3duZXIsb2JqKSl7XG4gICAgICAgICAgJHN0YXRlLmdvKCdkYXNoYm9hcmQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgLy9SZW1vdmUgdG9waWNcbiAgICB0b3BpY0N0cmwucmVtb3ZlVG9waWMgPSBmdW5jdGlvbih0b3BpY19vd25lcixvYmope1xuICAgICAgLy92ZXJpZnkgaWYgdGhlIHRvcGljIG93bmVyIGFuZCB0aGUgbG9naW4gb3duZXIgaXMgdGhlIHNhbWUgcHBsXG4gICAgICBpZih0b3BpY19vd25lciA9PSB0b3BpY0N0cmwudWlkKXtcbiAgICAgICAgbW92ZUZiUmVjb3JkKHRvcGljQ3RybC50b3BpY3MucmVmQ2hpbGQob2JqLiRpZCksIHRvcGljQ3RybC5hcmNoaXZlLmFkZENoaWxkKG9iai4kaWQpKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvL1JlcGx5IHRvIHRvcGljXG4gICAgdG9waWNDdHJsLnJlcGx5ID0gZnVuY3Rpb24odG9waWNPYmope1xuXG4gICAgICB0b3BpY0N0cmwudG9waWNzLnJlcGx5QXJyKHRvcGljT2JqLiRpZCkuJGFkZCh7XG4gICAgICAgIHRvcGljSWQ6ICB0b3BpY09iai4kaWQsXG4gICAgICAgIGJvZHk6ICAgICB0b3BpY0N0cmwubmV3UmVwbHkuYm9keSxcbiAgICAgICAgdWlkOiAgICAgIHRvcGljQ3RybC51aWQsXG4gICAgICAgIHJldmlldzogICB0b3BpY0N0cmwuY3JpdFJlcGx5RGF0YSxcbiAgICAgICAgY3JlYXRlZDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgLy9Ob3RpZnkgdG9waWMgb3duZXJcbiAgICAgICAgLy90b3BpY09iaiByZWZlcnMgdG8gdGhlIHByb3BlcnR5IG9mIHRoaXMgb2JqZWN0XG4gICAgICAgIHRvcGljQ3RybC5ub3RpLnVwZGF0ZU5vdGlmaWNhdGlvbkNvdW50KHRvcGljT2JqLiRpZCx0b3BpY09iai51aWQsdG9waWNDdHJsLnVpZCk7XG4gICAgICB9KVxuXG4gICAgICB0b3BpY0N0cmwudG9waWNzLnJlcGx5Q291bnQodG9waWNPYmouJGlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgaWYoIWRhdGEuY291bnQpe1xuICAgICAgICAgIHRvcGljQ3RybC50b3BpY3MucmVwbHlDb3VudFJlZih0b3BpY09iai4kaWQpLnNldCgxKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdG9waWNDdHJsLnRvcGljcy5yZXBseUNvdW50UmVmKHRvcGljT2JqLiRpZClcbiAgICAgICAgICAgIC5zZXQoZGF0YS5jb3VudCArMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvL1N0YXQgdXBkYXRlIGZvciB1c2VyXG4gICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9jb21tZW50L2NvdW50JylcbiAgICAgICAgLnNldCh0b3BpY0N0cmwucHJvZmlsZS5zdGF0LmNvbW1lbnQuY291bnQgKyAxKTtcblxuICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvY29tbWVudC90b3BpY3MvJyt0b3BpY09iai4kaWQpXG4gICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuXG5cbiAgICAvL1JlcGx5IGluIHJlcGx5XG4gICAgdG9waWNDdHJsLnJlcGx5SW5SZXBseSA9IGZ1bmN0aW9uKHRvcGljSWQscmVwbHlJZCl7XG4gICAgICB0b3BpY0N0cmwudG9waWNzLnJlcGx5SW5SZXBseUFycih0b3BpY0lkLHJlcGx5SWQpLiRhZGQoe1xuICAgICAgICBib2R5OiAgICAgdG9waWNDdHJsLnJlcGx5SW5SZXBseS5ib2R5LFxuICAgICAgICB1aWQ6ICAgICAgdG9waWNDdHJsLnVpZCxcbiAgICAgICAgY3JlYXRlZDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pXG4gICAgfVxuXG5cblxuICAgIHRvcGljQ3RybC5hZGROZXdDaG9pY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuZXdJdGVtTm8gPSB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEubGVuZ3RoKzE7XG4gICAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEucHVzaCh7J2lkJzonY3JpdGVyaWEnK25ld0l0ZW1Ob30pO1xuICAgIH07XG5cbiAgICB0b3BpY0N0cmwucmVtb3ZlQ2hvaWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGFzdEl0ZW0gPSB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEubGVuZ3RoLTE7XG4gICAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEuc3BsaWNlKGxhc3RJdGVtKTtcbiAgICB9O1xuXG5cbiAgICAvL0NyZWF0ZSBuZXcgdG9waWNcbiAgICB0b3BpY0N0cmwuY3JlYXRlVG9waWMgPSBmdW5jdGlvbihjYXRlZ29yeSxpc0RyYWZ0KXtcblxuICAgICAgLy9DaGVjayBpZiB3ZSBoYXZlIGxvY2F0aW9uIGRldGFpbHNcbiAgICAgIHZhciBsb2NhdGlvbkRldGFpbCA9ICcnO1xuXG4gICAgICBpZih0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24gIT09ICcnICl7XG4gICAgICAgIGNvbnNvbGUubG9nKHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbik7XG4gICAgICAgIGxvY2F0aW9uRGV0YWlsID0ge1xuICAgICAgICAgIHBsYWNlX2lkOiB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5wbGFjZV9pZCxcbiAgICAgICAgICBzbHVnOiAgICAgU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLm5hbWUpLFxuICAgICAgICAgIG5hbWU6ICAgICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5uYW1lLFxuICAgICAgICAgIGFkZHJlc3M6ICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBsYXQ6ICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubGF0KCksXG4gICAgICAgICAgbG5nOiAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpLFxuICAgICAgICAgIGxuZzogICAgICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSxcbiAgICAgICAgICBsbmc6ICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAvKiBERUJVRyBGT1JNIFZBTFVFXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICB0eXBlOiAgICAgICAgICAgdG9waWNDdHJsLnR5cGUsXG4gICAgICAgIGxhbmc6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMubGFuZyxcbiAgICAgICAgdG9waWM6ICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyxcbiAgICAgICAgYm9keTogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5ib2R5LFxuICAgICAgICBjYXRlZ29yeTogICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHVpZDogICAgICAgICAgICB0b3BpY0N0cmwudWlkLFxuICAgICAgICBzbHVnOiAgICAgICAgICAgU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyksXG4gICAgICAgIHBob3RvczogICAgICAgICB0b3BpY0N0cmwuaW1hZ2VTdHJpbmdzLFxuICAgICAgICBwaG90b3NfdGV4dDogICAgdG9waWNDdHJsLmltYWdlVGV4dCxcbiAgICAgICAgbG9jYXRpb246ICAgICAgIGxvY2F0aW9uRGV0YWlsLFxuICAgICAgICB1cmw6ICAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnVybCxcbiAgICAgICAgZHJhZnQ6ICAgICAgICAgIGlzRHJhZnQsXG4gICAgICAgIGNyZWF0ZWQ6ICAgICAgICBtb21lbnQoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB0YWdzOiAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRhZ3MsXG4gICAgICAgIHVzZXJJUDogICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmlwSW5mb1xuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgKi9cblxuICAgICAgdG9waWNDdHJsLnRvcGljcy5hcnIuJGFkZCh7XG4gICAgICAgICAgdHlwZTogICAgICAgICAgIHRvcGljQ3RybC50eXBlLFxuICAgICAgICAgIGxhbmc6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMubGFuZyxcbiAgICAgICAgICB0b3BpYzogICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRvcGljLFxuICAgICAgICAgIGJvZHk6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMuYm9keSxcbiAgICAgICAgICBjYXRlZ29yeTogICAgICAgY2F0ZWdvcnksXG4gICAgICAgICAgdWlkOiAgICAgICAgICAgIHRvcGljQ3RybC51aWQsXG4gICAgICAgICAgLy9zbHVnOiAgICAgICAgICAgU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyksXG4gICAgICAgICAgc2x1ZzogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyxcbiAgICAgICAgICBwaG90b3M6ICAgICAgICAgdG9waWNDdHJsLmltYWdlU3RyaW5ncyxcbiAgICAgICAgICBwaG90b3NfdGV4dDogICAgdG9waWNDdHJsLmltYWdlVGV4dCxcbiAgICAgICAgICBsb2NhdGlvbjogICAgICAgbG9jYXRpb25EZXRhaWwsXG4gICAgICAgICAgdXJsOiAgICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy51cmwsXG4gICAgICAgICAgZHJhZnQ6ICAgICAgICAgIGlzRHJhZnQsXG4gICAgICAgICAgY3JlYXRlZDogICAgICAgIG1vbWVudCgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdGFnczogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy50YWdzLFxuICAgICAgICAgIHVzZXJJUDogICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMuaXBJbmZvLFxuICAgICAgICAgIHJldmlldzogICAgICAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEsXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odG9waWMpe1xuXG4gICAgICAgICAgdmFyIHNsdWdUZXh0ID0nJztcbiAgICAgICAgICAvL2lmIHdlIGFyZSB1bmFibGUgdG8gY29udmVydCB0byBzbHVnIHRoZW4gd2UgdXNlIHRoZSB0b3BpYyB0ZXh0LCBlbHNlIHVzZSBzbHVnXG4gICAgICAgICAgaWYoU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYykgPT0nJyl7XG4gICAgICAgICAgICBzbHVnVGV4dCA9IHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYztcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNsdWdUZXh0ID0gU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9VcGRhdGUgc2x1ZyB3aXRoIHRvcGljIEtleVxuICAgICAgICAgIHRvcGljQ3RybC50b3BpY3MuZ2V0VG9waWNCeUtleSh0b3BpYy5rZXkoKSkudXBkYXRlKHtcInNsdWdcIjpzbHVnVGV4dCt0b3BpYy5rZXkoKX0pO1xuXG4gICAgICAgICAgLy9TdGF0IHVwZGF0ZVxuICAgICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L3Bvc3RlZC9jb3VudCcpXG4gICAgICAgICAgICAuc2V0KHRvcGljQ3RybC5wcm9maWxlLnN0YXQucG9zdGVkLmNvdW50ICsgMSk7XG5cbiAgICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9wb3N0ZWQvdG9waWNzLycrdG9waWMua2V5KCkpXG4gICAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcblxuICAgICAgICAgIC8vSWYgdGhlcmUgaXMgbG9jYXRpb25cbiAgICAgICAgICBpZihsb2NhdGlvbkRldGFpbCAhPT0gJycpe1xuXG4gICAgICAgICAgICB0b3BpY0N0cmwucGxhY2VzLmFkZENoaWxkKGxvY2F0aW9uRGV0YWlsLnBsYWNlX2lkKVxuICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh0b3BpYy5rZXkoKSlcbiAgICAgICAgICAgICAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcblxuICAgICAgICAgICAgdG9waWNDdHJsLnBsYWNlcy5hZGRDaGlsZChsb2NhdGlvbkRldGFpbC5wbGFjZV9pZClcbiAgICAgICAgICAgICAgLmNoaWxkKCdpbmZvJykuc2V0KGxvY2F0aW9uRGV0YWlsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL2lmIHRoZXJlIGFyZSB0YWdzXG4gICAgICAgICAgaWYodG9waWNDdHJsLm5ld1RvcGljLnRhZ3MgIT09IG51bGwpe1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRvcGljQ3RybC5uZXdUb3BpYy50YWdzLmxlbmd0aDsgKytpbmRleCkge1xuICAgICAgICAgICAgICB0b3BpY0N0cmwudGFncy5hZGRDaGlsZCh0b3BpY0N0cmwubmV3VG9waWMudGFnc1tpbmRleF0udGV4dClcbiAgICAgICAgICAgICAgICAuY2hpbGQodG9waWMua2V5KCkpLnB1c2goKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9Ob3RpZnkgZm9sbG93ZXJcbiAgICAgICAgICB0b3BpY0N0cmwubm90aS5ub3RpZnlGb2xsb3dlcih0b3BpYy5rZXkoKSx0b3BpY0N0cmwudWlkKTtcblxuXG4gICAgICAgICAgLy9SZXNldCBmb3JtIGhlcmVcbiAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMgPSB7XG4gICAgICAgICAgICBib2R5OiAnJ1xuICAgICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvL0NoZWNrIGlmIHVzZXIgaXMgYWxyZWFkeSBmb2xsb3dpbmcgdXNlclxuICAgIHRvcGljQ3RybC5jaGVja0ZvbGxvdyA9IGZ1bmN0aW9uKGZvbGxvd191aWQpe1xuICAgICAgaWYodG9waWNDdHJsLnVzZXJzLmNoZWNrRm9sbG93KHRvcGljQ3RybC51aWQsZm9sbG93X3VpZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvL0ZvbGxvdyBVc2VyXG4gICAgdG9waWNDdHJsLmZvbGxvd1VzZXIgPSBmdW5jdGlvbihmb2xsb3dfdWlkKXtcblxuICAgICAgLy9VcGRhdGUgdGhlIHBlcnNvbiB0aGF0IGJlaW5nIGZvbGxvdywgY3JlZGl0IHRoZW0gZm9yIGhhdmluZyBmb2xsb3dlclxuICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUoZm9sbG93X3VpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZihmb2xsb3dfdWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQuZm9sbG93ZXIuY291bnQgKyAxKTtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZihmb2xsb3dfdWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci91aWQvJysgdG9waWNDdHJsLnVpZClcbiAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvL1VwZGF0ZSB0aGUgcGVyc29uIHRoYXQgaXMgZm9sbG93aW5nLCBjcmVkaXQgdGhlbSBmb3IgaGF2aW5nIGZvbGxvd2luZ1xuICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUodG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dpbmcvY291bnQnKVxuICAgICAgICAgIC5zZXQoZGF0YS5zdGF0LmZvbGxvd2VyLmNvdW50ICsgMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93aW5nL3VpZC8nKyBmb2xsb3dfdWlkKVxuICAgICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvL1VuZm9sbG93IFVzZXJcbiAgICB0b3BpY0N0cmwudW5mb2xsb3dVc2VyID0gZnVuY3Rpb24oZm9sbG93X3VpZCl7XG5cbiAgICAgIC8vVXBkYXRlIHRoZSBwZXJzb24gdGhhdCBiZWluZyBmb2xsb3csIGNyZWRpdCB0aGVtIGZvciBoYXZpbmcgZm9sbG93ZXJcbiAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKGZvbGxvd191aWQpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYoZm9sbG93X3VpZCkuY2hpbGQoJ3N0YXQvZm9sbG93ZXIvY291bnQnKVxuICAgICAgICAgIC5zZXQoZGF0YS5zdGF0LmZvbGxvd2VyLmNvdW50IC0gMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYoZm9sbG93X3VpZCkuY2hpbGQoJ3N0YXQvZm9sbG93ZXIvdWlkLycrIHRvcGljQ3RybC51aWQpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vVXBkYXRlIHRoZSBwZXJzb24gdGhhdCBpcyBmb2xsb3dpbmcsIGNyZWRpdCB0aGVtIGZvciBoYXZpbmcgZm9sbG93aW5nXG4gICAgICB0b3BpY0N0cmwudXNlcnMuZ2V0UHJvZmlsZSh0b3BpY0N0cmwudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L2ZvbGxvd2luZy9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQuZm9sbG93aW5nLmNvdW50IC0gMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93aW5nL3VpZC8nKyBmb2xsb3dfdWlkKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgfVxuXG5cblxuICAgICAvL3Vwdm90ZVxuICAgIHRvcGljQ3RybC51cHZvdGUgPSBmdW5jdGlvbih0b3BpYyl7XG5cbiAgICAgIGlmKHRvcGljLmRvd252b3RlcyAhPSB1bmRlZmluZWQgJiYgdG9waWMuZG93bnZvdGVzW3RvcGljQ3RybC51aWRdICE9IHVuZGVmaW5lZCl7XG4gICAgICAgIHRvcGljQ3RybC5jYW5jZWxEb3dudm90ZSh0b3BpYyk7XG4gICAgICB9XG4gICAgICB0b3BpY0N0cmwudG9waWNzLnVwdm90ZVRvcGljKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB0b3BpY0N0cmwudXNlclVwdm90ZWRUb3BpY3MuY2hpbGQodG9waWMuJGlkKS5zZXQodmFsdWUuJHZhbHVlKTtcblxuICAgICAgICAvL1N0YXQgdXBkYXRlXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKHRvcGljLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpYy51aWQpLmNoaWxkKCdzdGF0L3Vwdm90ZWQvY291bnQnKVxuICAgICAgICAgIC5zZXQoZGF0YS5zdGF0LnVwdm90ZWQuY291bnQgKyAxKTtcbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWMudWlkKS5jaGlsZCgnc3RhdC91cHZvdGVkL3RvcGljcy8nK3RvcGljLiRpZClcbiAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0b3BpY0N0cmwuY2FuY2VsVXB2b3RlID0gZnVuY3Rpb24odG9waWMpe1xuICAgICAgdG9waWNDdHJsLnRvcGljcy51bmRvVXB2b3RlKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCk7XG5cbiAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKHRvcGljLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAvL1N0YXQgdXBkYXRlXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljLnVpZCkuY2hpbGQoJ3N0YXQvdXB2b3RlZC9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQudXB2b3RlZC5jb3VudCAtIDEpO1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljLnVpZCkuY2hpbGQoJ3N0YXQvdXB2b3RlZC90b3BpY3MvJyt0b3BpYy4kaWQpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cblxuICAgICAgdG9waWNDdHJsLnVzZXJVcHZvdGVkVG9waWNzLmNoaWxkKHRvcGljLiRpZCkucmVtb3ZlKGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9fSk7XG4gICAgfTtcblxuICAgIC8vZG93bnZvdGVcbiAgICB0b3BpY0N0cmwuZG93bnZvdGUgPSBmdW5jdGlvbih0b3BpYyl7XG4gICAgICBpZih0b3BpYy51cHZvdGVzICE9IHVuZGVmaW5lZCAmJiB0b3BpYy51cHZvdGVzW3RvcGljQ3RybC51aWRdICE9IHVuZGVmaW5lZCl7XG4gICAgICAgIHRvcGljQ3RybC5jYW5jZWxVcHZvdGUodG9waWMpO1xuICAgICAgfVxuICAgICAgdG9waWNDdHJsLnRvcGljcy5kb3dudm90ZVRvcGljKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB0b3BpY0N0cmwudXNlckRvd252b3RlZFRvcGljcy5jaGlsZCh0b3BpYy4kaWQpLnNldCh2YWx1ZS4kdmFsdWUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRvcGljQ3RybC5jYW5jZWxEb3dudm90ZSA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MudW5kb0Rvd252b3RlKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCk7XG4gICAgICB0b3BpY0N0cmwudXNlckRvd252b3RlZFRvcGljcy5jaGlsZCh0b3BpYy4kaWQpLnJlbW92ZShmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZW1vdmVkIHN1Y2Nlc3NmdWxseSFcIik7XG4gICAgICAgICAgfX0pO1xuICAgIH07XG5cbiAgICAvL2ZvbGxvdyB0b3BpY1xuICAgIHRvcGljQ3RybC5mb2xsb3dUb3BpYyA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MuZm9sbG93KHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB0b3BpY0N0cmwudXNlckZvbGxvd2luZy5jaGlsZCh0b3BpYy4kaWQpLnNldCh2YWx1ZS5oaXN0b3J5W3RvcGljQ3RybC51aWRdKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0b3BpY0N0cmwudW5mb2xsb3dUb3BpYyA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MudW5mb2xsb3codG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKTtcbiAgICAgIHRvcGljQ3RybC51c2VyRm9sbG93aW5nLmNoaWxkKHRvcGljLiRpZCkucmVtb3ZlKGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9fSk7XG4gICAgfTtcblxuICB9KTtcblxuXG4vL2h0dHBzOi8vZ2lzdC5naXRodWIuY29tL2thdG93dWxmLzYwOTkwNDJcbmZ1bmN0aW9uIG1vdmVGYlJlY29yZChvbGRSZWYsIG5ld1JlZikge1xuICBvbGRSZWYub25jZSgndmFsdWUnLCBmdW5jdGlvbiAoc25hcCkge1xuICAgIG5ld1JlZi5zZXQoc25hcC52YWwoKSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIG9sZFJlZi5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZihjb25zb2xlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ0F1dGhDdHJsJywgZnVuY3Rpb24oJHNjb3BlLEF1dGgsIFVzZXJzLCAkc3RhdGUsJHJvb3RTY29wZSwkbWRTaWRlbmF2LCR0cmFuc2xhdGUsICRjb29raWVzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb3RpU2VydmljZSwkbm90aWZpY2F0aW9uKXtcblxuICAgIGNvbnNvbGUubG9nKFwiYXV0aEN0cmxcIik7XG5cbiAgICB2YXIgYXV0aEN0cmwgPSB0aGlzO1xuXG4gICAgLy9Bc2sgZm9yIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uXG4gICAgJG5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpXG4gICAgICAudGhlbihmdW5jdGlvbiAocGVybWlzc2lvbikge1xuICAgICAgICBjb25zb2xlLmxvZyhwZXJtaXNzaW9uKTsgLy8gZGVmYXVsdCwgZ3JhbnRlZCwgZGVuaWVkXG4gICAgICB9KTtcblxuICAgIC8vUGFyc2VyXG4gICAgYXV0aEN0cmwuYXV0aCAgICAgPSBBdXRoO1xuICAgIGF1dGhDdHJsLnVzZXJzICAgID0gVXNlcnM7XG4gICAgYXV0aEN0cmwubm90aWZpY2F0aW9uID0gTm90aVNlcnZpY2U7XG5cbiAgICBhdXRoQ3RybC5iYWRnZVZhbHVlID0gMDtcblxuICAgIGlmKEF1dGgucmVmLmdldEF1dGgoKSAhPSBudWxsICl7XG4gICAgICBhdXRoQ3RybC5wcm9maWxlICAgID0gYXV0aEN0cmwudXNlcnMuZ2V0UHJvZmlsZShBdXRoLnJlZi5nZXRBdXRoKCkudWlkKTtcbiAgICAgIC8vYXV0aEN0cmwuYmFkZ2VWYWx1ZSA9IGF1dGhDdHJsLm5vdGlmaWNhdGlvbi51bnJlYWROb3RpZmljYXRpb24oYXV0aEN0cmwucHJvZmlsZS4kaWQpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgYXV0aEN0cmwucHJvZmlsZSA9JydcbiAgICB9XG5cbiAgICBhdXRoQ3RybC51c2VyID0ge1xuICAgICAgZW1haWw6ICcnLFxuICAgICAgcGFzc3dvcmQ6ICcnXG4gICAgfTtcblxuXG4gICAgJHNjb3BlLiR3YXRjaCgnTm90aVNlcnZpY2UucmVwbHlTdGF0dXMoYXV0aEN0cmwucHJvZmlsZSknLGZ1bmN0aW9uKCl7XG4gICAgICBjb25zb2xlLmxvZyhcIndhdGNoaW5nIHJlcGx5IHN0YXR1cyBcIiArIGF1dGhDdHJsLnByb2ZpbGUpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLiR3YXRjaCgnYmFkZ2VWYWx1ZScsZnVuY3Rpb24oKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiPj4+XCIgKyBhdXRoQ3RybC5iYWRnZVZhbHVlLnZhbHVlKTtcbiAgICAgIHJldHVybiBOb3RpU2VydmljZS51bnJlYWROb3RpZmljYXRpb24oYXV0aEN0cmwucHJvZmlsZS4kaWQpLnRoZW4oZnVuY3Rpb24odmFsKXtcbiAgICAgICAgYXV0aEN0cmwuYmFkZ2VWYWx1ZSA9IHZhbDtcbiAgICAgIH0pO1xuXG5cbiAgICAgIC8vcmV0dXJuIGF1dGhDdHJsLmJhZGdlVmFsdWUgPSBhdXRoQ3RybC5ub3RpZmljYXRpb24udW5yZWFkTm90aWZpY2F0aW9uKGF1dGhDdHJsLnByb2ZpbGUuJGlkKTtcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coYXV0aEN0cmwuYmFkZ2VWYWx1ZSk7XG5cblxuICAgIC8vUmVzZXQgY291bnRlclxuICAgIGF1dGhDdHJsLnJlc2V0Q291bnRlciA9IGZ1bmN0aW9uKCl7XG4gICAgICBhdXRoQ3RybC5ub3RpZmljYXRpb24ucmVzZXRVbnJlYWQoYXV0aEN0cmwucHJvZmlsZS4kaWQpO1xuICAgIH1cblxuXG4gICAgLy9DaGFuZ2UgbGFuZ3VhZ2VcbiAgICBhdXRoQ3RybC50b2dnbGVMYW5nID0gZnVuY3Rpb24gKGxhbmdLZXkpIHtcbiAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xuICAgICAgLy8gU2V0dGluZyBhIGNvb2tpZVxuICAgICAgJGNvb2tpZXMucHV0KCd1c2VyTGFuZycsIGxhbmdLZXkpO1xuICAgICAgLy9JZiB1c2VyIHJlZ2lzdGVyZWQgLSB1cGRhdGUgdGhpcyBpbiB0aGVpciBwcmVmZXJlbmNlXG4gICAgICBpZihBdXRoLnJlZi5nZXRBdXRoKCkpe1xuICAgICAgICBhdXRoQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZSh7XCJsYW5nXCI6bGFuZ0tleX0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9DaGVja2sgdXNlciBzZWxlY3RlZCBsYW5ndWFnZVxuICAgIGlmKCFhdXRoQ3RybC5wcm9maWxlLmxhbmcpe1xuICAgICAgaWYoJGNvb2tpZXMuZ2V0KCd1c2VyTGFuZycpKXtcbiAgICAgICAgYXV0aEN0cmwudG9nZ2xlTGFuZygkY29va2llcy5nZXQoJ3VzZXJMYW5nJykpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGF1dGhDdHJsLnRvZ2dsZUxhbmcoJ0VuZycpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNle1xuICAgICAgYXV0aEN0cmwudG9nZ2xlTGFuZyhhdXRoQ3RybC5wcm9maWxlLmxhbmcpO1xuICAgIH1cblxuXG4gICAgLy9Mb2dpblxuICAgIGF1dGhDdHJsLmxvZ2luID0gZnVuY3Rpb24gKCl7XG4gICAgICBhdXRoQ3RybC5hdXRoLmF1dGguJGF1dGhXaXRoUGFzc3dvcmQoYXV0aEN0cmwudXNlcikudGhlbihmdW5jdGlvbiAoYXV0aCl7XG4gICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3Ipe1xuICAgICAgICBhdXRoQ3RybC5lcnJvciA9IGVycm9yO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vTG9nb3V0XG4gICAgYXV0aEN0cmwubG9nb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgIEF1dGguYXV0aC4kdW5hdXRoKCk7XG4gICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XG4gICAgfVxuXG4gICAgLy9SZWdpc3RlciB1c2VyXG4gICAgYXV0aEN0cmwucmVnaXN0ZXIgPSBmdW5jdGlvbiAoKXtcbiAgICAgIEF1dGguYXV0aC4kY3JlYXRlVXNlcihhdXRoQ3RybC51c2VyKS50aGVuKGZ1bmN0aW9uICh1c2VyKXtcbiAgICAgICAgYXV0aEN0cmwubG9naW4oKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcil7XG4gICAgICAgIGF1dGhDdHJsLmVycm9yID0gZXJyb3I7XG4gICAgICB9KTtcbiAgICB9O1xuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxyXG4gIC5mYWN0b3J5KCdBdXRoJywgZnVuY3Rpb24oJGZpcmViYXNlQXV0aCwgRmlyZWJhc2VVcmwpe1xyXG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCk7XHJcbiAgICB2YXIgYXV0aCA9ICRmaXJlYmFzZUF1dGgocmVmKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcImF1dGggc2VydmljZVwiKTtcclxuXHJcbiAgICB2YXIgQXV0aCA9IHtcclxuXHJcbiAgICAgIHJlZjpyZWYsXHJcbiAgICAgIGF1dGg6IGF1dGgsXHJcblxyXG4gICAgICBnZXRVaWQ6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgdWlkID0gcmVmLmdldEF1dGgoKTtcclxuICAgICAgICBpZih1aWQgIT0gbnVsbCApe1xyXG4gICAgICAgICAgcmV0dXJuIHJlZi5nZXRBdXRoKCkudWlkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNle1xyXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gQXV0aDtcclxuICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXHJcbiAgLmNvbnRyb2xsZXIoJ0NhdGVDdHJsJywgZnVuY3Rpb24oJHN0YXRlLCBDYXRlZ29yeSxjYXRlTmFtZSxjYXRlVG9waWNzKXtcclxuICAgIHZhciBjYXRlQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgLy9QYXJzZXJzXHJcbiAgICBjYXRlQ3RybC5jYXRlTmFtZSAgID0gY2F0ZU5hbWU7XHJcbiAgICBjYXRlQ3RybC5jYXRlZ29yeSAgID0gQ2F0ZWdvcnk7XHJcbiAgICBjYXRlQ3RybC5jYXRlVG9waWNzID0gY2F0ZVRvcGljcztcclxuXHJcblxyXG4gICAgY29uc29sZS5sb2coXCJDYXRlQ3RybFwiKTtcclxuICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXHJcbiAgLy9Ub3BpYyBsaXN0XHJcbiAgLmZhY3RvcnkoJ0NhdGVTZXJ2aWNlJywgZnVuY3Rpb24oJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSAsIEZpcmViYXNlVXJsKXtcclxuICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ2NhdGVnb3JpZXMnKTtcclxuICAgIHZhciBjYXRlZ29yaWVzID0gJGZpcmViYXNlT2JqZWN0KHJlZik7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJjYXRlZ29yeSBzZXJ2aWNlXCIpO1xyXG4gICAgXHJcbiAgICB2YXIgQ2F0ZSA9IHtcclxuXHJcbiAgICAgIG5hbWU6IGZ1bmN0aW9uKHRvcGljX3NsdWcpe1xyXG4gICAgICAgIHZhciBkYXRhID0gcmVmLm9yZGVyQnlDaGlsZChcInNsdWdcIikuZXF1YWxUbyh0b3BpY19zbHVnKTtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KGRhdGEpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZm9ydG9waWM6IGZ1bmN0aW9uKHRvcGljX3NsdWcpe1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QodXNlcnNSZWYuY2hpbGQodWlkKSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBhZGRDaGlsZDogZnVuY3Rpb24oY2hpbGRuYW1lKXtcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKGNoaWxkbmFtZSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGZvbGxvd0xpc3Q6ZnVuY3Rpb24odWlkKXtcclxuICAgICAgICB2YXIgZGF0YSA9IHJlZi5vcmRlckJ5Q2hpbGQoXCJuZXdzL2ZvbGxvd2VyXCIpLmVxdWFsVG8odWlkKTtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZGF0YSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1bkZvbGxvdzpmdW5jdGlvbihzbHVnLHVpZCl7XHJcbiAgICAgICAgdmFyIHJlZiAgICA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnY2F0ZWdvcmllcy8nK3NsdWcrJy9mb2xsb3dlci8nK3VpZCk7XHJcbiAgICAgICAgcmVmLnJlbW92ZSgpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgdXNlckZvbGxvdzpmdW5jdGlvbihzbHVnLHVpZCl7XHJcbiAgICAgICAgdmFyIGZvbGxvdz1mYWxzZTtcclxuICAgICAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydjYXRlZ29yaWVzLycrc2x1ZysnL2ZvbGxvd2VyLycrdWlkKTtcclxuICAgICAgICByZWYub25jZShcInZhbHVlXCIsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XHJcbiAgICAgICAgICBmb2xsb3cgPSBzbmFwc2hvdC5leGlzdHMoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBmb2xsb3c7XHJcbiAgICAgIH0sXHJcbiAgICAgIGFycjogJGZpcmViYXNlQXJyYXkocmVmKSxcclxuICAgICAgYWxsOmNhdGVnb3JpZXNcclxuICAgIH1cclxuICAgIHJldHVybiBDYXRlO1xyXG4gIH0pXHJcblxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcclxuICAuY29udHJvbGxlcignRGFzaGJvYXJkQ3RybCcsIGZ1bmN0aW9uKEF1dGgsICRzdGF0ZSxDYXRlZ29yeSxDYXRlU2VydmljZSxUYWdzLFRvcGljc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XHJcbiAgICB2YXIgZGFzaGJvYXJkQ3RybCA9IHRoaXM7XHJcblxyXG4gICAgZGFzaGJvYXJkQ3RybC5hdXRoID0gQXV0aDtcclxuXHJcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGUgICAgICAgID0gQ2F0ZVNlcnZpY2U7XHJcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGVnb3JpZXMgID0gQ2F0ZWdvcnk7XHJcbiAgICBkYXNoYm9hcmRDdHJsLnRvcGljcyAgICAgID0gVG9waWNzO1xyXG4gICAgZGFzaGJvYXJkQ3RybC50b3BpY19ncmlkICA9IGZhbHNlO1xyXG4gICAgZGFzaGJvYXJkQ3RybC50YWdzICAgICAgICA9IFRhZ3MuYXJyO1xyXG5cclxuICAgIGRhc2hib2FyZEN0cmwudXNlckNhdGVGb2xsb3cgID0gW107XHJcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGVJc0ZvbGxvdyAgICA9IFtdO1xyXG4gICAgZGFzaGJvYXJkQ3RybC5mb2xsb3dMaXN0ICAgICAgPSAnJztcclxuICAgIGRhc2hib2FyZEN0cmwudXNlckZlZWQgPSdudWxsJztcclxuXHJcbiAgICBkYXNoYm9hcmRDdHJsLmxhdGVzdEZlZWQgPSBkYXNoYm9hcmRDdHJsLnRvcGljcy5sYXRlc3RGZWVkKCk7XHJcblxyXG4gICAgZGFzaGJvYXJkQ3RybC5mb2xsb3dDYXRlID0gZnVuY3Rpb24oY2F0ZV9zbHVnKXtcclxuICAgICAgZGFzaGJvYXJkQ3RybC5jYXRlLmFkZENoaWxkKGNhdGVfc2x1ZysnL2ZvbGxvd2VyJylcclxuICAgICAgICAuY2hpbGQoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIkRhc2hib2FyZEN0cmxcIik7XHJcbiAgfSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuXG4gIC5kaXJlY3RpdmUoJ21haW5IZWFkZXInLGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAgICAgJ0UnLFxuICAgICAgdHJhbnNjbHVkZTogICB0cnVlLFxuICAgICAgLy9jb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcbiAgICB9XG5cbiAgfSlcblxuICAvL0JhZGdlIG5vdGlmaWNhdGlvblxuICAuZGlyZWN0aXZlKCdiYWRnZU5vdGlmaWNhdGlvbicsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICAgICAnRScsXG4gICAgICB0cmFuc2NsdWRlOiAgIHRydWUsXG4gICAgICAvL2NvbnRyb2xsZXI6ICAgJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAgJ3RlbXBsYXRlcy9odG1sL2JhZGdlLW5vdGlmaWNhdGlvbi5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIG5vdGlmaWNhdGlvbjogJz0nXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG5cbiAgLy9MaXN0IG9mIGNhdGVnb3JpZXMgb24gdGhlIHNpZGVyYmFyXG4gIC5kaXJlY3RpdmUoJ3Jldmlld1Njb3JlJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvL2NvbnRyb2xsZXI6ICAgJ1RvcGljQ3RybCBhcyB0b3BpY0N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICAndGVtcGxhdGVzL2h0bWwvcmV2aWV3LXN1bW1hcnktbGlzdC5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHJldmlldzogJz0nXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG5cbiAgLy9Gb2xsb3cgQnV0dG9uXG4gIC5kaXJlY3RpdmUoJ3VzZXJGb2xsb3dlckJ0bicsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICAgICAnRScsXG4gICAgICB0cmFuc2NsdWRlOiAgIHRydWUsXG4gICAgICAvL2NvbnRyb2xsZXI6ICAgJ1RvcGljQ3RybCBhcyB0b3BpY0N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICAndGVtcGxhdGVzL2h0bWwvZm9sbG93LXVzZXIuaHRtbCcsXG4gICAgICBzY29wZToge1xuICAgICAgICBmb2xsb3c6ICc9J1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuXG4gIC8vQ2F0ZWdvcnkgZm9sbG93IGJ1dHRvblxuICAuZGlyZWN0aXZlKCdjYXRlRm9sbG93QnRuJyxmdW5jdGlvbigpe1xuICAgIHJldHVybiB7XG4gICAgICAvL2NvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9jYXRlZ29yeS1mb2xsb3ctYnRuLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY2F0ZTogJz0nXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC8vTGlzdCBvZiBjYXRlZ29yaWVzIG9uIHRoZSBzaWRlcmJhclxuICAuZGlyZWN0aXZlKCd0b3BpY0dyaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwgYXMgZGFzaGJvYXJkQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL2NhdGVnb3J5LWdyaWQuaHRtbCdcbiAgICB9XG4gIH0pXG5cbiAgLy9HcmlkIFRhZ3MgZm9yIHNpZGViYXJcbiAgLmRpcmVjdGl2ZSgndGFnR3JpZCcsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy9jb250cm9sbGVyOiAnRGFzaGJvYXJkQ3RybCBhcyBkYXNoYm9hcmRDdHJsJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2h0bWwvdGFnLWdyaWQuaHRtbCdcbiAgICB9XG4gIH0pXG5cblxuICAuZGlyZWN0aXZlKCd0b3BpY0NyZWF0ZScsIGZ1bmN0aW9uKCl7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLy9jb250cm9sbGVyOiAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL3RvcGljLWNyZWF0ZS5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHRvcGljOiAnPSdcbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcblxuXG4gIC5kaXJlY3RpdmUoJ3RvcGljTGlzdCcsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLy9jb250cm9sbGVyOiAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL3RvcGljLWxpc3QuaHRtbCcsXG4gICAgICBzY29wZToge1xuICAgICAgICB0b3BpY3M6ICc9J1xuICAgICAgfVxuICAgIH1cbiAgfSlcblxuXG4gIC5kaXJlY3RpdmUoJ3RvcGljQWN0aW9uc0NhcmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vY29udHJvbGxlcjogJ1RvcGljQ3RybCBhcyB0b3BpY0N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC90b3BpYy1hY3Rpb25zLWNhcmQuaHRtbCcsXG4gICAgICBzY29wZToge1xuICAgICAgICB0b3BpYzogJz0nXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG5cbiAgLy9mb3IgdGFncyAtIG1heCB0YWdzXG4gIC5kaXJlY3RpdmUoJ2VuZm9yY2VNYXhUYWdzJywgZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdDdHJsKSB7XG4gICAgICB2YXIgbWF4VGFncyA9IGF0dHJzLm1heFRhZ3MgPyBwYXJzZUludChhdHRycy5tYXhUYWdzLCAnNCcpIDogbnVsbDtcblxuICAgICAgbmdDdHJsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICYmIG1heFRhZ3MgJiYgdmFsdWUubGVuZ3RoID4gbWF4VGFncykge1xuICAgICAgICAgIHZhbHVlLnNwbGljZSh2YWx1ZS5sZW5ndGggLSAxLCAxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29uZmlnKFsnJHRyYW5zbGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCR0cmFuc2xhdGVQcm92aWRlcikge1xuICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ0VuZycsIHtcbiAgICAgICdLRVlfREFTSEJPQVJEJzogICdEYXNoYm9hcmQnLFxuICAgICAgJ0tFWV9MQU5HVUFHRVMnOiAgJ0xhbmd1YWdlcycsXG4gICAgICAnS0VZX0hPTUUnOiAgICAgICAnSG9tZScsXG4gICAgICAnS0VZX1JFR0lTVEVSJzogICAnUmVnaXN0ZXInLFxuICAgICAgJ0tFWV9MT0dJTic6ICAgICAgJ0xvZyBpbicsXG4gICAgICAnS0VZX0xPR09VVCc6ICAgICAnTG9nIG91dCcsXG4gICAgICAnS0VZX0ZPTExPVyc6ICAgICAnRm9sbG93JyxcbiAgICAgICdLRVlfRk9MTE9XRVInOiAgICdGb2xsb3dlcicsXG4gICAgICAnS0VZX1VORk9MTE9XJzogICAnVW5mb2xsb3cnLFxuICAgICAgJ0tFWV9GT0xMT1dJTkcnOiAgJ0ZvbGxvd2luZycsXG4gICAgICAnS0VZX1BPU1QnOiAgICAgICAnUG9zdCcsXG4gICAgICAnS0VZX1BPU1RFRCc6ICAgICAnUG9zdGVkJyxcbiAgICAgICdLRVlfVVBWT1RFJzogICAgICdVcHZvdGUnLFxuICAgICAgJ0tFWV9VUFZPVEVEJzogICAgJ1Vwdm90ZWQnLFxuICAgICAgJ0tFWV9EV05fVk9URSc6ICAgJ0Rvd252b3RlJyxcbiAgICAgICdLRVlfRFdOX1ZPVEVEJzogICdEb3dudm90ZWQnLFxuICAgICAgJ0tFWV9WSUVXJzogICAgICAgJ1ZpZXcnLFxuICAgICAgJ0tFWV9SRU1PVkUnOiAgICAgJ1JlbW92ZScsXG4gICAgICAnS0VZX0NBTkNFTCc6ICAgICAnQ2FuY2VsJyxcbiAgICAgICdLRVlfUVVFU1RJT04nOiAgICdRdWVzdGlvbicsXG4gICAgICAnS0VZX1RPUElDJzogICAgICAnVG9waWMnLFxuICAgICAgJ0tFWV9DSEdfUFdEJzogICAgJ0NoYW5nZSBQYXNzd29yZCcsXG4gICAgICAnS0VZX1BBU1NXT1JEJzogICAnUGFzc3dvcmQnLFxuICAgICAgJ0tFWV9PTERfUFdEJzogICAgJ09sZCBQYXNzd29yZCcsXG4gICAgICAnS0VZX05FV19QV0QnOiAgICAnTmV3IFBhc3N3b3JkJyxcbiAgICAgICdLRVlfTkVXX1BXRF9DJzogICdOZXcgcGFzc3dvcmQgY29uZmlybWF0aW9uJyxcbiAgICAgICdLRVlfU0FWRSc6ICAgICAgICdTYXZlJyxcbiAgICAgICdLRVlfU0FWRV9EUkFGVCc6ICdTYXZlIGFzIGRyYWZ0JyxcbiAgICAgICdLRVlfVEFHUyc6ICAgICAgICdUYWdzJyxcbiAgICAgICdLRVlfRVhQTE9SRSc6ICAgICdFeHBsb3JlJyxcbiAgICAgICdLRVlfRkVBVF9DQVQnOiAgICAnRmVhdHVyZXMgY2F0ZWdvcmllcycsXG4gICAgICAnS0VZX0NPTU1FTlRTJzogICAnQ29tbWVudHMnLFxuICAgICAgJ0tFWV9SRVBMWSc6ICAgICAgJ1JlcGx5JyxcbiAgICAgICdLRVlfUkVWSUVXJzogICAgICdSZXZpZXcnLFxuICAgICAgJ0tFWV9FRElUJzogICAgICAgJ0VkaXQnLFxuICAgICAgJ0tFWV9UUkVORCc6ICAgICAgJ1RyZW5kJyxcbiAgICAgICdLRVlfVFJFTkRJTkcnOiAgICdUcmVuZGluZycsXG4gICAgICAnS0VZX1dSSVRFX1JFUExZJzonV3JpdGUgYSByZXBseScsXG4gICAgICAnS0VZX0xBVEVTVF9GRUVEJzonTGF0ZXN0IEZlZWQnLFxuXG4gICAgICAvL1JlbW92ZSB0b3BpY1xuICAgICAgJ0tFWV9DT05GX1JFTU9WRSc6J0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmU/JyxcbiAgICAgICdLRVlfQ09ORl9SRU1fQyc6ICdPbmNlIHJlbW92ZSwgeW91IHdpbGwgbm90IGJlIGFibGV0byB0byBnZXQgdGhpcyB0b3BpYyBiYWNrJyxcblxuXG4gICAgICAvL1NFTlRFTkNFXG4gICAgICAnS0VZX1dIQVRfT05fVVJfTUlORCc6ICAnV2hhdFxcJ3Mgb24geW91ciBtaW5kPycsXG4gICAgICAnS0VZX1lPVV9XQU5UX0ZPTExPVyc6ICAnWW91IG1heSB3YW50IHRvIGZvbGxvdycsXG4gICAgICAnS0VZX05PX0FDQ1RfUkVHSVNURVInOiAnRG9uXFwndCBoYXZlIGFjY291bnQ/IFJlZ2lzdGVyJyxcbiAgICAgICdLRVlfQ0FOVF9DSE5HX1VTRVInOiAgICdEb25cXCd0IGhhdmUgYWNjb3VudD8gUmVnaXN0ZXInLFxuICAgICAgJ0tFWV9ZT1VSX0FDQ09VTlQnOiAgICAgJ1lvdXIgYWNjb3VudCcsXG4gICAgICAnS0VZX05PVEhJTkdfSEVSRSc6ICAgICAnTm90aGluZyBoZXJlLCB5ZXQnLFxuICAgICAgJ0tFWV9XSE9fVE9fRk9MTE9XJzogICAgJ1dobyB0byBmb2xsb3cnLFxuICAgICAgJ0tFWV9DQVRfV0lMTF9BUFBFQVInOiAgJ0ZvbGxvdyBzb21lIGNhdGVnb3JpZXMgYW5kIGl0IHdpbGwgYXBwZWFyIGhlcmUnLFxuICAgICAgJ0tFWV9XSFRfVVJfU1RPUlknOiAgICAgJ1doYXRcXCdzIHlvdXIgc3RvcnknLFxuICAgICAgJ0tFWV9XUlRfQ09NTUVOVCc6ICAgICAgJ1dyaXRlIGEgY29tbWVudCcsXG5cblxuXG4gICAgICAvL1VTRVIgSU5QVVRcbiAgICAgICdLRVlfRklSU1ROQU1FJzogICdGaXJzdCBuYW1lJyxcbiAgICAgICdLRVlfTEFTVE5BTUUnOiAgICdMYXN0IG5hbWUnLFxuICAgICAgJ0tFWV9CSVJUSERBWSc6ICAgJ0JpcnRoZGF5JyxcbiAgICAgICdLRVlfTU9OVEgnOiAgICAgICdNb250aCcsXG4gICAgICAnS0VZX0RBWSc6ICAgICAgICAnRGF5JyxcbiAgICAgICdLRVlfRU1BSUwnOiAgICAgICdFbWFpbCcsXG4gICAgICAnS0VZX0NPTkZfRU1BSUwnOiAnQ29uZmlybSBFbWFpbCcsXG4gICAgICAnS0VZX0dFTkRFUic6ICAgICAnR2VuZGVyJyxcbiAgICAgICdLRVlfTUFMRSc6ICAgICAgICdNYWxlJyxcbiAgICAgICdLRVlfRkVNQUxFJzogICAgICdGZW1hbGUnLFxuICAgICAgJ0tFWV9VU0VSTkFNRSc6ICAgJ1VzZXJuYW1lJyxcbiAgICAgICdLRVlfTE9DQVRJT04nOiAgICdMb2NhdGlvbicsXG5cbiAgICAgIC8vVXNlciBFZGl0XG4gICAgICAnS0VZX0VEX1BST0ZJTEUnOiAnRWRpdCBQcm9maWxlJyxcbiAgICAgICdLRVlfRURfQ0hHX1BXRCc6ICdDaGFuZ2UgUGFzc3dvcmQnLFxuICAgICAgJ0tFWV9FRF9QUk9GSUxFJzogJ0VkaXQgUHJvZmlsZScsXG4gICAgICAnS0VZX0VEX1NJVEUnOiAgICAnV2Vic2l0ZScsXG4gICAgICAnS0VZX0VEX1BIT05FJzogICAnUGhvbmUnLFxuICAgICAgJ0tFWV9FRF9CSU8nOiAgICAgJ0Jpb2dyYXBoeScsXG5cbiAgICB9KTtcblxuICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ+C5hOC4l+C4oicsIHtcbiAgICAgICdLRVlfREFTSEJPQVJEJzogICfguKvguYnguK3guIfguJfguLHguYnguIfguKvguKHguJQnLFxuICAgICAgJ0tFWV9MQU5HVUFHRVMnOiAgJ+C4oOC4suC4qeC4sicsXG4gICAgICAnS0VZX0hPTUUnOiAgICAgICAn4Lir4LiZ4LmJ4Liy4LmB4Lij4LiBJyxcbiAgICAgICdLRVlfUkVHSVNURVInOiAgICfguKrguKHguLHguITguKPguYPguIrguYknLFxuICAgICAgJ0tFWV9MT0dJTic6ICAgICAgJ+C5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4micsXG4gICAgICAnS0VZX0ZPTExPVyc6ICAgICAn4LiV4Li04LiU4LiV4Liy4LihJyxcbiAgICAgICdLRVlfUE9TVCc6ICAgICAgICfguYLguJ7guKrguJXguYwnXG4gICAgfSk7XG5cbiAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoJ2VuJyk7XG4gIH1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdOb3RpQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSxDYXRlZ29yeSxUb3BpY3MsTm90aVNlcnZpY2Upe1xuICAgIHZhciBub3RpQ3RybCA9IHRoaXM7XG5cblxuICAgIG5vdGlDdHJsLnRvcGljcyA9IFRvcGljcztcbiAgICBub3RpQ3RybC5mZWVkICAgPSBmZWVkO1xuICAgIG5vdGlDdHJsLm5vdGlTZXJ2aWNlID0gTm90aVNlcnZpY2U7XG5cbiAgICBub3RpQ3RybC5ub3RpZnlUbyA9ZnVuY3Rpb24odWlkKXtcbiAgICAgIHJldHVybiBub3RpQ3RybC5hcnIucHVzaCh1aWQpLiRhZGQodWlkKVxuICAgIH1cbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcblxuICAuZmFjdG9yeSgnTm90aVNlcnZpY2UnLCBmdW5jdGlvbigkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5ICwgRmlyZWJhc2VVcmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJzLCRub3RpZmljYXRpb24sJHEpe1xuICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ25vdGlmaWNhdGlvbicpO1xuICAgIHZhciBub3RpID0gJGZpcmViYXNlT2JqZWN0KHJlZik7XG4gICAgdmFyIHVzZXJzID0gVXNlcnM7XG5cbiAgICBjb25zb2xlLmxvZygnbm90aSBzZXJ2aWNlJyk7XG5cbiAgICB2YXIgTm90aWZpY2F0aW9uID0ge1xuXG4gICAgICAvL0Rpc3BsYXkgdW5yZWFkXG4gICAgICB1bnJlYWROb3RpZmljYXRpb246ZnVuY3Rpb24odWlkKXtcbiAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnbm90aWZpY2F0aW9uLycrdWlkKycvdW5yZWFkJyk7XG4gICAgICAgIHZhciBjb3VudGVyO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgIHJlZi5vbmNlKFwidmFsdWVcIixmdW5jdGlvbihzbmFwc2hvdCl7XG4gICAgICAgICAgY291bnRlciA9IHNuYXBzaG90LnZhbCgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHNuYXBzaG90LnZhbCgpKTtcblxuICAgICAgICAgIGlmKGNvdW50ZXIgPiAwKXtcbiAgICAgICAgICAgICRub3RpZmljYXRpb24oJ05ldyBtZXNzYWdlIGZyb20gUWFueWEnLCB7XG4gICAgICAgICAgICAgIGJvZHk6ICdZb3UgaGF2ZSAnK2NvdW50ZXIgKycgdW5yZWFkIG1lc3NhZ2VzJyxcbiAgICAgICAgICAgICAgZGlyOiAnYXV0bycsXG4gICAgICAgICAgICAgIGxhbmc6ICdlbicsXG4gICAgICAgICAgICAgIHRhZzogJ215LXRhZycsXG4gICAgICAgICAgICAgIGljb246ICdodHRwOi8vd3d3LmNsLmNhbS5hYy51ay9yZXNlYXJjaC9zcmcvbmV0b3MvaW1hZ2VzL3FzZW5zZS1sb2dvLnBuZycsXG4gICAgICAgICAgICAgIC8vZGVsYXk6IDEwMDAsIC8vIGluIG1zXG4gICAgICAgICAgICAgIGZvY3VzV2luZG93T25DbGljazogdHJ1ZSAvLyBmb2N1cyB0aGUgd2luZG93IG9uIGNsaWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoY291bnRlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICB9LFxuXG5cbiAgICAgIC8vTm90aWZ5IGZvbGxvd2Vyc1xuICAgICAgbm90aWZ5Rm9sbG93ZXI6ZnVuY3Rpb24odG9waWNJZCx1aWQpe1xuICAgICAgICB2YXIgcmVmID0gdXNlcnMuZ2V0Rm9sbG93ZXIodWlkKTtcbiAgICAgICAgcmVmLm9uY2UoXCJ2YWx1ZVwiLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuICAgICAgICAgIHNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oY2hpbGRTbmFwc2hvdCkge1xuICAgICAgICAgICAgLy91cGRhdGUgbm90aWZpY2F0aW9uIGFuZCBkZXRhaWxzXG4gICAgICAgICAgICBOb3RpZmljYXRpb24udXBkYXRlTm90aWZpY2F0aW9uQ291bnQodG9waWNJZCxjaGlsZFNuYXBzaG90LmtleSgpKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSxcblxuICAgICAgcmVwbHlTdGF0dXM6ZnVuY3Rpb24odWlkKXtcbiAgICAgICAgJG5vdGlmaWNhdGlvbignTmV3IG1lc3NhZ2UgZnJvbSBRYW55YScsIHtcbiAgICAgICAgICBib2R5OiAnWW91IGhhdmUgbmV3IG1lc3NhZ2UnLFxuICAgICAgICAgIGRpcjogJ2F1dG8nLFxuICAgICAgICAgIGxhbmc6ICdlbicsXG4gICAgICAgICAgdGFnOiAnbXktdGFnJyxcbiAgICAgICAgICBpY29uOiAnaHR0cDovL3d3dy5jbC5jYW0uYWMudWsvcmVzZWFyY2gvc3JnL25ldG9zL2ltYWdlcy9xc2Vuc2UtbG9nby5wbmcnLFxuICAgICAgICAgIC8vZGVsYXk6IDEwMDAsIC8vIGluIG1zXG4gICAgICAgICAgZm9jdXNXaW5kb3dPbkNsaWNrOiB0cnVlIC8vIGZvY3VzIHRoZSB3aW5kb3cgb24gY2xpY2tcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB1aWQ7XG4gICAgICB9LFxuXG4gICAgICAvL0FkZCBkZXRhaWwgZm9yIHRoaXMgbm90aWZpY3RpYW9uXG4gICAgICBub3RpZnlMb2c6ZnVuY3Rpb24odG9waWNJZCx1aWQsZnJvbV91aWQpe1xuICAgICAgICBjb25zb2xlLmxvZyhcInVpZCBcIit1aWQpO1xuICAgICAgICBjb25zb2xlLmxvZyhcImZyb20gdWlkIFwiKyBmcm9tX3VpZCk7XG4gICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ25vdGlmaWNhdGlvbi8nK3VpZCk7XG4gICAgICAgIHJlZi5wdXNoKCkuc2V0KHtcbiAgICAgICAgICB0b3BpY0lkOiAgICB0b3BpY0lkLFxuICAgICAgICAgIGZyb206ICAgICAgIGZyb21fdWlkLFxuICAgICAgICAgIGlzX3JlYWQ6ICAgIGZhbHNlLFxuICAgICAgICAgIHRpbWVzdGFtcDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSlcblxuICAgICAgICBOb3RpZmljYXRpb24ucmVwbHlTdGF0dXModWlkKTtcblxuXG4gICAgICB9LFxuXG5cbiAgICAgIC8vUmVzZXQgdW5yZWFkIGNvdW50ZXJcbiAgICAgIHJlc2V0VW5yZWFkOmZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ25vdGlmaWNhdGlvbi8nK3VpZCsnL3VucmVhZCcpO1xuICAgICAgICByZWYuc2V0KDApO1xuICAgICAgfSxcblxuXG4gICAgICAvL1VwZGF0ZSBub3RpZmljYXRpb25cbiAgICAgIC8vQHBhcmFtcyB1aWQgLSB3aG8gdGhpcyBub3RpZmljYXRpb24gaXMgZ29pbmcgdG9cbiAgICAgIHVwZGF0ZU5vdGlmaWNhdGlvbkNvdW50OmZ1bmN0aW9uKHRvcGljSWQsdWlkLGZyb21fdWlkKXtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydub3RpZmljYXRpb24vJyt1aWQrJy91bnJlYWQnKTtcbiAgICAgICAgcmVmLm9uY2UoXCJ2YWx1ZVwiLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuICAgICAgICAgIC8vZGVmYXVsdCB1bnJlYWQgaXMgMVxuICAgICAgICAgaWYoc25hcHNob3QudmFsKCkgPT0gJ251bGwnKXtcbiAgICAgICAgICAgIHJlZi5zZXQoMSlcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJlZi5zZXQoc25hcHNob3QudmFsKCkgKyAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvck9iamVjdCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL0FkZCB0byBsb2dcbiAgICAgICAgTm90aWZpY2F0aW9uLm5vdGlmeUxvZyh0b3BpY0lkLHVpZCxmcm9tX3VpZCk7XG5cblxuXG4gICAgICB9LFxuXG5cbiAgICAgIGFkZENoaWxkOmZ1bmN0aW9uKGNoaWxkKXtcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZCk7XG4gICAgICB9LFxuXG4gICAgICBhZGRBcnJDaGlsZDpmdW5jdGlvbihjaGlsZCl7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKGNoaWxkKSk7XG4gICAgICB9LFxuXG4gICAgICBhcnI6ICRmaXJlYmFzZUFycmF5KHJlZiksXG4gICAgICBhbGw6IG5vdGlcbiAgICB9XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcblxuXG4gICAgZnVuY3Rpb24gbm90aWZpY2F0aW9uQWxlcnQodWlkLGhlYWQsYm9keSl7XG4gICAgICB2YXIgbm90aWZpY2F0aW9uX3JlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnbm90aWZpY2F0aW9uLycrdWlkKTtcbiAgICAgIG5vdGlmaWNhdGlvbl9yZWYub25jZShcImNoaWxkX2FkZGVkXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgJG5vdGlmaWNhdGlvbihoZWFkLCB7XG4gICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICBkaXI6ICdhdXRvJyxcbiAgICAgICAgICBsYW5nOiAnZW4nLFxuICAgICAgICAgIHRhZzogJ215LXRhZycsXG4gICAgICAgICAgaWNvbjogJ2h0dHA6Ly93d3cuY2wuY2FtLmFjLnVrL3Jlc2VhcmNoL3NyZy9uZXRvcy9pbWFnZXMvcXNlbnNlLWxvZ28ucG5nJyxcbiAgICAgICAgICAvL2RlbGF5OiAxMDAwLCAvLyBpbiBtc1xuICAgICAgICAgIGZvY3VzV2luZG93T25DbGljazogdHJ1ZSAvLyBmb2N1cyB0aGUgd2luZG93IG9uIGNsaWNrXG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29udHJvbGxlcignUGxhY2VzQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwkc2NvcGUsJHJvb3RTY29wZSwgJG1kRGlhbG9nLCAkbWRNZWRpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NlcnZpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFncywgVG9waWNzLCBBdXRoLCBVc2VycywgU2x1ZyxMYW5ndWFnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VMYW5kaW5nKSB7XG5cbiAgICB2YXIgcGxhY2VzQ3RybCA9IHRoaXM7XG4gICAgY29uc29sZS5sb2cocGxhY2VMYW5kaW5nKTtcbiAgICBwbGFjZXNDdHJsLnBsYWNlTGFuZGluZyA9IHBsYWNlTGFuZGluZztcblxuICB9KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5mYWN0b3J5KCdQbGFjZXMnLCBmdW5jdGlvbigkZmlyZWJhc2VBcnJheSwgRmlyZWJhc2VVcmwpe1xuXG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsncGxhY2VzJyk7XG4gICAgdmFyIHBsYWNlRGV0YWlsX3JlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsncGxhY2VzX2RldGFpbHMnKTtcblxuICAgIHZhciBwbGFjZXMgPSAkZmlyZWJhc2VBcnJheShyZWYpO1xuXG4gICAgdmFyIFBsYWNlcyA9IHtcbiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihjaGlsZG5hbWUpe1xuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKGNoaWxkbmFtZSlcbiAgICAgIH0sXG5cbiAgICAgIGFkZFBsYWNlRGV0YWlsQ2hpbGQ6IGZ1bmN0aW9uKGNoaWxkbmFtZSl7XG4gICAgICAgIHJldHVybiBwbGFjZURldGFpbF9yZWYuY2hpbGQoY2hpbGRuYW1lKVxuICAgICAgfSxcblxuICAgICAgZ2V0UGxhY2VSZWY6ZnVuY3Rpb24ocGxhY2VfaWQpe1xuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHBsYWNlX2lkKycvaW5mbycpO1xuICAgICAgfSxcbiAgICAgIGFycjogcGxhY2VzXG4gICAgfVxuICAgIHJldHVybiBQbGFjZXM7XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcclxuICAvL0NhdGVnb3J5IGxpc3RcclxuICAuZmFjdG9yeSgnQ2F0ZWdvcnknLCBmdW5jdGlvbigkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCl7XHJcbiAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydjYXRlZ29yaWVzJyk7XHJcbiAgICB2YXIgY2F0ZWdvcmllcyA9ICRmaXJlYmFzZU9iamVjdChyZWYpO1xyXG4gICAgdmFyIHRvcGljQXJyID0gJGZpcmViYXNlQXJyYXkocmVmKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcIlV0aWwgY2F0ZWdvcnkgU2VydmljZVwiKTtcclxuXHJcbiAgICB2YXIgQ2F0ZWdvcnkgPSB7XHJcbiAgICAgIGdldE5hbWU6IGZ1bmN0aW9uKHNsdWcpe1xyXG4gICAgICAgIHZhciBkYXRhID0gcmVmLmNoaWxkKHNsdWcpO1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBhbGw6IGNhdGVnb3JpZXNcclxuICAgIH1cclxuICAgIHJldHVybiBDYXRlZ29yeTtcclxuICB9KVxyXG5cclxuXHJcbiAgLy9MYW5ndWFnZXNcclxuICAuZmFjdG9yeSgnTGFuZ3VhZ2VzJywgZnVuY3Rpb24oJGZpcmViYXNlQXJyYXksIEZpcmViYXNlVXJsKXtcclxuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ2xhbmd1YWdlcycpO1xyXG4gICAgdmFyIGxhbmcgPSAkZmlyZWJhc2VBcnJheShyZWYpO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKFwiVXRpbCBsYW5ndWFnZVwiKTtcclxuXHJcbiAgICByZXR1cm4gbGFuZztcclxuICB9KVxyXG5cclxuXHJcbiAgLy9MYW5ndWFnZXNcclxuICAuZmFjdG9yeSgnQXJjaGl2ZScsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCl7XHJcbiAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydhcmNoaXZlJyk7XHJcbiAgICB2YXIgYXJjaGl2ZSA9ICRmaXJlYmFzZUFycmF5KHJlZik7XHJcblxyXG4gICAgY29uc29sZS5sb2coXCJVdGlsIGxhbmd1YWdlXCIpO1xyXG5cclxuICAgIHZhciBBcmNoaXZlID17XHJcbiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihzbHVnKXtcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHNsdWcpO1xyXG4gICAgICB9LFxyXG4gICAgICByZWY6IHJlZixcclxuICAgICAgYXJyOiBhcmNoaXZlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gQXJjaGl2ZTtcclxuICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdUYWdDdHJsJywgZnVuY3Rpb24oQXV0aCwgVXNlcnMsICRzdGF0ZSwkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVzb2x2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0xhbmRpbmcsdGFnTmFtZSkge1xuXG4gICAgdmFyIHRhZ0N0cmwgPSB0aGlzO1xuICAgIHRhZ0N0cmwudGFnTGFuZGluZyAgPSB0YWdMYW5kaW5nO1xuICAgIHRhZ0N0cmwudGFnTmFtZSAgICAgPSB0YWdOYW1lO1xuXG4gIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXHJcbiAgLmZhY3RvcnkoJ1RhZ3MnLCBmdW5jdGlvbigkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCBGaXJlYmFzZVVybCwgJHEpe1xyXG5cclxuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ3RhZ3MnKTtcclxuICAgIHZhciB0YWdzID0gJGZpcmViYXNlQXJyYXkocmVmKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhcInRhZyBzZXJ2aWNlXCIpO1xyXG5cclxuICAgIHZhciBUYWdzID0ge1xyXG5cclxuICAgICAgYWRkQ2hpbGQ6IGZ1bmN0aW9uKGNoaWxkbmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZG5hbWUpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB0YWdzVXJsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRUYWdSZWY6ZnVuY3Rpb24odGFnKXtcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHRhZyk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRUYWdPYmplY3Q6ZnVuY3Rpb24odGFnKXtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0YWcpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdG9waWNUYWdzOmZ1bmN0aW9uKHRhZyl7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIGZiID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKTtcclxuICAgICAgICB2YXIgZGF0YVJldCA9ICcnO1xyXG5cclxuICAgICAgICByZXR1cm4gZmIuY2hpbGQoJ3RhZ3MvJyt0YWcpXHJcbiAgICAgICAgICAub24oJ2NoaWxkX2FkZGVkJywgZnVuY3Rpb24odGFnU25hcCl7XHJcbiAgICAgICAgICAgIGZiLmNoaWxkKCd0b3BpY3MnKVxyXG4gICAgICAgICAgICAgIC5vcmRlckJ5Q2hpbGQoXCJ0YWdzXCIpXHJcbiAgICAgICAgICAgICAgLmVxdWFsVG8odGFnKVxyXG4gICAgICAgICAgICAgIC5vbignY2hpbGRfYWRkZWQnLCBmdW5jdGlvbih0b3BpY1NuYXApIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIC8vc2hvdyggZXh0ZW5kKHt9LCB0YWdTbmFwLnZhbCgpLCB0b3BpY1NuYXAudmFsKCkpICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCB0YWdTbmFwLnZhbCgpLCB0b3BpY1NuYXAudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhUmV0KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGFycjogdGFnc1xyXG5cclxuICAgIH1cclxuICAgIHJldHVybiBUYWdzO1xyXG4gIH0pXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29udHJvbGxlcignVG9waWNMYW5kaW5nQ3RybCcsIGZ1bmN0aW9uICgkc3RhdGUsICRzY29wZSwgU2x1ZywgVG9waWNzLCBBdXRoLCBVc2VycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9SZXNvbHZlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzT3duZXIsdG9waWNMYW5kaW5nLCByZXBseUxpc3QsIHZpZXdEYXRhLCBmb2xsb3dlcnMpIHtcblxuICAgIGNvbnNvbGUubG9nKFwidG9waWNMYW5kaW5nQ3RybFwiKTtcblxuICAgIHZhciB0b3BpY0xhbmRpbmdDdHJsID0gdGhpc1xuXG5cbiAgICB0b3BpY0xhbmRpbmdDdHJsLmF1dGggICAgICAgICA9IEF1dGg7XG4gICAgdG9waWNMYW5kaW5nQ3RybC51c2VycyAgICAgICAgPSBVc2VycztcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnRvcGljTGFuZGluZyA9IHRvcGljTGFuZGluZztcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnRvcGljcyAgICAgICA9IFRvcGljcztcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnJlcGx5TGlzdCAgICA9IHJlcGx5TGlzdDtcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnZpZXdzICAgICAgICA9IHZpZXdEYXRhO1xuICAgIHRvcGljTGFuZGluZ0N0cmwuZm9sbG93ZXJzICAgID0gZm9sbG93ZXJzO1xuICAgIHRvcGljTGFuZGluZ0N0cmwuaXNPd25lciAgICAgID0gaXNPd25lcjtcblxuXG4gICAgLy9HZXR0aW5nIFJlcGxpZXMgaW4gcmVwbGllc1xuICAgIHRvcGljTGFuZGluZ0N0cmwuaW5SZXBseUFyciA9IFtdO1xuICAgIC8qdG9waWNMYW5kaW5nQ3RybC5yZXBseUluUmVwbHkgPSBmdW5jdGlvbigpe1xuXG4gICAgICBmb3IodmFyIGk9MDsgaTx0b3BpY0xhbmRpbmdDdHJsLnJlcGx5TGlzdC5sZW5ndGg7aSsrKXtcbiAgICAgICAgdmFyIHRvcGljSWQgPSB0b3BpY0xhbmRpbmdDdHJsLnJlcGx5TGlzdFtpXS50b3BpY0lkO1xuICAgICAgICB2YXIgcmVwbHlJZCA9IHRvcGljTGFuZGluZ0N0cmwucmVwbHlMaXN0W2ldLiRpZDtcbiAgICAgICAgdG9waWNMYW5kaW5nQ3RybC5pblJlcGx5QXJyW2ldID0gdG9waWNMYW5kaW5nQ3RybC50b3BpY3MucmVwbHlJblJlcGx5KHRvcGljSWQscmVwbHlJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdG9waWNMYW5kaW5nQ3RybC5yZXBseUluUmVwbHkoKTsqL1xuICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC8vIFRvcGljIGxpc3RcbiAgLmZhY3RvcnkoJ1RvcGljcycsIGZ1bmN0aW9uICgkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCkge1xuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwgKyAndG9waWNzJylcbiAgICB2YXIgdG9waWNzID0gJGZpcmViYXNlT2JqZWN0KHJlZilcbiAgICB2YXIgdG9waWNzQXJyID0gJGZpcmViYXNlQXJyYXkocmVmKVxuICAgIHZhciB0b3BpY0tleSA9ICcnXG5cbiAgICBjb25zb2xlLmxvZyhcInRvcGljIHNlcnZpY2VcIik7XG5cbiAgICB2YXIgVG9waWNzID0ge1xuXG4gICAgICBnZXRUb3BpY1JlcGx5OmZ1bmN0aW9uKHRvcGljS2V5KSB7XG4gICAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCk7XG5cbiAgICAgICAgZmIuY2hpbGQoJ3RvcGljcy8nICsgdG9waWNLZXkgKyAnL3JlcGxpZXMnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uICh1c2VyU25hcCkge1xuICAgICAgICAgIHVzZXJTbmFwLmZvckVhY2goZnVuY3Rpb24gKGNoaWxkU25hcHNob3QpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBjaGlsZFNuYXBzaG90LmtleSgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgIGZiLmNoaWxkKCd0b3BpY3MvJyArIHRvcGljS2V5ICsgJy9yZXBsaWVzLycgKyBrZXkpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24gKGNoaWxkVmFsKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkVmFsLnZhbCgpLnVpZCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkVmFsKTtcbiAgICAgICAgICAgICAgZmIuY2hpbGQoJ3VzZXJzLycgKyBjaGlsZFZhbC52YWwoKS51aWQpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24gKG1lZGlhU25hcCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkVmFsLnZhbCgpKTtcbiAgICAgICAgICAgICAgICAvLyBleHRlbmQgZnVuY3Rpb246IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2thdG93dWxmLzY1OTgyMzhcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleHRlbmQoe30sIGNoaWxkVmFsLnZhbCgpLCBtZWRpYVNuYXAudmFsKCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZXh0ZW5kKHt9LCBjaGlsZFZhbC52YWwoKSwgbWVkaWFTbmFwLnZhbCgpKSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICAvLyBHZXQgdG9waWMgdGFnXG4gICAgICBnZXRUYWc6IGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5vcmRlckJ5Q2hpbGQoJ3RhZ3MnKS5lcXVhbFRvKHRhZykpXG4gICAgICB9LFxuXG4gICAgICAvLyBHZXQgdG9waWMgc2x1Z1xuICAgICAgZ2V0U2x1ZzogZnVuY3Rpb24gKHNsdWcpIHtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKCdzbHVnJykuZXF1YWxUbyhzbHVnKVxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZGF0YSlcbiAgICAgIH0sXG5cbiAgICAgIC8vIEdldHRpbmcgdGhlIGxpc3Qgb2YgdG9waWNzIGNyZWF0ZWQgYnkgdXNlcl9pZFxuICAgICAgY3JlYXRlZEJ5OiBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYub3JkZXJCeUNoaWxkKCd1aWQnKS5lcXVhbFRvKHVpZCkpXG5cbiAgICAgIH0sXG4gICAgICByZWZDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XG4gICAgICAgIHJldHVybiByZWYuY2hpbGQoY2hpbGQpXG4gICAgICB9LFxuICAgICAgY291bnRVc2VyVG9waWNzOiBmdW5jdGlvbiAoKSB7fSxcblxuICAgICAgLy8gR2V0dGluZyB0aGUgbGlzdCBvZiB0b3BpYyBiYXNlIG9uIGNhdGVnb3J5XG4gICAgICBsaXN0OiBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKCdjYXRlZ29yeScpLmVxdWFsVG8oY2F0ZWdvcnkpLmxpbWl0VG9MYXN0KDE1KTtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KGRhdGEpXG4gICAgICB9LFxuXG4gICAgICBuYW1lOiBmdW5jdGlvbiAodG9waWNfc2x1Zykge1xuICAgICAgICB2YXIgZGF0YSA9IHJlZi5vcmRlckJ5Q2hpbGQoJ3NsdWcnKS5lcXVhbFRvKHRvcGljX3NsdWcpXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSlcbiAgICAgIH0sXG5cbiAgICAgIC8vIFJldHVybiB0b3BpYyBkZXRhaWxzIGluIFJlZlxuICAgICAgZm9ydG9waWNSZWY6IGZ1bmN0aW9uICh0b3BpY19zbHVnKSB7XG4gICAgICAgIHJldHVybiByZWYub3JkZXJCeUNoaWxkKCdzbHVnJykuZXF1YWxUbyh0b3BpY19zbHVnKVxuICAgICAgfSxcblxuICAgICAgZ2V0VG9waWNCeUtleTogZnVuY3Rpb24gKHRvcGljX2tleSkge1xuICAgICAgICByZXR1cm4gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsICsgJ3RvcGljcy8nICsgdG9waWNfa2V5KVxuICAgICAgfSxcblxuICAgICAgZ2V0VG9waWNCeVNsdWc6IGZ1bmN0aW9uICh0b3BpY19zbHVnKSB7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYub3JkZXJCeUNoaWxkKCdzbHVnJykuZXF1YWxUbyh0b3BpY19zbHVnKS5saW1pdFRvRmlyc3QoMSkpXG4gICAgICB9LFxuXG4gICAgICBpbmNyZW1lbnRWaWV3OiBmdW5jdGlvbiAodG9waWNfc2x1Zykge30sXG5cbiAgICAgIC8vIFJldHVybiB0b3BpYyBkZXRhaWxzIGluIGFycmF5XG4gICAgICBmb3J0b3BpYzogZnVuY3Rpb24gKHRvcGljX3NsdWcpIHtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KFRvcGljcy5mb3J0b3BpY1JlZih0b3BpY19zbHVnKSlcbiAgICAgIH0sXG5cbiAgICAgIC8vIFJlcGx5IGxpc3RpbmdcbiAgICAgIHJlcGx5TGlzdDogZnVuY3Rpb24gKHRvcGljSWQpIHtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcycpXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShkYXRhKVxuICAgICAgfSxcblxuICAgICAgLy8gUmVwbHkgQXJyYXlcbiAgICAgIHJlcGx5QXJyOiBmdW5jdGlvbiAodG9waWNJZCkge1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL3JlcGxpZXMnKSlcbiAgICAgIH0sXG5cbiAgICAgIC8vIFJlcGx5IGNvdW50XG4gICAgICByZXBseUNvdW50OiBmdW5jdGlvbiAodG9waWNJZCkge1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzLycpKVxuICAgICAgfSxcbiAgICAgIHJlcGx5Q291bnRSZWY6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XG4gICAgICAgIHJldHVybiByZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcy9jb3VudCcpXG4gICAgICB9LFxuXG4gICAgICByZXBseUluUmVwbHk6IGZ1bmN0aW9uICh0b3BpY0lkLCByZXBseUlkKSB7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcy8nICsgcmVwbHlJZCArICcvaW5SZXBseScpKVxuICAgICAgfSxcblxuICAgICAgLy8gUmVwbHkgaW4gUmVwbHkgQXJyYXlcbiAgICAgIHJlcGx5SW5SZXBseUFycjogZnVuY3Rpb24gKHRvcGljSWQsIHJlcGx5SWQpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL3JlcGxpZXMvJytyZXBseUlkKycvaW5SZXBseScpKSlcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzLycgKyByZXBseUlkICsgJy9pblJlcGx5JykpXG4gICAgICB9LFxuXG4gICAgICAvLyB1cHZvdGVzXG4gICAgICBnZXRVcHZvdGVzOiBmdW5jdGlvbiAodG9waWNJZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlZjogcmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKSxcbiAgICAgICAgICBhcnJheTogJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKSlcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gZG93bnZvdGVzXG4gICAgICBnZXREb3dudm90ZXM6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVmOiByZWYuY2hpbGQodG9waWNJZCArICcvZG93bnZvdGVzJyksXG4gICAgICAgICAgYXJyYXk6ICRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9kb3dudm90ZXMnKSlcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8gZm9sbG93ZXJzXG4gICAgICBnZXRGb2xsb3dlcnM6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVmOiByZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJyksXG4gICAgICAgICAgb2JqOiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpKVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1cHZvdGVUb3BpYzogZnVuY3Rpb24gKHRvcGljSWQsIHVpZCkge1xuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvdXB2b3RlcycpLmNoaWxkKHVpZCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKS5jaGlsZCh1aWQpKVxuICAgICAgfSxcblxuICAgICAgdW5kb1Vwdm90ZTogZnVuY3Rpb24gKHRvcGljSWQsIHVpZCkge1xuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvdXB2b3RlcycpLmNoaWxkKHVpZCkucmVtb3ZlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCBzdWNjZXNzZnVsbHkhJylcbiAgICAgICAgICB9fSlcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0b3BpY0lkICsgJy91cHZvdGVzJylcbiAgICAgIH0sXG5cbiAgICAgIGRvd252b3RlVG9waWM6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcbiAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpLmNoaWxkKHVpZCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpLmNoaWxkKHVpZCkpXG4gICAgICB9LFxuXG4gICAgICB1bmRvRG93bnZvdGU6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcbiAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpLmNoaWxkKHVpZCkucmVtb3ZlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCBzdWNjZXNzZnVsbHkhJylcbiAgICAgICAgICB9fSlcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9kb3dudm90ZXMnKVxuICAgICAgfSxcblxuICAgICAgZm9sbG93OiBmdW5jdGlvbiAodG9waWNJZCwgdWlkKSB7XG4gICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnaGlzdG9yeScpLmNoaWxkKHVpZCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpXG4gICAgICAgICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2NvdW50JykpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEudmFsdWUgPT09IG51bGwgfHwgZGF0YS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2NvdW50Jykuc2V0KDEpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnY291bnQnKS5zZXQoZGF0YS4kdmFsdWUgKyAxKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKSlcbiAgICAgIH0sXG5cbiAgICAgIHVuZm9sbG93OiBmdW5jdGlvbiAodG9waWNJZCwgdWlkKSB7XG4gICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnaGlzdG9yeScpLmNoaWxkKHVpZCkucmVtb3ZlKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCBzdWNjZXNzZnVsbHkhJylcbiAgICAgICAgICAgICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2NvdW50JykpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnY291bnQnKS5zZXQoZGF0YS4kdmFsdWUgLSAxKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9fSlcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKVxuICAgICAgfSxcblxuICAgICAgZ2V0Vmlld3M6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcmVmOiByZWYuY2hpbGQodG9waWNJZCkuY2hpbGQoJ3ZpZXdzJyksXG4gICAgICAgICAgb2JqOiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQpLmNoaWxkKCd2aWV3cycpKVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBsYXRlc3RGZWVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYub3JkZXJCeUNoaWxkKCdjcmVhdGVkJykubGltaXRUb0xhc3QoMTApKVxuICAgICAgfSxcblxuICAgICAgdG9waWNzQnlUYWc6IGZ1bmN0aW9uICh0YWcpIHtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5vcmRlckJ5Q2hpbGQoJ3RhZ3MnKS5lcXVhbFRvKHRhZykpXG4gICAgICB9LFxuXG4gICAgICAvLyBSZXR1cm4gYXJyYXlcbiAgICAgIGFycjogJGZpcmViYXNlQXJyYXkocmVmKSxcblxuICAgICAgYWxsOiB0b3BpY3MsXG4gICAgICByZWY6IHJlZlxuICAgIH07XG5cbiAgICByZXR1cm4gVG9waWNzXG5cbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRmaWx0ZXIsIG1kNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXJ2aWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRoLFVzZXJzLFRvcGljcyxub3RpZnksQ2F0ZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVzb2x2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlLGlzT3duZXIsdXNlclBvc3RzKXtcblxuICAgIGNvbnNvbGUubG9nKFwiUHJvZmlsZUN0cmxcIik7XG5cbiAgICB2YXIgcHJvZmlsZUN0cmwgPSB0aGlzO1xuXG4gICAgLy9QYXJzZXJcbiAgICBwcm9maWxlQ3RybC5wcm9maWxlICAgPSBwcm9maWxlO1xuICAgIHByb2ZpbGVDdHJsLmF1dGggICAgICA9IEF1dGg7XG4gICAgcHJvZmlsZUN0cmwudXNlcnMgICAgID0gVXNlcnM7XG4gICAgcHJvZmlsZUN0cmwudG9waWNzICAgID0gVG9waWNzO1xuICAgIC8vcHJvZmlsZUN0cmwuZmFjZWJvb2sgID0gRmFjZWJvb2s7XG4gICAgcHJvZmlsZUN0cmwuaXNPd25lciAgID0gaXNPd25lcjtcbiAgICBwcm9maWxlQ3RybC5jYXRlICAgICAgPSBDYXRlU2VydmljZTtcbiAgICBwcm9maWxlQ3RybC4kc3RhdGUgICAgPSAkc3RhdGU7XG4gICAgcHJvZmlsZUN0cmwudXNlclBvc3RzID0gdXNlclBvc3RzO1xuXG4gICAgcHJvZmlsZUN0cmwudXNlckZlZWQgID0gJyc7XG4gICAgcHJvZmlsZUN0cmwuZmVlZCA9ICcnO1xuXG4gICAgcHJvZmlsZUN0cmwuZWRpdEluaXQgPSAndXNlckVkaXQnO1xuXG4gICAgcHJvZmlsZUN0cmwubmFtZUV4aXN0PSBmYWxzZTtcblxuXG4gICAgcHJvZmlsZUN0cmwuZ2V0VXNlclBvc3QgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgcHJvZmlsZUN0cmwuZmVlZCA9IHByb2ZpbGVDdHJsLnRvcGljcy5jcmVhdGVkQnkodWlkKTtcbiAgICB9XG5cblxuICAgIC8qTGluayBhY2NvdW50IHdpdGggZmFjZWJvb2sqL1xuICAgLyogcHJvZmlsZUN0cmwubGlua0ZhY2Vib29rID0gZnVuY3Rpb24oKXtcbiAgICAgIHByb2ZpbGVDdHJsLmZhY2Vib29rLmxvZ2luKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHByb2ZpbGVDdHJsLmZhY2Vib29rLmdldExvZ2luU3RhdHVzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9nZ2VkSW4gPSB0cnVlO1xuICAgICAgICAgICAgcHJvZmlsZUN0cmwuZmFjZWJvb2suYXBpKCcvbWUnLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCBsb2dnZWQgaW5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0qL1xuXG5cbiAgICAvL1RoZSBvcmlnaW5hbCB2YWx1ZSBmcm9tIHByb2ZpbGVcbiAgICBwcm9maWxlQ3RybC5vbGRQcm9maWxlVmFsdWUgPSBwcm9maWxlQ3RybC5wcm9maWxlO1xuXG5cbiAgICBwcm9maWxlQ3RybC51c2VyQ3JlYXRlZCA9IGZ1bmN0aW9uKHVpZCl7XG4gICAgICByZXR1cm4gcHJvZmlsZUN0cmwudG9waWNzLmNyZWF0ZWRCeSh1aWQpO1xuICAgIH1cblxuXG4gICAgLy9QcmVzZXQgUGFyYW1ldGVyc1xuICAgIHByb2ZpbGVDdHJsLmltYWdlU3RyaW5ncyAgICA9IFtdO1xuICAgIHByb2ZpbGVDdHJsLnVzZXJDYXRlRm9sbG93ICA9IFtdO1xuICAgIHByb2ZpbGVDdHJsLmNhdGVJc0ZvbGxvdyAgICA9IFtdO1xuICAgIHByb2ZpbGVDdHJsLmZvbGxvd0xpc3QgICAgICA9ICcnO1xuXG5cblxuXG5cbiAgICBwcm9maWxlQ3RybC5mb2xsb3dDYXRlTGlzdEFyciA9IGZ1bmN0aW9uKHVpZCl7XG4gICAgICBwcm9maWxlQ3RybC5mb2xsb3dMaXN0ID0gcHJvZmlsZUN0cmwuY2F0ZS5mb2xsb3dMaXN0KHVpZCk7XG4gICAgfVxuXG4gICAgaWYoQXV0aC5yZWYuZ2V0QXV0aCgpKXtcbiAgICAgIHByb2ZpbGVDdHJsLmZvbGxvd0NhdGVMaXN0QXJyKEF1dGgucmVmLmdldEF1dGgoKS51aWQpO1xuICAgIH1cblxuICAgIHByb2ZpbGVDdHJsLmZvbGxvd0NhdGUgPSBmdW5jdGlvbihpbmRleCxjYXRlX3NsdWcpe1xuICAgICAgcHJvZmlsZUN0cmwuY2F0ZUlzRm9sbG93W2luZGV4XSAgPSB0cnVlO1xuICAgICAgcHJvZmlsZUN0cmwuY2F0ZS5hZGRDaGlsZChjYXRlX3NsdWcrJy9mb2xsb3dlcicpXG4gICAgICAgIC5jaGlsZChBdXRoLnJlZi5nZXRBdXRoKCkudWlkKS5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuXG5cblxuXG4gICAgLy9VcGxvYWQgUHJvZmlsZSBpbWFnZVxuICAgIHByb2ZpbGVDdHJsLnVwbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlcykge1xuICAgICAgYW5ndWxhci5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbiAoZmxvd0ZpbGUsIGkpIHtcbiAgICAgICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciB1cmkgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgIHByb2ZpbGVDdHJsLmltYWdlU3RyaW5nc1tpXSA9IHVyaTtcbiAgICAgICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZSh7XCJwaG90b1wiOiB1cml9KVxuICAgICAgICAgIG5vdGlmeSh7bWVzc2FnZTonU2F2ZWQnLHBvc2l0aW9uOidjZW50ZXInLGR1cmF0aW9uOiAzMDAwIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmxvd0ZpbGUuZmlsZSk7XG4gICAgICB9KVxuICAgIH07XG5cblxuICAgIC8vU2F2ZSBwcm9maWxlIHdpdGggcHJvZmlsZUN0cmwucHJvZmlsZVxuICAgIC8vcGFyYW1zOiByZWRpcmVjdCwgaWYgZXhpc3QgdGhlbiByZWRpcmVjdCBhZnRlciBzYXZlXG4gICAgcHJvZmlsZUN0cmwuc2F2ZVByb2ZpbGUgPSBmdW5jdGlvbihyZWRpcmVjdCl7XG4gICAgICBwcm9maWxlQ3RybC5wcm9maWxlLnVwZGF0ZWQgPSBtb21lbnQoKS50b0lTT1N0cmluZygpO1xuXG5cbiAgICAgIGlmKHByb2ZpbGVDdHJsLmxvY2F0aW9uICE9PSBudWxsICkge1xuICAgICAgICBsb2NhdGlvbkRldGFpbCA9IHtcbiAgICAgICAgICBwbGFjZV9pZDogcHJvZmlsZUN0cmwubG9jYXRpb24uZGV0YWlscy5wbGFjZV9pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlQ3RybC5sb2NhdGlvbi5kZXRhaWxzLm5hbWUsXG4gICAgICAgICAgYWRkcmVzczogcHJvZmlsZUN0cmwubG9jYXRpb24uZGV0YWlscy5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBsYXQ6IHByb2ZpbGVDdHJsLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubGF0KCksXG4gICAgICAgICAgbG5nOiBwcm9maWxlQ3RybC5sb2NhdGlvbi5kZXRhaWxzLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpLFxuICAgICAgICB9XG5cbiAgICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS51c2VyTG9jYXRpb24gPSBsb2NhdGlvbkRldGFpbDtcbiAgICAgIH1cblxuICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIG5vdGlmeSh7bWVzc2FnZTonU2F2ZWQnLHBvc2l0aW9uOidjZW50ZXInLGR1cmF0aW9uOiAzMDAwIH0pO1xuICAgICAgICBpZihyZWRpcmVjdCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAkc3RhdGUuZ28ocmVkaXJlY3QpO1xuICAgICAgICB9XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBub3RpZnkoe21lc3NhZ2U6J0Vycm9yIHNhdmluZyBkYXRhJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLy9VcGRhdGUgbmFtZVxuICAgIHByb2ZpbGVDdHJsLnVwZGF0ZU5hbWUgPSBmdW5jdGlvbigpe1xuXG4gICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZShcbiAgICAgICAge1xuICAgICAgICAgIFwiZmlyc3RuYW1lXCI6ICBwcm9maWxlQ3RybC5wcm9maWxlLmZpcnN0bmFtZSxcbiAgICAgICAgICBcImxhc3RuYW1lXCI6ICAgcHJvZmlsZUN0cmwucHJvZmlsZS5sYXN0bmFtZSxcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQrJy9sb2cnKS5wdXNoKCkuc2V0KHtcbiAgICAgICAgYWN0aW9uOiAgIFwibmFtZV9jaGFuZ2VcIixcbiAgICAgICAgb2xkbmFtZTogIHByb2ZpbGVDdHJsLm9sZFByb2ZpbGVWYWx1ZS5maXJzdG5hbWUgKyBcIi1cIiArIHByb2ZpbGVDdHJsLm9sZFByb2ZpbGVWYWx1ZS5sYXN0bmFtZSxcbiAgICAgICAgY3JlYXRlZDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuXG4gICAgICBub3RpZnkoe21lc3NhZ2U6J1NhdmVkJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICB9XG5cblxuICAgIC8vVXBkYXRlIEJpb1xuICAgIHByb2ZpbGVDdHJsLnVwZGF0ZUJpbyA9IGZ1bmN0aW9uKCl7XG4gICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZSh7XCJiaW9ncmFwaHlcIjogcHJvZmlsZUN0cmwucHJvZmlsZS5iaW9ncmFwaHl9KVxuXG4gICAgICBub3RpZnkoe21lc3NhZ2U6J1NhdmVkJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICB9XG5cblxuICAgIHByb2ZpbGVDdHJsLnVwZGF0ZVByb2ZpbGUgPSBmdW5jdGlvbigpe1xuICAgICAgLy9wcm9maWxlQ3RybC5wcm9maWxlLmVtYWlsSGFzaCA9IG1kNS5jcmVhdGVIYXNoKGF1dGgucGFzc3dvcmQuZW1haWwpO1xuICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgJHN0YXRlLmdvKCdkYXNoYm9hcmQnKTtcbiAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vQ2hlY2sgaWYgdXNlciBleGlzdCwgcmV0dXJuIGZhbHNlIGlmIHRoZXkgZG9cbiAgICBwcm9maWxlQ3RybC5jaGVja1VzZXJuYW1lID0gZnVuY3Rpb24oKXtcblxuICAgICAgcHJvZmlsZUN0cmwudXNlcnMuY2hlY2tVc2VybmFtZUV4aXN0KHByb2ZpbGVDdHJsLnByb2ZpbGUuZGlzcGxheU5hbWUpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgaWYoc25hcHNob3QudmFsKCkgIT09IG51bGwpe1xuICAgICAgICAgIHJldHVybiBwcm9maWxlQ3RybC5uYW1lRXhpc3Q9dHJ1ZTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgIHJldHVybiBwcm9maWxlQ3RybC5uYW1lRXhpc3Q9ZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuZmFjdG9yeSgnVXNlcnMnLCBmdW5jdGlvbiAoJGZpcmViYXNlQXJyYXksICRmaXJlYmFzZU9iamVjdCwgRmlyZWJhc2VVcmwsICRodHRwKSB7XG4gICAgdmFyIHVzZXJzUmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsICsgJ3VzZXJzJylcbiAgICB2YXIgdXNlcnMgPSAkZmlyZWJhc2VBcnJheSh1c2Vyc1JlZilcblxuICAgIGNvbnNvbGUubG9nKFwiVXNlciBTZXJ2aWNlXCIpO1xuXG4gICAgdmFyIFVzZXJzID0ge1xuICAgICAgZ2V0TG9jYXRpb25JUDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgIHVybDogJ2h0dHA6Ly9pcGluZm8uaW8vanNvbicsXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICB9KVxuICAgICAgfSxcblxuICAgICAgZ2V0TG9jYXRpb25JUERhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICRodHRwKHtcbiAgICAgICAgICB1cmw6ICdodHRwOi8vaXBpbmZvLmlvL2pzb24nLFxuICAgICAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHJldHVybiBkYXRhLmRhdGFcbiAgICAgICAgfSlcbiAgICAgIH0sXG5cbiAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHJldHVybiB1c2Vycy4kZ2V0UmVjb3JkKHVpZCk7XG4gICAgICB9LFxuXG5cbiAgICAgIC8vU2VhcmNoIGFuZCByZXR1cm4gdXNlcm5hbWVcbiAgICAgIGdldFByb2ZpbGVCeVVzZXJuYW1lOmZ1bmN0aW9uKHVzZXJuYW1lKXtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHVzZXJzUmVmLm9yZGVyQnlDaGlsZCgnZGlzcGxheU5hbWUnKS5lcXVhbFRvKHVzZXJuYW1lKSk7XG4gICAgICB9LFxuXG4gICAgICAvL0NoZWNrIGlmIHVzZXJuYW1lIGV4aXN0LCBpZiBub3QgcmV0dXJuIG51bGxcbiAgICAgIGNoZWNrVXNlcm5hbWVFeGlzdDpmdW5jdGlvbih1c2VybmFtZSl7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5vcmRlckJ5Q2hpbGQoJ2Rpc3BsYXlOYW1lJykuZXF1YWxUbyh1c2VybmFtZSk7XG4gICAgICB9LFxuXG5cbiAgICAgIGdldFByb2ZpbGU6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgY29uc29sZS5sb2codWlkKTtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdCh1c2Vyc1JlZi5jaGlsZCh1aWQpKVxuICAgICAgfSxcblxuICAgICAgZ2V0RGlzcGxheU5hbWU6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgY29uc29sZS5sb2codWlkKTtcbiAgICAgICAgaWYgKHVpZCAhPT0gbnVsbCB8fCB1aWQgIT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuIHVzZXJzLiRnZXRSZWNvcmQodWlkKS5kaXNwbGF5TmFtZTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy9HZXQgdXNlciBGb2xsb3dlcnNcbiAgICAgIGdldEZvbGxvd2VyOmZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5jaGlsZCh1aWQrJy9zdGF0L2ZvbGxvd2VyL3VpZCcpO1xuICAgICAgfSxcblxuICAgICAgLy9DaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgZm9sbG93aW5nXG4gICAgICBjaGVja0ZvbGxvdzpmdW5jdGlvbih1aWQsZm9sbG93X2lkKXtcblxuICAgICAgICB2YXIgZm9sbG93PWZhbHNlO1xuICAgICAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKyd1c2Vycy8nK3VpZCsnL3N0YXQvZm9sbG93aW5nL3VpZC8nK2ZvbGxvd19pZCk7XG4gICAgICAgIHJlZi5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgICBmb2xsb3cgPSBzbmFwc2hvdC5leGlzdHMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZvbGxvdztcbiAgICAgIH0sXG5cbiAgICAgIC8vQ2hhbmdlIHBhc3N3b3JkXG4gICAgICB1c2VyQ2hhbmdlUGFzc3dvcmQ6ZnVuY3Rpb24oZW1haWwsb2xkcGFzcyxuZXdwYXNzKXtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKTtcbiAgICAgICAgcmVmLmNoYW5nZVBhc3N3b3JkKHtcbiAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgb2xkUGFzc3dvcmQ6IG9sZHBhc3MsXG4gICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld3Bhc3NcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiSU5WQUxJRF9QQVNTV09SRFwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHNwZWNpZmllZCB1c2VyIGFjY291bnQgcGFzc3dvcmQgaXMgaW5jb3JyZWN0LlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcIklOVkFMSURfVVNFUlwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHNwZWNpZmllZCB1c2VyIGFjY291bnQgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgY2hhbmdpbmcgcGFzc3dvcmQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIHBhc3N3b3JkIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgdXNlclJlZjogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gdXNlcnNSZWYuY2hpbGQodWlkKVxuICAgICAgfSxcblxuICAgICAgdXB2b3RlczogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gdXNlcnNSZWYuY2hpbGQodWlkKS5jaGlsZCgndXB2b3RlcycpXG4gICAgICB9LFxuXG4gICAgICBkb3dudm90ZXM6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLmNoaWxkKHVpZCkuY2hpbGQoJ2Rvd252b3RlcycpXG4gICAgICB9LFxuXG4gICAgICAvL1VzZXIgZm9sbG93aW5nIHRvcGljXG4gICAgICBmb2xsb3dpbmc6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLmNoaWxkKHVpZCkuY2hpbGQoJ2ZvbGxvd2luZycpXG4gICAgICB9LFxuXG4gICAgICB1c2VyQXJyUmVmOiBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5jaGlsZCh1aWQpXG4gICAgICB9LFxuXG4gICAgICBhbGw6IHVzZXJzXG4gICAgfVxuXG4gICAgcmV0dXJuIFVzZXJzXG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcclxuICAuZmFjdG9yeSgnVW5pcXVlSURHZW5lcmF0b3InLCBmdW5jdGlvbigpeyAgXHJcbiAgICAvKipcclxuICAgICAqIEZhbmN5IElEIGdlbmVyYXRvciB0aGF0IGNyZWF0ZXMgMjAtY2hhcmFjdGVyIHN0cmluZyBpZGVudGlmaWVycyB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcclxuICAgICAqXHJcbiAgICAgKiAxLiBUaGV5J3JlIGJhc2VkIG9uIHRpbWVzdGFtcCBzbyB0aGF0IHRoZXkgc29ydCAqYWZ0ZXIqIGFueSBleGlzdGluZyBpZHMuXHJcbiAgICAgKiAyLiBUaGV5IGNvbnRhaW4gNzItYml0cyBvZiByYW5kb20gZGF0YSBhZnRlciB0aGUgdGltZXN0YW1wIHNvIHRoYXQgSURzIHdvbid0IGNvbGxpZGUgd2l0aCBvdGhlciBjbGllbnRzJyBJRHMuXHJcbiAgICAgKiAzLiBUaGV5IHNvcnQgKmxleGljb2dyYXBoaWNhbGx5KiAoc28gdGhlIHRpbWVzdGFtcCBpcyBjb252ZXJ0ZWQgdG8gY2hhcmFjdGVycyB0aGF0IHdpbGwgc29ydCBwcm9wZXJseSkuXHJcbiAgICAgKiA0LiBUaGV5J3JlIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZy4gIEV2ZW4gaWYgeW91IGdlbmVyYXRlIG1vcmUgdGhhbiBvbmUgaW4gdGhlIHNhbWUgdGltZXN0YW1wLCB0aGVcclxuICAgICAqICAgIGxhdHRlciBvbmVzIHdpbGwgc29ydCBhZnRlciB0aGUgZm9ybWVyIG9uZXMuICBXZSBkbyB0aGlzIGJ5IHVzaW5nIHRoZSBwcmV2aW91cyByYW5kb20gYml0c1xyXG4gICAgICogICAgYnV0IFwiaW5jcmVtZW50aW5nXCIgdGhlbSBieSAxIChvbmx5IGluIHRoZSBjYXNlIG9mIGEgdGltZXN0YW1wIGNvbGxpc2lvbikuXHJcbiAgICAgKi9cclxuICAgICByZXR1cm4ge1xyXG5cclxuICAgICAgICBnZW5lcmF0ZVB1c2hJRDpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIC8vIE1vZGVsZWQgYWZ0ZXIgYmFzZTY0IHdlYi1zYWZlIGNoYXJzLCBidXQgb3JkZXJlZCBieSBBU0NJSS5cclxuICAgICAgICAgICAgdmFyIFBVU0hfQ0hBUlMgPSAnLTAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWl9hYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XHJcblxyXG4gICAgICAgICAgICAvLyBUaW1lc3RhbXAgb2YgbGFzdCBwdXNoLCB1c2VkIHRvIHByZXZlbnQgbG9jYWwgY29sbGlzaW9ucyBpZiB5b3UgcHVzaCB0d2ljZSBpbiBvbmUgbXMuXHJcbiAgICAgICAgICAgIHZhciBsYXN0UHVzaFRpbWUgPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8gV2UgZ2VuZXJhdGUgNzItYml0cyBvZiByYW5kb21uZXNzIHdoaWNoIGdldCB0dXJuZWQgaW50byAxMiBjaGFyYWN0ZXJzIGFuZCBhcHBlbmRlZCB0byB0aGVcclxuICAgICAgICAgICAgLy8gdGltZXN0YW1wIHRvIHByZXZlbnQgY29sbGlzaW9ucyB3aXRoIG90aGVyIGNsaWVudHMuICBXZSBzdG9yZSB0aGUgbGFzdCBjaGFyYWN0ZXJzIHdlXHJcbiAgICAgICAgICAgIC8vIGdlbmVyYXRlZCBiZWNhdXNlIGluIHRoZSBldmVudCBvZiBhIGNvbGxpc2lvbiwgd2UnbGwgdXNlIHRob3NlIHNhbWUgY2hhcmFjdGVycyBleGNlcHRcclxuICAgICAgICAgICAgLy8gXCJpbmNyZW1lbnRlZFwiIGJ5IG9uZS5cclxuICAgICAgICAgICAgdmFyIGxhc3RSYW5kQ2hhcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgICAgdmFyIGR1cGxpY2F0ZVRpbWUgPSAobm93ID09PSBsYXN0UHVzaFRpbWUpO1xyXG4gICAgICAgICAgICAgIGxhc3RQdXNoVGltZSA9IG5vdztcclxuXHJcbiAgICAgICAgICAgICAgdmFyIHRpbWVTdGFtcENoYXJzID0gbmV3IEFycmF5KDgpO1xyXG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSA3OyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgdGltZVN0YW1wQ2hhcnNbaV0gPSBQVVNIX0NIQVJTLmNoYXJBdChub3cgJSA2NCk7XHJcbiAgICAgICAgICAgICAgICAvLyBOT1RFOiBDYW4ndCB1c2UgPDwgaGVyZSBiZWNhdXNlIGphdmFzY3JpcHQgd2lsbCBjb252ZXJ0IHRvIGludCBhbmQgbG9zZSB0aGUgdXBwZXIgYml0cy5cclxuICAgICAgICAgICAgICAgIG5vdyA9IE1hdGguZmxvb3Iobm93IC8gNjQpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAobm93ICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJ1dlIHNob3VsZCBoYXZlIGNvbnZlcnRlZCB0aGUgZW50aXJlIHRpbWVzdGFtcC4nKTtcclxuXHJcbiAgICAgICAgICAgICAgdmFyIGlkID0gdGltZVN0YW1wQ2hhcnMuam9pbignJyk7XHJcblxyXG4gICAgICAgICAgICAgIGlmICghZHVwbGljYXRlVGltZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgbGFzdFJhbmRDaGFyc1tpXSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDY0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIHRpbWVzdGFtcCBoYXNuJ3QgY2hhbmdlZCBzaW5jZSBsYXN0IHB1c2gsIHVzZSB0aGUgc2FtZSByYW5kb20gbnVtYmVyLCBleGNlcHQgaW5jcmVtZW50ZWQgYnkgMS5cclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDExOyBpID49IDAgJiYgbGFzdFJhbmRDaGFyc1tpXSA9PT0gNjM7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICBsYXN0UmFuZENoYXJzW2ldID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxhc3RSYW5kQ2hhcnNbaV0rKztcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlkICs9IFBVU0hfQ0hBUlMuY2hhckF0KGxhc3RSYW5kQ2hhcnNbaV0pO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZihpZC5sZW5ndGggIT0gMjApIHRocm93IG5ldyBFcnJvcignTGVuZ3RoIHNob3VsZCBiZSAyMC4nKTtcclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gIH0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
