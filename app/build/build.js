"use strict";function show(e){return console.log(e),JSON.stringify(e,null,2)}function extend(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){if(t&&"object"==typeof t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])}),e}function moveFbRecord(e,t){e.once("value",function(o){t.set(o.val(),function(t){t?"undefined"!=typeof console&&console.error&&console.error(t):e.remove()})})}var app=angular.module("App",["firebase","angular-md5","ui.router","ngMaterial","angularMoment","flow","slugifier","ngAutocomplete","ngTagsInput","cgNotify","pascalprecht.translate","facebook","angular-web-notification","angular-flexslider","ngSanitize","ui.bootstrap","angular-smilies","ngCookies"]).config(["$mdThemingProvider",function(e){e.definePalette("slack",{50:"ffebee",100:"ffcdd2",200:"ef9a9a",300:"e57373",400:"ef5350",500:"4D394B",600:"e53935",700:"d32f2f",800:"c62828",900:"b71c1c",A100:"ff8a80",A200:"ff5252",A400:"ff1744",A700:"d50000",contrastDefaultColor:"light",contrastDarkColors:["50","100","200","300","400","A100"],contrastLightColors:void 0}),e.theme("default").primaryPalette("slack")}]).config(["FacebookProvider",function(e){var t="931376120263856";e.setAppId(t),e.init(t)}]).config(["$translateProvider",function(e){e.preferredLanguage("Eng"),e.useSanitizeValueStrategy("escape")}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/",views:{"":{controller:"HomeCtrl as  homeCtrl",templateUrl:"home/home.html",resolve:{requireNoAuth:["$state","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){e.go("dashboard")},function(e){return e})}],feed:["Topics",function(e){return e.latestFeed()}]}},"login-form@home":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/html/login-form.html"},"header@home":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("trending",{url:"/explore/trending",views:{"":{controller:"HomeCtrl as  homeCtrl",templateUrl:"home/trend.html",resolve:{feed:["Topics",function(e){return e.latestFeed()}]}},"header@trending":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("category",{url:"/category/{Slug}",views:{"":{controller:"CateCtrl as cateCtrl",templateUrl:"category/index.html",resolve:{cateName:["$stateParams","Category",function(e,t){return t.getName(e.Slug).$loaded()}],cateTopics:["$stateParams","Topics",function(e,t){return t.list(e.Slug)}]}},"header@category":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("places",{url:"/places/{place_slug}/{place_id}",views:{"header@places":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"},"":{controller:"PlacesCtrl as placesCtrl",templateUrl:"place/index.html",resolve:{placeLanding:["Places","Topics","$stateParams","$firebaseArray",function(e,t,o,r){var n;return e.getPlaceRef(o.place_id).on("value",function(e){n=e.val(),console.log(e.val())}),n}]}}}}).state("tag",{url:"/tag/{Tag}",views:{"header@tag":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"},"":{controller:"TagCtrl as tagCtrl",templateUrl:"tag/index.html",resolve:{tagName:["$stateParams",function(e){return e.Tag}],tagLanding:["Topics","$stateParams","Tags",function(e,t,o){var r=t.Tag;return e.topicsByTag(r)}]}}}}).state("topic",{url:"/{Slug}",resolve:{Slug:["$stateParams","$state","NotiService","Auth",function(e,t,o,r){o.unreadNotification(r.ref.getAuth().uid),e.Slug=decodeURIComponent(e.Slug),""==e.Slug&&t.go("dashboard")}]},views:{"":{controller:"TopicLandingCtrl as topicLandingCtrl",templateUrl:"topics/index.html",resolve:{isOwner:["Auth","Users","$stateParams","Topics",function(e,t,o,r){var n="";return e.ref.getAuth()?r.fortopic(o.Slug).$loaded().then(function(t){return null!=t[0]?(n=t[0].uid,e.ref.getAuth().uid==n?!0:!1):void 0}):!1}],topicLanding:["$stateParams","Topics",function(e,t){return t.fortopic(e.Slug).$loaded()}],replyList:["$stateParams","Topics","$state",function(e,t,o){var r="";return t.fortopic(e.Slug).$loaded().then(function(e){return null!=e[0]?r=e[0].$id:o.go("topic-notfound"),t.replyList(r)})}],viewData:["$stateParams","Topics","Users","Auth",function(e,t,o,r){var n,i,l=moment().toISOString(),a={userIP:"",created:l};return o.getLocationIP().success(function(e){a.userIP=e.data}).then(function(e){a.userIP=e.data}),t.getTopicBySlug(e.Slug).$loaded().then(function(e){return"undefined"!==e[0].$id&&(n=e[0].$id,i=t.getViews(n),i.obj.$loaded().then(function(e){null==e.count?i.ref.child("count").set(1):i.ref.child("count").set(e.count+1)}),r.auth.$requireAuth().then(function(e){var t=e.uid;i.ref.child("history").child(t).push().set(a),o.userRef(e.uid).child("views").child(n).push().set(a)})),i.obj})}],followers:["$stateParams","Topics",function(e,t){return t.getTopicBySlug(e.Slug).$loaded().then(function(e){var o=e[0].$id;return t.getFollowers(o).obj.$loaded().then(function(e){return e})})}]}},"header@topic":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("topic-notfound",{url:"/err/notfound"}).state("profile",{url:"/profile/{Name}",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"profile/index.html",resolve:{isOwner:["Auth","Users","$stateParams",function(e,t,o){return e.ref.getAuth()?t.getProfileByUsername(o.Name).$loaded().then(function(t){return t[0].$id==e.ref.getAuth().uid?!0:!1}):!1}],userPosts:["Users","Topics","$stateParams",function(e,t,o){return e.getProfileByUsername(o.Name).$loaded().then(function(e){return e[0].$id?t.createdBy(e[0].$id):void 0})}],profile:["$state","$stateParams","$rootScope","Auth","Users",function(e,t,o,r,n){return n.getProfileByUsername(t.Name).$loaded().then(function(e){return e})}]}},"header@profile":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("acccountEdit",{url:"/account/edit",views:{"passwordEdit@acccountEdit":{url:"/account/changePassword",templateUrl:"profile/passwd.html"},"userEdit@acccountEdit":{url:"/account/edit-form",templateUrl:"profile/edit-form.html"},"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"profile/edit.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["$state","$rootScope","Auth","Users",function(e,t,o,r){return o.auth.$requireAuth().then(function(t){return r.getProfile(t.uid).$loaded().then(function(t){return t.displayName?t:void e.go("get_started")})},function(t){e.go("home")})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}},"header@acccountEdit":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("accountPassword",{url:"/account/changePassword",templateUrl:"profile/passwd.html"}).state("accountUserEdit",{url:"/account/edit-form",templateUrl:"profile/edit-form.html"}).state("dashboard",{url:"/user/dashboard",controller:"DashboardCtrl as dashboardCtrl",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"dashboard/index.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["$state","$rootScope","Auth","Users",function(e,t,o,r){return o.auth.$requireAuth().then(function(t){return r.getProfile(t.uid).$loaded().then(function(o){return o.stat||(r.userRef(t.uid).child("stat/upvoted/count").set(0),r.userRef(t.uid).child("stat/posted/count").set(0),r.userRef(t.uid).child("stat/comment/count").set(0),r.userRef(t.uid).child("stat/follower/count").set(0),r.userRef(t.uid).child("stat/following/count").set(0)),o.displayName?o:void e.go("get_started")})},function(t){return e.go("home"),t})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}},"header@dashboard":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("follow_cates",{url:"/user/follow-categories",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"auth/follow-categories.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["Users","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){return e.getProfile(t.uid).$loaded()})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}},"header@follow_cates":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("get_started",{url:"/user/get_started",views:{"":{controller:"ProfileCtrl as profileCtrl",templateUrl:"auth/get_started.html",resolve:{userPosts:function(){return!1},isOwner:function(){return!0},profile:["Users","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){return e.getProfile(t.uid).$loaded()})}],auth:["$state","Users","Auth",function(e,t,o){return o.auth.$requireAuth()["catch"](function(){e.go("home")})}]}},"header@get_started":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("login",{url:"/user/login",views:{"":{templateUrl:"auth/login.html"},"login-form@login":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/html/login-form.html"},"header@login":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}}}).state("register",{url:"/user/register",views:{"":{controller:"AuthCtrl as authCtrl",templateUrl:"auth/register.html"},"header@register":{controller:"AuthCtrl as authCtrl",templateUrl:"templates/toolbar/main_toolbar.html"}},resolve:{requireNoAuth:["$state","Auth",function(e,t){return t.auth.$requireAuth().then(function(t){e.go("home")},function(e){return e})}]}}),t.otherwise("/")}]).filter("orderObjectBy",function(){return function(e,t,o){var r=[];return angular.forEach(e,function(e){r.push(e.$id).set(e)}),r.sort(function(e,o){return e[t]>o[t]?1:-1}),o&&r.reverse(),r}}).filter("decodeURI",function(){return function(e){return e?decodeURI(e):""}}).filter("nl2br",["$sce",function(e){return function(t){return t?e.trustAsHtml(t.replace(/\n/g,"<br/>")):""}}]).constant("FirebaseUrl","https://bmxyz.firebaseio.com/");angular.module("App").controller("AuthCtrl",["Auth","Users","$state","$rootScope","$mdSidenav","$translate","$cookies","NotiService",function(e,t,o,r,n,i,l,a){function u(e){return function(){n(e).toggle()}}var s=this;s.auth=e,s.users=t,s.notification=a,null!=e.ref.getAuth()?s.profile=s.users.getProfile(e.ref.getAuth().uid):s.profile="",s.user={email:"",password:""},s.badgeNotification=s.notification.addArrChild(s.profile.$id+"/unread"),s.resetCounter=function(){s.notification.resetUnread(s.profile.$id)},s.toggleLang=function(t){i.use(t),l.put("userLang",t),e.ref.getAuth()&&s.users.userArrRef(e.ref.getAuth().uid).update({lang:t})},s.profile.lang?s.toggleLang(s.profile.lang):l.get("userLang")?s.toggleLang(l.get("userLang")):s.toggleLang("Eng"),s.login=function(){s.auth.auth.$authWithPassword(s.user).then(function(e){o.go("dashboard")},function(e){s.error=e})},s.logout=function(){e.auth.$unauth(),o.go("login")},s.register=function(){e.auth.$createUser(s.user).then(function(e){s.login()},function(e){s.error=e})},s.toggleRight=u("right")}]),angular.module("App").factory("Auth",["$firebaseAuth","FirebaseUrl",function(e,t){var o=new Firebase(t),r=e(o),n={ref:o,auth:r,getUid:function(){var e=o.getAuth();return null!=e?o.getAuth().uid:!1}};return n}]),angular.module("App").controller("CateCtrl",["$state","Category","cateName","cateTopics",function(e,t,o,r){var n=this;n.cateName=o,n.category=t,n.cateTopics=r}]),angular.module("App").factory("CateService",["$firebaseObject","$firebaseArray","FirebaseUrl",function(e,t,o){var r=new Firebase(o+"categories"),n=e(r),i={name:function(t){var o=r.orderByChild("slug").equalTo(t);return e(o)},fortopic:function(t){return e(usersRef.child(uid))},addChild:function(e){return r.child(e)},followList:function(e){var o=r.orderByChild("news/follower").equalTo(e);return t(o)},unFollow:function(e,t){var r=new Firebase(o+"categories/"+e+"/follower/"+t);r.remove()},userFollow:function(e,t){var r=!1,n=new Firebase(o+"categories/"+e+"/follower/"+t);return n.once("value",function(e){r=e.exists()}),r},arr:t(r),all:n};return i}]),angular.module("App").factory("Post",["$firebaseObject","FirebaseUrl",function(e,t){var o=new Firebase(t+"topics"),r=e(o),n={topicName:function(t){var r=o.orderByChild("slug").equalTo(t);return e(r)},fortopic:function(t){return e(usersRef.child(uid))},all:r};return n}]),angular.module("App").controller("DashboardCtrl",["Auth","$state","Category","CateService","Tags","$timeout","$mdSidenav","$log",function(e,t,o,r,n,i,l,a){var u=this;u.auth=e,u.cate=r,u.categories=o.all,u.topic_grid=!1,u.tags=n.arr,u.userCateFollow=[],u.cateIsFollow=[],u.followList="",u.close=function(){l("right").close()},u.followCate=function(t){u.cate.addChild(t+"/follower").child(e.ref.getAuth().uid).push().set(moment().toISOString())}}]),angular.module("App").directive("reviewScore",function(){return{restrict:"E",transclude:!0,controller:"TopicCtrl as topicCtrl",templateUrl:"templates/html/review-summary-list.html",scope:{review:"="}}}).directive("userFollowerBtn",function(){return{restrict:"E",transclude:!0,controller:"TopicCtrl as topicCtrl",templateUrl:"templates/html/follow-user.html",scope:{follow:"="}}}).directive("cateFollowBtn",function(){return{controller:"DashboardCtrl as dashboardCtrl",templateUrl:"templates/html/category-follow-btn.html",scope:{cate:"="}}}).directive("topicGrid",function(){return{controller:"DashboardCtrl as dashboardCtrl",templateUrl:"templates/html/category-grid.html"}}).directive("tagGrid",function(){return{controller:"DashboardCtrl as dashboardCtrl",templateUrl:"templates/html/tag-grid.html"}}).directive("topicCreate",function(){return{controller:"TopicCtrl as topicCtrl",templateUrl:"templates/html/topic-create.html",scope:{topic:"="}}}).directive("topicList",function(){return{controller:"TopicCtrl as topicCtrl",templateUrl:"templates/html/topic-list.html",scope:{topics:"="}}}).directive("topicActionsCard",function(){return{controller:"TopicCtrl as topicCtrl",templateUrl:"templates/html/topic-actions-card.html",scope:{topic:"="}}}).directive("enforceMaxTags",function(){return{require:"ngModel",link:function(e,t,o,r){var n=o.maxTags?parseInt(o.maxTags,"4"):null;r.$parsers.push(function(e){return e&&n&&e.length>n&&e.splice(e.length-1,1),e})}}}),angular.module("App").controller("HomeCtrl",["$state","Category","Topics","feed",function(e,t,o,r){var n=this;n.topics=t,n.topics=o,n.feed=r}]),angular.module("App").config(["$translateProvider",function(e){e.translations("Eng",{KEY_DASHBOARD:"Dashboard",KEY_LANGUAGES:"Languages",KEY_HOME:"Home",KEY_REGISTER:"Register",KEY_LOGIN:"Log in",KEY_LOGOUT:"Log out",KEY_FOLLOW:"Follow",KEY_FOLLOWER:"Follower",KEY_UNFOLLOW:"Unfollow",KEY_FOLLOWING:"Following",KEY_POST:"Post",KEY_POSTED:"Posted",KEY_UPVOTE:"Upvote",KEY_UPVOTED:"Upvoted",KEY_DWN_VOTE:"Downvote",KEY_DWN_VOTED:"Downvoted",KEY_VIEW:"View",KEY_REMOVE:"Remove",KEY_CANCEL:"Cancel",KEY_QUESTION:"Question",KEY_TOPIC:"Topic",KEY_CHG_PWD:"Change Password",KEY_PASSWORD:"Password",KEY_OLD_PWD:"Old Password",KEY_NEW_PWD:"New Password",KEY_NEW_PWD_C:"New password confirmation",KEY_SAVE:"Save",KEY_SAVE_DRAFT:"Save as draft",KEY_TAGS:"Tags",KEY_EXPLORE:"Explore",KEY_COMMENTS:"Comments",KEY_REPLY:"Reply",KEY_REVIEW:"Review",KEY_EDIT:"Edit",KEY_TREND:"Trend",KEY_TRENDING:"Trending",KEY_WRITE_REPLY:"Write a reply",KEY_LATEST_FEED:"Latest Feed",KEY_CONF_REMOVE:"Are you sure you want to remove?",KEY_CONF_REM_C:"Once remove, you will not be ableto to get this topic back",KEY_WHAT_ON_UR_MIND:"What's on your mind?",KEY_YOU_WANT_FOLLOW:"You may want to follow",KEY_NO_ACCT_REGISTER:"Don't have account? Register",KEY_CANT_CHNG_USER:"Don't have account? Register",KEY_YOUR_ACCOUNT:"Your account",KEY_NOTHING_HERE:"Nothing here, yet",KEY_WHO_TO_FOLLOW:"Who to follow",KEY_CAT_WILL_APPEAR:"Follow some categories and it will appear here",KEY_WHT_UR_STORY:"What's your story",KEY_WRT_COMMENT:"Write a comment",KEY_FIRSTNAME:"First name",KEY_LASTNAME:"Last name",KEY_BIRTHDAY:"Birthday",KEY_MONTH:"Month",KEY_DAY:"Day",KEY_EMAIL:"Email",KEY_CONF_EMAIL:"Confirm Email",KEY_GENDER:"Gender",KEY_MALE:"Male",KEY_FEMALE:"Female",KEY_USERNAME:"Username",KEY_LOCATION:"Location",KEY_ED_PROFILE:"Edit Profile",KEY_ED_CHG_PWD:"Change Password",KEY_ED_PROFILE:"Edit Profile",KEY_ED_SITE:"Website",KEY_ED_PHONE:"Phone",KEY_ED_BIO:"Biography"}),e.translations("ไทย",{KEY_DASHBOARD:"ห้องทั้งหมด",KEY_LANGUAGES:"ภาษา",KEY_HOME:"หน้าแรก",KEY_REGISTER:"สมัครใช้",KEY_LOGIN:"เข้าสู่ระบบ",KEY_FOLLOW:"ติดตาม",KEY_POST:"โพสต์"}),e.preferredLanguage("en")}]),angular.module("App").controller("NotiCtrl",["$state","Category","Topics","NotiService",function(e,t,o,r){var n=this;n.topics=o,n.feed=feed,n.notiService=r,n.notifyTo=function(e){return n.arr.push(e).$add(e)}}]),angular.module("App").factory("NotiService",["$firebaseObject","$firebaseArray","FirebaseUrl","Users",function(e,t,o,r){var n=new Firebase(o+"notification"),i=e(n),l=r,a={unreadNotification:function(t){var r=new Firebase(o+"notification/"+t);console.log(e(r.orderByChild("is_read").equalTo("false")))},notifyFollower:function(e,t){var o=l.getFollower(t);o.once("value",function(t){t.forEach(function(t){a.updateNotificationCount(e,t.key())})})},notifyLog:function(e,t){a.addChild(t).push().set({topicId:e,from:t,is_read:!1,timestamp:moment().toISOString()})},resetUnread:function(e){var t=new Firebase(o+"notification/"+e+"/unread");t.set(0)},updateNotificationCount:function(e,t){console.log(">>>"+t);var r=new Firebase(o+"notification/"+t+"/unread");r.once("value",function(e){"null"==e.val()?r.set(1):r.set(e.val()+1)},function(e){console.log("The read failed: "+e.code)}).then(function(){a.notifyLog(e,t)})},addChild:function(e){return n.child(e)},addArrChild:function(t){return e(n.child(t))},arr:t(n),all:i};return a}]),angular.module("App").controller("PlacesCtrl",["$state","$scope","$rootScope","$mdDialog","$mdMedia","Tags","Topics","Auth","Users","Slug","Languages","placeLanding",function(e,t,o,r,n,i,l,a,u,s,c,d){var f=this;console.log(d),f.placeLanding=d}]),angular.module("App").factory("Places",["$firebaseArray","FirebaseUrl",function(e,t){var o=new Firebase(t+"places"),r=new Firebase(t+"places_details"),n=e(o),i={addChild:function(e){return o.child(e)},addPlaceDetailChild:function(e){return r.child(e)},getPlaceRef:function(e){return o.child(e+"/info")},arr:n};return i}]),angular.module("App").factory("Category",["$firebaseObject","$firebaseArray","FirebaseUrl",function(e,t,o){var r=new Firebase(o+"categories"),n=e(r),i=(t(r),{getName:function(t){var o=r.child(t);return e(o)},all:n});return i}]).factory("Languages",["$firebaseArray","FirebaseUrl",function(e,t){var o=new Firebase(t+"languages"),r=e(o);return r}]).factory("Archive",["$firebaseArray","FirebaseUrl",function(e,t){var o=new Firebase(t+"archive"),r=e(o),n={addChild:function(e){return o.child(e)},ref:o,arr:r};return n}]),angular.module("App").controller("TagCtrl",["Auth","Users","$state","$rootScope","tagLanding","tagName",function(e,t,o,r,n,i){var l=this;l.tagLanding=n,l.tagName=i}]),angular.module("App").factory("Tags",["$firebaseArray","$firebaseObject","FirebaseUrl","$q",function(e,t,o,r){var n=new Firebase(o+"tags"),i=e(n),l={addChild:function(e){return n.child(e)},tagsUrl:function(){return e(n)},getTagRef:function(e){return n.child(e)},getTagObject:function(e){return t(n.child(e))},topicTags:function(e){var t=r.defer(),n=new Firebase(o);return n.child("tags/"+e).on("child_added",function(o){n.child("topics").orderByChild("tags").equalTo(e).on("child_added",function(e){return t.resolve(),extend({},o.val(),e.val())})})},arr:i};return l}]),angular.module("App").controller("TopicLandingCtrl",["$state","$scope","Slug","Topics","Auth","Users","isOwner","topicLanding","replyList","viewData","followers",function(e,t,o,r,n,i,l,a,u,s,c){var d=this;d.auth=n,d.users=i,d.topicLanding=a,d.topics=r,d.replyList=u,d.views=s,d.followers=c,d.isOwner=l,d.inReplyArr=[],d.replyInReply=function(){for(var e=0;e<d.replyList.length;e++){var t=d.replyList[e].topicId,o=d.replyList[e].$id;d.inReplyArr[e]=d.topics.replyInReply(t,o)}},d.replyInReply()}]),angular.module("App").controller("TopicCtrl",["$state","$scope","$rootScope","$mdDialog","$mdMedia","$http","FirebaseUrl","$translate","NotiService","Tags","Topics","Auth","Users","Slug","Places","Languages","Archive",function(e,t,o,r,n,i,l,a,u,s,c,d,f,p,h,g,m){var v=this;v.tags=s,v.topics=c,v.auth=d,v.users=f,v.languages=g,v.places=h,v.archive=m,v.noti=u,null!=v.auth.ref.getAuth()?(v.profile=v.users.getProfile(v.auth.ref.getAuth().uid),v.uid=v.profile.$id,v.userRef=v.users.userRef(v.uid),v.userUpvotedTopics=v.users.upvotes(v.uid),v.userDownvotedTopics=v.users.downvotes(v.uid),v.userFollowing=v.users.following(v.uid)):(v.profile="",v.uid="",v.userRef=""),v.imageStrings=[],v.imageText=[],v.inReplyArr=[],v.loadBusy=!1,v.slugReturn=null,v.criteria=!1,v.criteriaReply=null,v.reviewCriteria=!1,v.critReplyData=null,v.newTopic={location:"",url:"",ipInfo:"",tags:"",body:""},v.avgReviewReply=function(){for(var e=Object.keys(v.criteriaReply).length,t=0,o=0;e>o;o++)t+=v.criteriaReply[o];v.replyReviewAverage=t/e,console.log(v.criteriaReply),v.critReplyData={avg:v.replyReviewAverage,data:v.criteriaReply}},v.avgReviewScore=function(e){if(e){for(var t=0,o=0;o<e.length;o++)t+=e[o].rating;return t/e.length}},a(["KEY_REMOVE","KEY_CANCEL","KEY_CONF_REMOVE","KEY_CONF_REM_C"]).then(function(e){v.removeTrans=e.KEY_REMOVE,v.cancelTrans=e.KEY_CANCEL,v.confirmRem=e.KEY_CONF_REMOVE,v.confirmRemContent=e.KEY_CONF_REM_C}),v.userName=function(e){return null!=e?v.users.getDisplayName(e):void 0},v.showMdLogin=function(e){var o=(n("sm")||n("xs"))&&t.customFullscreen;r.show({controller:"AuthCtrl as authCtrl",templateUrl:"templates/html/md-login-form.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,fullscreen:o})},v.decodeText=function(e){return console.log(decodeURI(e)),decodeURI(e)},v.loadMore=function(e){v.loadBusy=!0;for(var t=[],o=0;o<e.length;o++)t.push(e[o]);return console.log(t),t},v.loadTags=function(e){console.log(v.tags.tagsUrl())},v.uploadFile=function(e,t){angular.forEach(e,function(e,t){var o=new FileReader;o.onload=function(e){var o=e.target.result;v.imageStrings[t]=o},o.readAsDataURL(e.file)})},v.showConfirmRemove=function(t,o,n){var i=r.confirm().title(v.confirmRem).textContent(v.confirmRemContent).targetEvent(t).ok(v.removeTrans).cancel(v.cancelTrans);r.show(i).then(function(){v.removeTopic(o,n)&&e.go("dashboard")})},v.removeTopic=function(e,t){return e==v.uid?(moveFbRecord(v.topics.refChild(t.$id),v.archive.addChild(t.$id)),!0):!1},v.reply=function(e){v.topics.replyArr(e.$id).$add({topicId:e.$id,body:v.newReply.body,uid:v.uid,review:v.critReplyData,created:moment().toISOString()}),v.noti.updateNotificationCount(e.uid,v.uid),v.topics.replyCount(e.$id).$loaded().then(function(t){t.count?v.topics.replyCountRef(e.$id).set(t.count+1):v.topics.replyCountRef(e.$id).set(1)}),v.users.userRef(v.uid).child("stat/comment/count").set(v.profile.stat.comment.count+1),v.users.userRef(v.uid).child("stat/comment/topics/"+e.$id).push().set(moment().toISOString())},v.replyInReply=function(e,t){v.topics.replyInReplyArr(e,t).$add({body:v.replyInReply.body,uid:v.uid,created:moment().toISOString()})},v.addNewChoice=function(){var e=v.reviewCriteria.length+1;v.reviewCriteria.push({id:"criteria"+e})},v.removeChoice=function(){var e=v.reviewCriteria.length-1;v.reviewCriteria.splice(e)},v.createTopic=function(e,t){var o="";""!==v.newTopic.location&&(console.log(v.newTopic.location),o={place_id:v.newTopic.location.details.place_id,slug:p.slugify(v.newTopic.location.details.name),name:v.newTopic.location.details.name,address:v.newTopic.location.details.formatted_address,lat:v.newTopic.location.details.geometry.location.lat(),lng:v.newTopic.location.details.geometry.location.lng(),lng:v.newTopic.location.details.geometry.location.lng(),lng:v.newTopic.location.details.geometry.location.lng()}),v.topics.arr.$add({type:v.type,lang:v.newTopic.lang,topic:v.newTopic.topic,body:v.newTopic.body,category:e,uid:v.uid,slug:v.newTopic.topic,photos:v.imageStrings,photos_text:v.imageText,location:o,url:v.newTopic.url,draft:t,created:moment().toISOString(),tags:v.newTopic.tags,userIP:v.newTopic.ipInfo,review:v.reviewCriteria}).then(function(e){var t="";if(t=""==p.slugify(v.newTopic.topic)?v.newTopic.topic:p.slugify(v.newTopic.topic),v.topics.getTopicByKey(e.key()).update({slug:t+e.key()}),v.users.userRef(v.uid).child("stat/posted/count").set(v.profile.stat.posted.count+1),v.users.userRef(v.uid).child("stat/posted/topics/"+e.key()).push().set(moment().toISOString()),""!==o&&(v.places.addChild(o.place_id).child(e.key()).push().set(moment().toISOString()),v.places.addChild(o.place_id).child("info").set(o)),null!==v.newTopic.tags)for(var r=0;r<v.newTopic.tags.length;++r)v.tags.addChild(v.newTopic.tags[r].text).child(e.key()).push().set(moment().toISOString());v.noti.notifyFollower(e.key(),v.uid),v.newTopic={body:""}})},v.checkFollow=function(e){return v.users.checkFollow(v.uid,e)?!0:!1},v.followUser=function(e){v.users.getProfile(e).$loaded().then(function(t){v.users.userRef(e).child("stat/follower/count").set(t.stat.follower.count+1),v.users.userRef(e).child("stat/follower/uid/"+v.uid).push().set(moment().toISOString())}),v.users.getProfile(v.uid).$loaded().then(function(t){v.users.userRef(v.uid).child("stat/following/count").set(t.stat.follower.count+1),v.users.userRef(v.uid).child("stat/following/uid/"+e).push().set(moment().toISOString())})},v.unfollowUser=function(e){v.users.getProfile(e).$loaded().then(function(t){v.users.userRef(e).child("stat/follower/count").set(t.stat.follower.count-1),v.users.userRef(e).child("stat/follower/uid/"+v.uid).remove()}),v.users.getProfile(v.uid).$loaded().then(function(t){v.users.userRef(v.uid).child("stat/following/count").set(t.stat.following.count-1),v.users.userRef(v.uid).child("stat/following/uid/"+e).remove()})},v.upvote=function(e){void 0!=e.downvotes&&void 0!=e.downvotes[v.uid]&&v.cancelDownvote(e),v.topics.upvoteTopic(e.$id,v.uid).$loaded().then(function(t){v.userUpvotedTopics.child(e.$id).set(t.$value),v.users.getProfile(e.uid).$loaded().then(function(t){v.users.userRef(e.uid).child("stat/upvoted/count").set(t.stat.upvoted.count+1),v.users.userRef(e.uid).child("stat/upvoted/topics/"+e.$id).push().set(moment().toISOString())})})},v.cancelUpvote=function(e){v.topics.undoUpvote(e.$id,v.uid),v.users.getProfile(e.uid).$loaded().then(function(t){v.users.userRef(e.uid).child("stat/upvoted/count").set(t.stat.upvoted.count-1),v.users.userRef(e.uid).child("stat/upvoted/topics/"+e.$id).remove()}),v.userUpvotedTopics.child(e.$id).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")})},v.downvote=function(e){void 0!=e.upvotes&&void 0!=e.upvotes[v.uid]&&v.cancelUpvote(e),v.topics.downvoteTopic(e.$id,v.uid).$loaded().then(function(t){v.userDownvotedTopics.child(e.$id).set(t.$value)})},v.cancelDownvote=function(e){v.topics.undoDownvote(e.$id,v.uid),v.userDownvotedTopics.child(e.$id).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")})},v.followTopic=function(e){v.topics.follow(e.$id,v.uid).$loaded().then(function(t){v.userFollowing.child(e.$id).set(t.history[v.uid])})},v.unfollowTopic=function(e){v.topics.unfollow(e.$id,v.uid),v.userFollowing.child(e.$id).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")})}}]),angular.module("App").factory("Topics",["$firebaseObject","$firebaseArray","FirebaseUrl",function(e,t,o){var r=new Firebase(o+"topics"),n=e(r),i=(t(r),{getTag:function(e){return t(r.orderByChild("tags").equalTo(e))},getSlug:function(e){var o=r.orderByChild("slug").equalTo(e);return t(o)},createdBy:function(e){return t(r.orderByChild("uid").equalTo(e))},refChild:function(e){return r.child(e)},countUserTopics:function(){},list:function(e){var o=r.orderByChild("category").equalTo(e);return t(o)},name:function(t){var o=r.orderByChild("slug").equalTo(t);return e(o)},fortopicRef:function(e){return r.orderByChild("slug").equalTo(e)},getTopicByKey:function(e){return new Firebase(o+"topics/"+e)},getTopicBySlug:function(e){return t(r.orderByChild("slug").equalTo(e).limitToFirst(1))},incrementView:function(e){},fortopic:function(e){return t(i.fortopicRef(e))},replyList:function(e){var o=r.child(e+"/replies");return t(o)},replyArr:function(e){return t(r.child(e+"/replies"))},replyCount:function(t){return e(r.child(t+"/replies/"))},replyCountRef:function(e){return r.child(e+"/replies/count")},replyInReply:function(e,o){return t(r.child(e+"/replies/"+o+"/inReply"))},replyInReplyArr:function(e,o){return t(r.child(e+"/replies/"+o+"/inReply"))},getUpvotes:function(e){return{ref:r.child(e+"/upvotes"),array:t(r.child(e+"/upvotes"))}},getDownvotes:function(e){return{ref:r.child(e+"/downvotes"),array:t(r.child(e+"/downvotes"))}},getFollowers:function(t){return{ref:r.child(t+"/followers"),obj:e(r.child(t+"/followers"))}},upvoteTopic:function(t,o){return r.child(t+"/upvotes").child(o).set(moment().toISOString()),e(r.child(t+"/upvotes").child(o))},undoUpvote:function(e,t){return r.child(e+"/upvotes").child(t).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")}),r.child(e+"/upvotes")},downvoteTopic:function(t,o){return r.child(t+"/downvotes").child(o).set(moment().toISOString()),e(r.child(t+"/downvotes").child(o))},undoDownvote:function(e,t){return r.child(e+"/downvotes").child(t).remove(function(e){e?console.log("Error:",e):console.log("Removed successfully!")}),r.child(e+"/downvotes")},follow:function(t,o){return r.child(t+"/followers").child("history").child(o).set(moment().toISOString()),e(r.child(t+"/followers").child("count")).$loaded().then(function(e){null===e.value||void 0===e.value?r.child(t+"/followers").child("count").set(1):r.child(t+"/followers").child("count").set(e.$value+1)}),e(r.child(t+"/followers"))},unfollow:function(t,o){return r.child(t+"/followers").child("history").child(o).remove(function(o){o?console.log("Error:",o):(console.log("Removed successfully!"),e(r.child(t+"/followers").child("count")).$loaded().then(function(e){r.child(t+"/followers").child("count").set(e.$value-1)}))}),r.child(t+"/followers")},getViews:function(t){return{ref:r.child(t).child("views"),obj:e(r.child(t).child("views"))}},latestFeed:function(){return t(r.orderByChild("created").limitToLast(10))},topicsByTag:function(e){return t(r.orderByChild("tags").equalTo(e))},arr:t(r),all:n,ref:r});return i}]),angular.module("App").controller("ProfileCtrl",["$scope","$rootScope","$state","$filter","md5","Auth","Users","Topics","Facebook","notify","CateService","profile","isOwner","userPosts",function(e,t,o,r,n,i,l,a,u,s,c,d,f,p){var h=this;h.profile=d,h.auth=i,h.users=l,h.topics=a,h.facebook=u,h.isOwner=f,h.cate=c,h.$state=o,h.userPosts=p,h.feed="",h.editInit="userEdit",h.nameExist=!1,h.getUserPost=function(e){h.feed=h.topics.createdBy(e)},h.linkFacebook=function(){h.facebook.login(function(t){h.facebook.getLoginStatus(function(t){"connected"===t.status?(e.loggedIn=!0,h.facebook.api("/me",function(e){console.log(e)})):console.log("not logged in")})})},h.oldProfileValue=h.profile,h.userCreated=function(e){return h.topics.createdBy(e)},h.imageStrings=[],h.userCateFollow=[],h.cateIsFollow=[],h.followList="",h.followCateListArr=function(e){h.followList=h.cate.followList(e)},i.ref.getAuth()&&h.followCateListArr(i.ref.getAuth().uid),h.followCate=function(e,t){h.cateIsFollow[e]=!0,h.cate.addChild(t+"/follower").child(i.ref.getAuth().uid).push().set(moment().toISOString())},h.uploadFile=function(e){angular.forEach(e,function(e,t){var o=new FileReader;o.onload=function(e){var o=e.target.result;h.imageStrings[t]=o,h.users.userArrRef(i.ref.getAuth().uid).update({photo:o}),s({message:"Saved",position:"center",duration:3e3})},o.readAsDataURL(e.file)})},h.saveProfile=function(e){h.profile.updated=moment().toISOString(),
null!==h.location&&(locationDetail={place_id:h.location.details.place_id,name:h.location.details.name,address:h.location.details.formatted_address,lat:h.location.details.geometry.location.lat(),lng:h.location.details.geometry.location.lng()},h.profile.userLocation=locationDetail),h.profile.$save().then(function(){s({message:"Saved",position:"center",duration:3e3}),void 0!==e&&o.go(e)})["catch"](function(e){s({message:"Error saving data",position:"center",duration:3e3})})},h.updateName=function(){h.users.userArrRef(i.ref.getAuth().uid).update({firstname:h.profile.firstname,lastname:h.profile.lastname}),h.users.userArrRef(i.ref.getAuth().uid+"/log").push().set({action:"name_change",oldname:h.oldProfileValue.firstname+"-"+h.oldProfileValue.lastname,created:moment().toISOString()}),s({message:"Saved",position:"center",duration:3e3})},h.updateBio=function(){h.users.userArrRef(i.ref.getAuth().uid).update({biography:h.profile.biography}),s({message:"Saved",position:"center",duration:3e3})},h.updateProfile=function(){h.profile.$save().then(function(){o.go("dashboard")})},h.checkUsername=function(){h.users.checkUsernameExist(h.profile.displayName).once("value",function(e){return null!==e.val()?h.nameExist=!0:h.nameExist=!1})}}]),angular.module("App").factory("Users",["$firebaseArray","$firebaseObject","FirebaseUrl","$http",function(e,t,o,r){var n=new Firebase(o+"users"),i=e(n),l={getLocationIP:function(){return r({url:"http://ipinfo.io/json",method:"GET"})},getLocationIPData:function(){return r({url:"http://ipinfo.io/json",method:"GET"}).then(function(e){return e.data})},profile:function(e){return i.$getRecord(e)},getProfileByUsername:function(t){return e(n.orderByChild("displayName").equalTo(t))},checkUsernameExist:function(e){return n.orderByChild("displayName").equalTo(e)},getProfile:function(e){return t(n.child(e))},getDisplayName:function(e){return null==e||""===e?"":i.$getRecord(e).displayName},getFollower:function(e){return n.child(e+"/stat/follower/uid")},checkFollow:function(e,t){var r=!1,n=new Firebase(o+"users/"+e+"/stat/following/uid/"+t);return n.once("value",function(e){r=e.exists()}),r},userChangePassword:function(e,t,r){var n=new Firebase(o);n.changePassword({email:e,oldPassword:t,newPassword:r},function(e){if(e)switch(e.code){case"INVALID_PASSWORD":console.log("The specified user account password is incorrect.");break;case"INVALID_USER":console.log("The specified user account does not exist.");break;default:console.log("Error changing password:",e)}else console.log("User password changed successfully!")})},userRef:function(e){return n.child(e)},upvotes:function(e){return n.child(e).child("upvotes")},downvotes:function(e){return n.child(e).child("downvotes")},following:function(e){return n.child(e).child("following")},userArrRef:function(e){return n.child(e)},all:i};return l}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInRvcGljcy5jb250cm9sbGVyLmpzIiwiYnVpbGQuanMiLCJhdXRoLmNvbnRyb2xsZXIuanMiLCJhdXRoLnNlcnZpY2UuanMiLCJjYXRlZ29yeS5jb250cm9sbGVyLmpzIiwiY2F0ZWdvcnkuc2VydmljZS5qcyIsInBvc3Quc2VydmljZS5qcyIsImRhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGlyZWN0aXZlcy5qcyIsImhvbWUuY29udHJvbGxlci5qcyIsImxhbmcuanMiLCJub3RpZmljYXRpb24uY29udHJvbGxlci5qcyIsIm5vdGlmaWNhdGlvbi5zZXJ2aWNlLmpzIiwicGxhY2UuY29udHJvbGxlci5qcyIsInBsYWNlLnNlcnZpY2UuanMiLCJ1dGlsaXRpZXMuc2VydmljZS5qcyIsInRhZy5jb250cm9sbGVyLmpzIiwidGFnLnNlcnZpY2UuanMiLCJ0b3BpYy1sYW5kaW5nLmNvbnRyb2xsZXIuanMiLCJ0b3BpY3Muc2VydmljZS5qcyIsInByb2ZpbGUuY29udHJvbGxlci5qcyIsInVzZXJzLnNlcnZpY2UuanMiXSwibmFtZXMiOlsic2hvdyIsImRhdGEiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImV4dGVuZCIsImJhc2UiLCJwYXJ0cyIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwiZm9yRWFjaCIsInAiLCJrIiwiaGFzT3duUHJvcGVydHkiLCJtb3ZlRmJSZWNvcmQiLCJvbGRSZWYiLCJuZXdSZWYiLCJvbmNlIiwic25hcCIsInNldCIsInZhbCIsImVycm9yIiwicmVtb3ZlIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRtZFRoZW1pbmdQcm92aWRlciIsImRlZmluZVBhbGV0dGUiLCI1MCIsIjEwMCIsIjIwMCIsIjMwMCIsIjQwMCIsIjUwMCIsIjYwMCIsIjcwMCIsIjgwMCIsIjkwMCIsIkExMDAiLCJBMjAwIiwiQTQwMCIsIkE3MDAiLCJjb250cmFzdERlZmF1bHRDb2xvciIsImNvbnRyYXN0RGFya0NvbG9ycyIsImNvbnRyYXN0TGlnaHRDb2xvcnMiLCJ1bmRlZmluZWQiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiRmFjZWJvb2tQcm92aWRlciIsIm15QXBwSWQiLCJzZXRBcHBJZCIsImluaXQiLCIkdHJhbnNsYXRlUHJvdmlkZXIiLCJwcmVmZXJyZWRMYW5ndWFnZSIsInVzZVNhbml0aXplVmFsdWVTdHJhdGVneSIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsIiIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsInJlc29sdmUiLCJyZXF1aXJlTm9BdXRoIiwiJHN0YXRlIiwiQXV0aCIsImF1dGgiLCIkcmVxdWlyZUF1dGgiLCJ0aGVuIiwiZ28iLCJmZWVkIiwiVG9waWNzIiwibGF0ZXN0RmVlZCIsImxvZ2luLWZvcm1AaG9tZSIsImhlYWRlckBob21lIiwiaGVhZGVyQHRyZW5kaW5nIiwiY2F0ZU5hbWUiLCIkc3RhdGVQYXJhbXMiLCJDYXRlZ29yeSIsImdldE5hbWUiLCJTbHVnIiwiJGxvYWRlZCIsImNhdGVUb3BpY3MiLCJsaXN0IiwiaGVhZGVyQGNhdGVnb3J5IiwiaGVhZGVyQHBsYWNlcyIsInBsYWNlTGFuZGluZyIsIlBsYWNlcyIsIiRmaXJlYmFzZUFycmF5IiwiZ2V0UGxhY2VSZWYiLCJwbGFjZV9pZCIsIm9uIiwic25hcHNob3QiLCJoZWFkZXJAdGFnIiwidGFnTmFtZSIsIlRhZyIsInRhZ0xhbmRpbmciLCJUYWdzIiwidGFnIiwidG9waWNzQnlUYWciLCJOb3RpU2VydmljZSIsInVucmVhZE5vdGlmaWNhdGlvbiIsInJlZiIsImdldEF1dGgiLCJ1aWQiLCJkZWNvZGVVUklDb21wb25lbnQiLCJpc093bmVyIiwiVXNlcnMiLCJ0b3BpY1VpZCIsImZvcnRvcGljIiwidG9waWNMYW5kaW5nIiwicmVwbHlMaXN0IiwidG9waWNLZXkiLCIkaWQiLCJ2aWV3RGF0YSIsInRpbWUiLCJtb21lbnQiLCJ0b0lTT1N0cmluZyIsImhpc3RvcnlPYmoiLCJ1c2VySVAiLCJjcmVhdGVkIiwiZ2V0TG9jYXRpb25JUCIsInN1Y2Nlc3MiLCJnZXRUb3BpY0J5U2x1ZyIsImdldFZpZXdzIiwib2JqIiwiY291bnQiLCJjaGlsZCIsInB1c2giLCJ1c2VyUmVmIiwiZm9sbG93ZXJzIiwiZ2V0Rm9sbG93ZXJzIiwidmFsdWUiLCJoZWFkZXJAdG9waWMiLCJnZXRQcm9maWxlQnlVc2VybmFtZSIsIk5hbWUiLCJwcm9maWxlIiwidXNlclBvc3RzIiwiY3JlYXRlZEJ5IiwiJHJvb3RTY29wZSIsImhlYWRlckBwcm9maWxlIiwicGFzc3dvcmRFZGl0QGFjY2NvdW50RWRpdCIsInVzZXJFZGl0QGFjY2NvdW50RWRpdCIsImdldFByb2ZpbGUiLCJkaXNwbGF5TmFtZSIsImhlYWRlckBhY2Njb3VudEVkaXQiLCJzdGF0IiwiaGVhZGVyQGRhc2hib2FyZCIsImhlYWRlckBmb2xsb3dfY2F0ZXMiLCJoZWFkZXJAZ2V0X3N0YXJ0ZWQiLCJsb2dpbi1mb3JtQGxvZ2luIiwiaGVhZGVyQGxvZ2luIiwiaGVhZGVyQHJlZ2lzdGVyIiwib3RoZXJ3aXNlIiwiZmlsdGVyIiwiaXRlbXMiLCJmaWVsZCIsInJldmVyc2UiLCJmaWx0ZXJlZCIsIml0ZW0iLCJzb3J0IiwiYSIsImIiLCJ0ZXh0IiwiZGVjb2RlVVJJIiwiJHNjZSIsInRydXN0QXNIdG1sIiwicmVwbGFjZSIsImNvbnN0YW50IiwiJG1kU2lkZW5hdiIsIiR0cmFuc2xhdGUiLCIkY29va2llcyIsImJ1aWxkVG9nZ2xlciIsIm5hdklEIiwidG9nZ2xlIiwiYXV0aEN0cmwiLCJ0aGlzIiwidXNlcnMiLCJub3RpZmljYXRpb24iLCJ1c2VyIiwiZW1haWwiLCJwYXNzd29yZCIsImJhZGdlTm90aWZpY2F0aW9uIiwiYWRkQXJyQ2hpbGQiLCJyZXNldENvdW50ZXIiLCJyZXNldFVucmVhZCIsInRvZ2dsZUxhbmciLCJsYW5nS2V5IiwidXNlIiwicHV0IiwidXNlckFyclJlZiIsInVwZGF0ZSIsImxhbmciLCJnZXQiLCJsb2dpbiIsIiRhdXRoV2l0aFBhc3N3b3JkIiwibG9nb3V0IiwiJHVuYXV0aCIsInJlZ2lzdGVyIiwiJGNyZWF0ZVVzZXIiLCJ0b2dnbGVSaWdodCIsImZhY3RvcnkiLCIkZmlyZWJhc2VBdXRoIiwiRmlyZWJhc2VVcmwiLCJGaXJlYmFzZSIsImdldFVpZCIsImNhdGVDdHJsIiwiY2F0ZWdvcnkiLCIkZmlyZWJhc2VPYmplY3QiLCJjYXRlZ29yaWVzIiwiQ2F0ZSIsIm5hbWUiLCJ0b3BpY19zbHVnIiwib3JkZXJCeUNoaWxkIiwiZXF1YWxUbyIsInVzZXJzUmVmIiwiYWRkQ2hpbGQiLCJjaGlsZG5hbWUiLCJmb2xsb3dMaXN0IiwidW5Gb2xsb3ciLCJzbHVnIiwidXNlckZvbGxvdyIsImZvbGxvdyIsImV4aXN0cyIsImFyciIsImFsbCIsInRvcGljcyIsIlRTIiwidG9waWNOYW1lIiwiQ2F0ZVNlcnZpY2UiLCIkdGltZW91dCIsIiRsb2ciLCJkYXNoYm9hcmRDdHJsIiwiY2F0ZSIsInRvcGljX2dyaWQiLCJ0YWdzIiwidXNlckNhdGVGb2xsb3ciLCJjYXRlSXNGb2xsb3ciLCJjbG9zZSIsImZvbGxvd0NhdGUiLCJjYXRlX3NsdWciLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsInRyYW5zY2x1ZGUiLCJzY29wZSIsInJldmlldyIsInRvcGljIiwicmVxdWlyZSIsImxpbmsiLCJlbGVtZW50IiwiYXR0cnMiLCJuZ0N0cmwiLCJtYXhUYWdzIiwicGFyc2VJbnQiLCIkcGFyc2VycyIsImxlbmd0aCIsInNwbGljZSIsImhvbWVDdHJsIiwidHJhbnNsYXRpb25zIiwiS0VZX0RBU0hCT0FSRCIsIktFWV9MQU5HVUFHRVMiLCJLRVlfSE9NRSIsIktFWV9SRUdJU1RFUiIsIktFWV9MT0dJTiIsIktFWV9MT0dPVVQiLCJLRVlfRk9MTE9XIiwiS0VZX0ZPTExPV0VSIiwiS0VZX1VORk9MTE9XIiwiS0VZX0ZPTExPV0lORyIsIktFWV9QT1NUIiwiS0VZX1BPU1RFRCIsIktFWV9VUFZPVEUiLCJLRVlfVVBWT1RFRCIsIktFWV9EV05fVk9URSIsIktFWV9EV05fVk9URUQiLCJLRVlfVklFVyIsIktFWV9SRU1PVkUiLCJLRVlfQ0FOQ0VMIiwiS0VZX1FVRVNUSU9OIiwiS0VZX1RPUElDIiwiS0VZX0NIR19QV0QiLCJLRVlfUEFTU1dPUkQiLCJLRVlfT0xEX1BXRCIsIktFWV9ORVdfUFdEIiwiS0VZX05FV19QV0RfQyIsIktFWV9TQVZFIiwiS0VZX1NBVkVfRFJBRlQiLCJLRVlfVEFHUyIsIktFWV9FWFBMT1JFIiwiS0VZX0NPTU1FTlRTIiwiS0VZX1JFUExZIiwiS0VZX1JFVklFVyIsIktFWV9FRElUIiwiS0VZX1RSRU5EIiwiS0VZX1RSRU5ESU5HIiwiS0VZX1dSSVRFX1JFUExZIiwiS0VZX0xBVEVTVF9GRUVEIiwiS0VZX0NPTkZfUkVNT1ZFIiwiS0VZX0NPTkZfUkVNX0MiLCJLRVlfV0hBVF9PTl9VUl9NSU5EIiwiS0VZX1lPVV9XQU5UX0ZPTExPVyIsIktFWV9OT19BQ0NUX1JFR0lTVEVSIiwiS0VZX0NBTlRfQ0hOR19VU0VSIiwiS0VZX1lPVVJfQUNDT1VOVCIsIktFWV9OT1RISU5HX0hFUkUiLCJLRVlfV0hPX1RPX0ZPTExPVyIsIktFWV9DQVRfV0lMTF9BUFBFQVIiLCJLRVlfV0hUX1VSX1NUT1JZIiwiS0VZX1dSVF9DT01NRU5UIiwiS0VZX0ZJUlNUTkFNRSIsIktFWV9MQVNUTkFNRSIsIktFWV9CSVJUSERBWSIsIktFWV9NT05USCIsIktFWV9EQVkiLCJLRVlfRU1BSUwiLCJLRVlfQ09ORl9FTUFJTCIsIktFWV9HRU5ERVIiLCJLRVlfTUFMRSIsIktFWV9GRU1BTEUiLCJLRVlfVVNFUk5BTUUiLCJLRVlfTE9DQVRJT04iLCJLRVlfRURfUFJPRklMRSIsIktFWV9FRF9DSEdfUFdEIiwiS0VZX0VEX1NJVEUiLCJLRVlfRURfUEhPTkUiLCJLRVlfRURfQklPIiwibm90aUN0cmwiLCJub3RpU2VydmljZSIsIm5vdGlmeVRvIiwiJGFkZCIsIm5vdGkiLCJOb3RpZmljYXRpb24iLCJub3RpZnlGb2xsb3dlciIsInRvcGljSWQiLCJnZXRGb2xsb3dlciIsImNoaWxkU25hcHNob3QiLCJ1cGRhdGVOb3RpZmljYXRpb25Db3VudCIsImtleSIsIm5vdGlmeUxvZyIsImZyb20iLCJpc19yZWFkIiwidGltZXN0YW1wIiwiZXJyb3JPYmplY3QiLCJjb2RlIiwiJHNjb3BlIiwiJG1kRGlhbG9nIiwiJG1kTWVkaWEiLCJMYW5ndWFnZXMiLCJwbGFjZXNDdHJsIiwicGxhY2VEZXRhaWxfcmVmIiwicGxhY2VzIiwiYWRkUGxhY2VEZXRhaWxDaGlsZCIsImFyY2hpdmUiLCJBcmNoaXZlIiwidGFnQ3RybCIsIiRxIiwidGFnc1VybCIsImdldFRhZ1JlZiIsImdldFRhZ09iamVjdCIsInRvcGljVGFncyIsImRlZmVycmVkIiwiZGVmZXIiLCJmYiIsInRhZ1NuYXAiLCJ0b3BpY1NuYXAiLCJ0b3BpY0xhbmRpbmdDdHJsIiwiaW5SZXBseUFyciIsInJlcGx5SW5SZXBseSIsImkiLCJyZXBseUlkIiwiJGh0dHAiLCJ0b3BpY0N0cmwiLCJsYW5ndWFnZXMiLCJ1c2VyVXB2b3RlZFRvcGljcyIsInVwdm90ZXMiLCJ1c2VyRG93bnZvdGVkVG9waWNzIiwiZG93bnZvdGVzIiwidXNlckZvbGxvd2luZyIsImZvbGxvd2luZyIsImltYWdlU3RyaW5ncyIsImltYWdlVGV4dCIsImxvYWRCdXN5Iiwic2x1Z1JldHVybiIsImNyaXRlcmlhIiwiY3JpdGVyaWFSZXBseSIsInJldmlld0NyaXRlcmlhIiwiY3JpdFJlcGx5RGF0YSIsIm5ld1RvcGljIiwibG9jYXRpb24iLCJpcEluZm8iLCJib2R5IiwiYXZnUmV2aWV3UmVwbHkiLCJvYmpDb3VudCIsIk9iamVjdCIsImtleXMiLCJhdmciLCJyZXBseVJldmlld0F2ZXJhZ2UiLCJhdmdSZXZpZXdTY29yZSIsInJhdGluZyIsInJlbW92ZVRyYW5zIiwiY2FuY2VsVHJhbnMiLCJjb25maXJtUmVtIiwiY29uZmlybVJlbUNvbnRlbnQiLCJ1c2VyTmFtZSIsInVzZXJJZCIsImdldERpc3BsYXlOYW1lIiwic2hvd01kTG9naW4iLCJldiIsInVzZUZ1bGxTY3JlZW4iLCJjdXN0b21GdWxsc2NyZWVuIiwicGFyZW50IiwiZG9jdW1lbnQiLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJmdWxsc2NyZWVuIiwiZGVjb2RlVGV4dCIsImxvYWRNb3JlIiwibG9hZFRhZ3MiLCJxdWVyeSIsInVwbG9hZEZpbGUiLCJmaWxlcyIsImluZGV4IiwiZmxvd0ZpbGUiLCJmaWxlUmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImV2ZW50IiwidXJpIiwidGFyZ2V0IiwicmVzdWx0IiwicmVhZEFzRGF0YVVSTCIsImZpbGUiLCJzaG93Q29uZmlybVJlbW92ZSIsInRvcGljX293bmVyIiwiY29uZmlybSIsInRpdGxlIiwidGV4dENvbnRlbnQiLCJvayIsImNhbmNlbCIsInJlbW92ZVRvcGljIiwicmVmQ2hpbGQiLCJyZXBseSIsInRvcGljT2JqIiwicmVwbHlBcnIiLCJuZXdSZXBseSIsInJlcGx5Q291bnQiLCJyZXBseUNvdW50UmVmIiwiY29tbWVudCIsInJlcGx5SW5SZXBseUFyciIsImFkZE5ld0Nob2ljZSIsIm5ld0l0ZW1ObyIsImlkIiwicmVtb3ZlQ2hvaWNlIiwibGFzdEl0ZW0iLCJjcmVhdGVUb3BpYyIsImlzRHJhZnQiLCJsb2NhdGlvbkRldGFpbCIsImRldGFpbHMiLCJzbHVnaWZ5IiwiYWRkcmVzcyIsImZvcm1hdHRlZF9hZGRyZXNzIiwibGF0IiwiZ2VvbWV0cnkiLCJsbmciLCJ0eXBlIiwicGhvdG9zIiwicGhvdG9zX3RleHQiLCJkcmFmdCIsInNsdWdUZXh0IiwiZ2V0VG9waWNCeUtleSIsInBvc3RlZCIsImNoZWNrRm9sbG93IiwiZm9sbG93X3VpZCIsImZvbGxvd1VzZXIiLCJmb2xsb3dlciIsInVuZm9sbG93VXNlciIsInVwdm90ZSIsImNhbmNlbERvd252b3RlIiwidXB2b3RlVG9waWMiLCIkdmFsdWUiLCJ1cHZvdGVkIiwiY2FuY2VsVXB2b3RlIiwidW5kb1Vwdm90ZSIsImRvd252b3RlIiwiZG93bnZvdGVUb3BpYyIsInVuZG9Eb3dudm90ZSIsImZvbGxvd1RvcGljIiwiaGlzdG9yeSIsInVuZm9sbG93VG9waWMiLCJ1bmZvbGxvdyIsImdldFRhZyIsImdldFNsdWciLCJjb3VudFVzZXJUb3BpY3MiLCJmb3J0b3BpY1JlZiIsInRvcGljX2tleSIsImxpbWl0VG9GaXJzdCIsImluY3JlbWVudFZpZXciLCJnZXRVcHZvdGVzIiwiYXJyYXkiLCJnZXREb3dudm90ZXMiLCJsaW1pdFRvTGFzdCIsIiRmaWx0ZXIiLCJtZDUiLCJGYWNlYm9vayIsIm5vdGlmeSIsInByb2ZpbGVDdHJsIiwiZmFjZWJvb2siLCJlZGl0SW5pdCIsIm5hbWVFeGlzdCIsImdldFVzZXJQb3N0IiwibGlua0ZhY2Vib29rIiwicmVzcG9uc2UiLCJnZXRMb2dpblN0YXR1cyIsInN0YXR1cyIsImxvZ2dlZEluIiwiYXBpIiwib2xkUHJvZmlsZVZhbHVlIiwidXNlckNyZWF0ZWQiLCJmb2xsb3dDYXRlTGlzdEFyciIsInBob3RvIiwibWVzc2FnZSIsInBvc2l0aW9uIiwiZHVyYXRpb24iLCJzYXZlUHJvZmlsZSIsInJlZGlyZWN0IiwidXBkYXRlZCIsInVzZXJMb2NhdGlvbiIsIiRzYXZlIiwidXBkYXRlTmFtZSIsImZpcnN0bmFtZSIsImxhc3RuYW1lIiwiYWN0aW9uIiwib2xkbmFtZSIsInVwZGF0ZUJpbyIsImJpb2dyYXBoeSIsInVwZGF0ZVByb2ZpbGUiLCJjaGVja1VzZXJuYW1lIiwiY2hlY2tVc2VybmFtZUV4aXN0IiwibWV0aG9kIiwiZ2V0TG9jYXRpb25JUERhdGEiLCIkZ2V0UmVjb3JkIiwidXNlcm5hbWUiLCJmb2xsb3dfaWQiLCJ1c2VyQ2hhbmdlUGFzc3dvcmQiLCJvbGRwYXNzIiwibmV3cGFzcyIsImNoYW5nZVBhc3N3b3JkIiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCJdLCJtYXBwaW5ncyI6IkFBQUEsWUF3b0JBLFNBQUFBLE1BQUFDLEdBRUEs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dkIsSUFHQXlILElBQUFoRCxFQUdBLE9BQUF0RSIsImZpbGUiOiJidWlsZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuXHJcbi8qKlxyXG4gKiBNYWluIG1vZHVsZSBvZiB0aGUgYXBwbGljYXRpb24uXHJcbiAqL1xyXG52YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcCcsIFtcclxuICAgICdmaXJlYmFzZScsXHJcbiAgICAnYW5ndWxhci1tZDUnLCAvLyBFbmNyeXB0IGVtYWlsXHJcbiAgICAndWkucm91dGVyJyxcclxuICAgICduZ01hdGVyaWFsJywgLy8gSW50ZXJmYWNlXHJcbiAgICAnYW5ndWxhck1vbWVudCcsIC8vIFRpbWUgbWFuYWdlbWVudFxyXG4gICAgJ2Zsb3cnLCAvLyBJbWFnZSB1cGxvYWRcclxuICAgICdzbHVnaWZpZXInLCAvLyBDcmVhdGUgU2x1Z3NcclxuICAgICduZ0F1dG9jb21wbGV0ZScsIC8vIEdvb2dsZSBwbGFjZXNcclxuICAgICduZ1RhZ3NJbnB1dCcsIC8vIFRhZ3NcclxuICAgICdjZ05vdGlmeScsIC8vIE5vdGlmaWNhdGlvbiAtIGh0dHBzOi8vZ2l0aHViLmNvbS9jZ3Jvc3MvYW5ndWxhci1ub3RpZnlcclxuICAgICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJywgLy8gVHJhbnNsYXRpb24gLSBodHRwczovL2FuZ3VsYXItdHJhbnNsYXRlLmdpdGh1Yi5pby9cclxuICAgICdmYWNlYm9vaycsIC8vIEZhY2Vib29rIC0gaHR0cHM6Ly9naXRodWIuY29tL0NpdWwvYW5ndWxhci1mYWNlYm9va1xyXG4gICAgJ2FuZ3VsYXItd2ViLW5vdGlmaWNhdGlvbicsIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9zYWdpZWd1cmFyaS9hbmd1bGFyLXdlYi1ub3RpZmljYXRpb25cclxuICAgICdhbmd1bGFyLWZsZXhzbGlkZXInLCAvLyBJbWFnZSBzbGlkZXIgLSBodHRwczovL2dpdGh1Yi5jb20vdGhlbmlrc28vYW5ndWxhci1mbGV4c2xpZGVyXHJcblxyXG4gICAgLy8gRW1vdGljb24gLS0gaHR0cDovL21pc3RpYzEwMC5naXRodWIuaW8vYW5ndWxhci1zbWlsaWVzL1xyXG4gICAgJ25nU2FuaXRpemUnLFxyXG4gICAgJ3VpLmJvb3RzdHJhcCcsIC8vIE9SIG1nY3JlYS5uZ1N0cmFwXHJcbiAgICAnYW5ndWxhci1zbWlsaWVzJyxcclxuXHJcbiAgICAnbmdDb29raWVzJywgLy8gY29va2llcyBzdHVmZlxyXG5cclxuICBdKVxyXG5cclxuICAuY29uZmlnKGZ1bmN0aW9uICgkbWRUaGVtaW5nUHJvdmlkZXIpIHtcclxuICAgICRtZFRoZW1pbmdQcm92aWRlci5kZWZpbmVQYWxldHRlKCdzbGFjaycsIHtcclxuICAgICAgJzUwJzogJ2ZmZWJlZScsXHJcbiAgICAgICcxMDAnOiAnZmZjZGQyJyxcclxuICAgICAgJzIwMCc6ICdlZjlhOWEnLFxyXG4gICAgICAnMzAwJzogJ2U1NzM3MycsXHJcbiAgICAgICc0MDAnOiAnZWY1MzUwJyxcclxuICAgICAgJzUwMCc6ICc0RDM5NEInLCAvLyBwcmltYXJ5IGNvbG91clxyXG4gICAgICAnNjAwJzogJ2U1MzkzNScsXHJcbiAgICAgICc3MDAnOiAnZDMyZjJmJyxcclxuICAgICAgJzgwMCc6ICdjNjI4MjgnLFxyXG4gICAgICAnOTAwJzogJ2I3MWMxYycsXHJcbiAgICAgICdBMTAwJzogJ2ZmOGE4MCcsXHJcbiAgICAgICdBMjAwJzogJ2ZmNTI1MicsXHJcbiAgICAgICdBNDAwJzogJ2ZmMTc0NCcsXHJcbiAgICAgICdBNzAwJzogJ2Q1MDAwMCcsXHJcbiAgICAgICdjb250cmFzdERlZmF1bHRDb2xvcic6ICdsaWdodCcsIC8vIHdoZXRoZXIsIGJ5IGRlZmF1bHQsIHRleHQgKGNvbnRyYXN0KVxyXG4gICAgICAvLyBvbiB0aGlzIHBhbGV0dGUgc2hvdWxkIGJlIGRhcmsgb3IgbGlnaHRcclxuICAgICAgJ2NvbnRyYXN0RGFya0NvbG9ycyc6IFsnNTAnLCAnMTAwJywgLy8gaHVlcyB3aGljaCBjb250cmFzdCBzaG91bGQgYmUgJ2RhcmsnIGJ5IGRlZmF1bHRcclxuICAgICAgICAnMjAwJywgJzMwMCcsICc0MDAnLCAnQTEwMCddLFxyXG4gICAgICAnY29udHJhc3RMaWdodENvbG9ycyc6IHVuZGVmaW5lZCAvLyBjb3VsZCBhbHNvIHNwZWNpZnkgdGhpcyBpZiBkZWZhdWx0IHdhcyAnZGFyaydcclxuICAgIH0pXHJcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ2RlZmF1bHQnKVxyXG4gICAgICAucHJpbWFyeVBhbGV0dGUoJ3NsYWNrJylcclxuICB9KVxyXG5cclxuICAvLyBGYWNlYm9vayBDb25maWdcclxuICAuY29uZmlnKFxyXG4gICAgZnVuY3Rpb24gKEZhY2Vib29rUHJvdmlkZXIpIHtcclxuICAgICAgdmFyIG15QXBwSWQgPSAnOTMxMzc2MTIwMjYzODU2J1xyXG4gICAgICBGYWNlYm9va1Byb3ZpZGVyLnNldEFwcElkKG15QXBwSWQpXHJcbiAgICAgIEZhY2Vib29rUHJvdmlkZXIuaW5pdChteUFwcElkKVxyXG4gICAgfVxyXG4gIClcclxuXHJcbiAgLy9TZWN1cml0eSBmb3IgVHJhbnNsYXRlXHJcbiAgLmNvbmZpZyhmdW5jdGlvbiAoJHRyYW5zbGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAkdHJhbnNsYXRlUHJvdmlkZXIucHJlZmVycmVkTGFuZ3VhZ2UoJ0VuZycpO1xyXG4gICAgLy8gRW5hYmxlIGVzY2FwaW5nIG9mIEhUTUxcclxuICAgICR0cmFuc2xhdGVQcm92aWRlci51c2VTYW5pdGl6ZVZhbHVlU3RyYXRlZ3koJ2VzY2FwZScpO1xyXG4gIH0pXHJcblxyXG5cclxuXHJcbiAgLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgLnN0YXRlKCdob21lJywge1xyXG4gICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwgYXMgIGhvbWVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdob21lL2hvbWUuaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICByZXF1aXJlTm9BdXRoOiBmdW5jdGlvbiAoJHN0YXRlLCBBdXRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdkYXNoYm9hcmQnKVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvclxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGZlZWQ6IGZ1bmN0aW9uIChUb3BpY3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MubGF0ZXN0RmVlZCgpXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJ2xvZ2luLWZvcm1AaG9tZSc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9sb2dpbi1mb3JtLmh0bWwnXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJ2hlYWRlckBob21lJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcblxyXG4gICAgICAvL1RyZW5kaW5nXHJcbiAgICAgIC5zdGF0ZSgndHJlbmRpbmcnLCB7XHJcbiAgICAgICAgdXJsOiAnL2V4cGxvcmUvdHJlbmRpbmcnLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwgYXMgIGhvbWVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdob21lL3RyZW5kLmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgZmVlZDogZnVuY3Rpb24gKFRvcGljcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5sYXRlc3RGZWVkKClcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQHRyZW5kaW5nJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcblxyXG4gICAgICAvLyBDYXRlZ29yeSBMYW5kaW5nXHJcbiAgICAgIC5zdGF0ZSgnY2F0ZWdvcnknLCB7XHJcbiAgICAgICAgdXJsOiAnL2NhdGVnb3J5L3tTbHVnfScsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDYXRlQ3RybCBhcyBjYXRlQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2F0ZWdvcnkvaW5kZXguaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAvLyBHZXR0aW5nIENhdGVnb3J5IGRldGFpbHNcclxuICAgICAgICAgICAgICBjYXRlTmFtZTogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgQ2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDYXRlZ29yeS5nZXROYW1lKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKClcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIC8vIEdldHRpbmcgbGlzdCBvZiBjYXRlZ29yeSB0b3BpY3MgaGVyZVxyXG4gICAgICAgICAgICAgIGNhdGVUb3BpY3M6IGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIFRvcGljcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5saXN0KCRzdGF0ZVBhcmFtcy5TbHVnKVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAY2F0ZWdvcnknOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuXHJcbiAgICAgIC8vIFBsYWNlcyBsYW5kaW5nIHBhZ2VcclxuICAgICAgLnN0YXRlKCdwbGFjZXMnLCB7XHJcbiAgICAgICAgdXJsOiAnL3BsYWNlcy97cGxhY2Vfc2x1Z30ve3BsYWNlX2lkfScsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICdoZWFkZXJAcGxhY2VzJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQbGFjZXNDdHJsIGFzIHBsYWNlc0N0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BsYWNlL2luZGV4Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgcGxhY2VMYW5kaW5nOiBmdW5jdGlvbiAoUGxhY2VzLCBUb3BpY3MsICRzdGF0ZVBhcmFtcywgJGZpcmViYXNlQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhXHJcbiAgICAgICAgICAgICAgICBQbGFjZXMuZ2V0UGxhY2VSZWYoJHN0YXRlUGFyYW1zLnBsYWNlX2lkKS5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YSA9IHNuYXBzaG90LnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNuYXBzaG90LnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgICAgICAgLy8gcmV0dXJuICAkZmlyZWJhc2VBcnJheShQbGFjZXMuZ2V0UGxhY2VSZWYoJHN0YXRlUGFyYW1zLnBsYWNlX2lkKSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG5cclxuICAgICAgLy8gVGFnIGxhbmRpbmcgcGFnZVxyXG4gICAgICAuc3RhdGUoJ3RhZycsIHtcclxuICAgICAgICB1cmw6ICcvdGFnL3tUYWd9JyxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJ2hlYWRlckB0YWcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1RhZ0N0cmwgYXMgdGFnQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGFnL2luZGV4Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgdGFnTmFtZTogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzdGF0ZVBhcmFtcy5UYWdcclxuICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICB0YWdMYW5kaW5nOiBmdW5jdGlvbiAoVG9waWNzLCAkc3RhdGVQYXJhbXMsIFRhZ3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YWcgPSAkc3RhdGVQYXJhbXMuVGFnXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgZmIgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwpXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgZGF0YVJldCA9ICcnXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gc2hvdyhUYWdzLnRvcGljVGFncyh0YWcpKVxyXG4gICAgICAgICAgICAgICAgLypyZXR1cm4gZmIuY2hpbGQoJ3RhZ3MvJyArIHRhZylcclxuICAgICAgICAgICAgICAgICAgICAub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHRhZ1NuYXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYi5jaGlsZCgndG9waWNzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9yZGVyQnlDaGlsZChcInRhZ3NcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVxdWFsVG8odGFnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ3ZhbHVlJywgZnVuY3Rpb24gKHRvcGljU25hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93KCBleHRlbmQoe30sIHRhZ1NuYXAudmFsKCksIHRvcGljU25hcC52YWwoKSkgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC8hKmRhdGFSZXQgPSBleHRlbmQoe30sIHRhZ1NuYXAudmFsKCksIHRvcGljU25hcC52YWwoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkZmlyZWJhc2VBcnJheShkYXRhUmV0KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YVJldFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAqIS9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9KSovXHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgdGFnT2JqID0gVGFncy5nZXRUYWdPYmplY3QodGFnKVxyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHRhZ09iai4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgIHJldHVybiBUb3BpY3MudG9waWNzQnlUYWcodGFnKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uIChzbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZXh0ZW5kKHt9LCB0YWdPYmouJHZhbHVlLCBzbmFwLnZhbCgpKSlcclxuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gZXh0ZW5kKHt9LCB0YWdPYmouJHZhbHVlLCBzbmFwLnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgLy8gICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgZmIub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwc2hvdCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB2YXIgZGF0YSA9IHNuYXBzaG90LnZhbCgpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihkYXRhU25hcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGluZGV4ID0gd29yZC5pbmRleE9mKCcgJylcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBmaXJzdCA9IGRhdGFTbmFwLk5hbWUuc3Vic3RyaW5nKDAsIGluZGV4KVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGxhc3QgPSB3b3JkLnN1YnN0cmluZyhpbmRleCArIDEpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB2YXIgY2FuZGlkYXRlID0gZGF0YVNuYXAuTmFtZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5pbmRleE9mKGZpcnN0KSA+PSAwICYmIGNhbmRpZGF0ZS5pbmRleE9mKGxhc3QpID49IDApXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YVNuYXAuQ0lEKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICByZWplY3QoJ1NvbWUgc29ydCBvZiBmYWlsdXJlJylcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC8vICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gfSlcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLnRvcGljc0J5VGFnKHRhZylcclxuICAgICAgICAgICAgICAvLyAub25jZSgndmFsdWUnLCBmdW5jdGlvbihzbmFwKXtcclxuICAgICAgICAgICAgICAvLyB9KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcblxyXG4gICAgICAvLyBUb3BpYyBsYW5kaW5nIHBhZ2VcclxuICAgICAgLnN0YXRlKCd0b3BpYycsIHtcclxuICAgICAgICB1cmw6ICcve1NsdWd9JyxcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICBTbHVnOiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCRzdGF0ZSwgTm90aVNlcnZpY2UsQXV0aCkge1xyXG4gICAgICAgICAgICBOb3RpU2VydmljZS51bnJlYWROb3RpZmljYXRpb24oQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCk7XHJcbiAgICAgICAgICAgICRzdGF0ZVBhcmFtcy5TbHVnID0gZGVjb2RlVVJJQ29tcG9uZW50KCRzdGF0ZVBhcmFtcy5TbHVnKVxyXG4gICAgICAgICAgICBpZigkc3RhdGVQYXJhbXMuU2x1ZyA9PSAnJyl7XHJcbiAgICAgICAgICAgICAgJHN0YXRlLmdvKCdkYXNoYm9hcmQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUb3BpY0xhbmRpbmdDdHJsIGFzIHRvcGljTGFuZGluZ0N0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RvcGljcy9pbmRleC5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIGlzT3duZXI6IGZ1bmN0aW9uIChBdXRoLCBVc2VycywgJHN0YXRlUGFyYW1zLCBUb3BpY3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3BpY1VpZCA9ICcnXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB1c2VyIGxvZ2luLCBjaGVjayBpZiB0aGV5IGFyZSB0aGUgdG9waWMgb3duZXJcclxuICAgICAgICAgICAgICAgIGlmIChBdXRoLnJlZi5nZXRBdXRoKCkpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5mb3J0b3BpYygkc3RhdGVQYXJhbXMuU2x1ZykuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVswXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b3BpY1VpZCA9IGRhdGFbMF0udWlkXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCA9PSB0b3BpY1VpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB0b3BpY0xhbmRpbmc6IGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIFRvcGljcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5mb3J0b3BpYygkc3RhdGVQYXJhbXMuU2x1ZykuJGxvYWRlZCgpO1xyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcmVwbHlMaXN0OiBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBUb3BpY3MsICRzdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvcGljS2V5ID0gJydcclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuZm9ydG9waWMoJHN0YXRlUGFyYW1zLlNsdWcpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhWzBdICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3BpY0tleSA9IGRhdGFbMF0uJGlkXHJcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCd0b3BpYy1ub3Rmb3VuZCcpXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5yZXBseUxpc3QodG9waWNLZXkpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgdmlld0RhdGE6IGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIFRvcGljcywgVXNlcnMsIEF1dGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3BpY0tleSwgdmlld3NcclxuICAgICAgICAgICAgICAgIHZhciB0aW1lID0gbW9tZW50KCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlPYmogPSB7J3VzZXJJUCc6ICcnLCAnY3JlYXRlZCc6IHRpbWV9XHJcbiAgICAgICAgICAgICAgICBVc2Vycy5nZXRMb2NhdGlvbklQKCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBoaXN0b3J5T2JqLnVzZXJJUCA9IGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBoaXN0b3J5T2JqLnVzZXJJUCA9IGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuZ2V0VG9waWNCeVNsdWcoJHN0YXRlUGFyYW1zLlNsdWcpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhWzBdLiRpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3BpY0tleSA9IGRhdGFbMF0uJGlkXHJcbiAgICAgICAgICAgICAgICAgICAgdmlld3MgPSBUb3BpY3MuZ2V0Vmlld3ModG9waWNLZXkpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzLm9iai4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY291bnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3cy5yZWYuY2hpbGQoJ2NvdW50Jykuc2V0KDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3cy5yZWYuY2hpbGQoJ2NvdW50Jykuc2V0KGRhdGEuY291bnQgKyAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBhdXRoLnVpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmlld3MucmVmLmNoaWxkKCdoaXN0b3J5JykuY2hpbGQodWlkKS5wdXNoKCkuc2V0KGhpc3RvcnlPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgndmlld3MnKS5jaGlsZCh0b3BpY0tleSkucHVzaCgpLnNldChoaXN0b3J5T2JqKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXdzLm9ialxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGZvbGxvd2VyczogZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgVG9waWNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmdldFRvcGljQnlTbHVnKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgdG9waWNLZXkgPSBkYXRhWzBdLiRpZFxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmdldEZvbGxvd2Vycyh0b3BpY0tleSkub2JqLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQHRvcGljJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIFRvcGljIG5vdCBmb3VuZFxyXG4gICAgICAuc3RhdGUoJ3RvcGljLW5vdGZvdW5kJywge1xyXG4gICAgICAgIHVybDogJy9lcnIvbm90Zm91bmQnXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBQcm9maWxlIGxhbmRpbmcgcGFnZVxyXG4gICAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XHJcbiAgICAgICAgdXJsOiAnL3Byb2ZpbGUve05hbWV9JyxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL2luZGV4Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKEF1dGgsIFVzZXJzLCAkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChBdXRoLnJlZi5nZXRBdXRoKCkpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGVCeVVzZXJuYW1lKCRzdGF0ZVBhcmFtcy5OYW1lKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9maWxlWzBdLiRpZCA9PSBBdXRoLnJlZi5nZXRBdXRoKCkudWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHVzZXJQb3N0czogZnVuY3Rpb24gKFVzZXJzLCBUb3BpY3MsICRzdGF0ZVBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGVCeVVzZXJuYW1lKCRzdGF0ZVBhcmFtcy5OYW1lKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAocHJvZmlsZVswXS4kaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmNyZWF0ZWRCeShwcm9maWxlWzBdLiRpZClcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uICgkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHJvb3RTY29wZSwgQXV0aCwgVXNlcnMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlQnlVc2VybmFtZSgkc3RhdGVQYXJhbXMuTmFtZSkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2ZpbGVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJ2hlYWRlckBwcm9maWxlJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBQcm9maWxlIGxhbmRpbmcgcGFnZVxyXG4gICAgICAvLyBAcHJvZmlsZUN0cmxcclxuICAgICAgLnN0YXRlKCdhY2Njb3VudEVkaXQnLCB7XHJcbiAgICAgICAgdXJsOiAnL2FjY291bnQvZWRpdCcsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICdwYXNzd29yZEVkaXRAYWNjY291bnRFZGl0Jzoge1xyXG4gICAgICAgICAgICB1cmw6ICcvYWNjb3VudC9jaGFuZ2VQYXNzd29yZCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJvZmlsZS9wYXNzd2QuaHRtbCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAndXNlckVkaXRAYWNjY291bnRFZGl0Jzoge1xyXG4gICAgICAgICAgICB1cmw6ICcvYWNjb3VudC9lZGl0LWZvcm0nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Byb2ZpbGUvZWRpdC1mb3JtLmh0bWwnXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL2VkaXQuaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uICgkc3RhdGUsICRyb290U2NvcGUsIEF1dGgsIFVzZXJzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGUoYXV0aC51aWQpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChwcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUuZGlzcGxheU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9maWxlXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZ2V0X3N0YXJ0ZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGF1dGg6IGZ1bmN0aW9uICgkc3RhdGUsIFVzZXJzLCBBdXRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLmNhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJ2hlYWRlckBhY2Njb3VudEVkaXQnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5zdGF0ZSgnYWNjb3VudFBhc3N3b3JkJywge1xyXG4gICAgICAgIHVybDogJy9hY2NvdW50L2NoYW5nZVBhc3N3b3JkJyxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3Byb2ZpbGUvcGFzc3dkLmh0bWwnXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAuc3RhdGUoJ2FjY291bnRVc2VyRWRpdCcsIHtcclxuICAgICAgICB1cmw6ICcvYWNjb3VudC9lZGl0LWZvcm0nLFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAncHJvZmlsZS9lZGl0LWZvcm0uaHRtbCdcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIERhc2hib2FyZFxyXG4gICAgICAvLyBAcHJvZmlsZUN0cmxcclxuICAgICAgLnN0YXRlKCdkYXNoYm9hcmQnLCB7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvZGFzaGJvYXJkJyxcclxuICAgICAgICBjb250cm9sbGVyOiAnRGFzaGJvYXJkQ3RybCBhcyBkYXNoYm9hcmRDdHJsJyxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdkYXNoYm9hcmQvaW5kZXguaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uICgkc3RhdGUsICRyb290U2NvcGUsIEF1dGgsIFVzZXJzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGUoYXV0aC51aWQpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChwcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gc3RhdCBvYmplY3RcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXByb2ZpbGUuc3RhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgVXNlcnMudXNlclJlZihhdXRoLnVpZCkuY2hpbGQoJ3N0YXQvdXB2b3RlZC9jb3VudCcpLnNldCgwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgVXNlcnMudXNlclJlZihhdXRoLnVpZCkuY2hpbGQoJ3N0YXQvcG9zdGVkL2NvdW50Jykuc2V0KDApXHJcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgnc3RhdC9jb21tZW50L2NvdW50Jykuc2V0KDApXHJcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci9jb3VudCcpLnNldCgwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgVXNlcnMudXNlclJlZihhdXRoLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93aW5nL2NvdW50Jykuc2V0KDApXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBubyBkaXNwbGF5bmFtZSAtIGdvIHRvIGdldF9zdGFydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGUuZGlzcGxheU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9maWxlXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZ2V0X3N0YXJ0ZWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBhdXRoOiBmdW5jdGlvbiAoJHN0YXRlLCBVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAZGFzaGJvYXJkJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIEZvbGxsb3cgQ2F0ZWdvcnlcclxuICAgICAgLy8gQHByb2ZpbGVDdHJsXHJcbiAgICAgIC5zdGF0ZSgnZm9sbG93X2NhdGVzJywge1xyXG4gICAgICAgIHVybDogJy91c2VyL2ZvbGxvdy1jYXRlZ29yaWVzJyxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhdXRoL2ZvbGxvdy1jYXRlZ29yaWVzLmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgdXNlclBvc3RzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIGlzT3duZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBwcm9maWxlOiBmdW5jdGlvbiAoVXNlcnMsIEF1dGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkudGhlbihmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gVXNlcnMuZ2V0UHJvZmlsZShhdXRoLnVpZCkuJGxvYWRlZCgpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgYXV0aDogZnVuY3Rpb24gKCRzdGF0ZSwgVXNlcnMsIEF1dGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkuY2F0Y2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQGZvbGxvd19jYXRlcyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBHZXR0aW5nIHN0YXJ0ZWRcclxuICAgICAgLy8gQHByb2ZpbGVDdHJsXHJcbiAgICAgIC5zdGF0ZSgnZ2V0X3N0YXJ0ZWQnLCB7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvZ2V0X3N0YXJ0ZWQnLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZmlsZUN0cmwgYXMgcHJvZmlsZUN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGgvZ2V0X3N0YXJ0ZWQuaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHByb2ZpbGU6IGZ1bmN0aW9uIChVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlKGF1dGgudWlkKS4kbG9hZGVkKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBhdXRoOiBmdW5jdGlvbiAoJHN0YXRlLCBVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAZ2V0X3N0YXJ0ZWQnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLnN0YXRlKCdsb2dpbicsIHtcclxuICAgICAgICB1cmw6ICcvdXNlci9sb2dpbicsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aC9sb2dpbi5odG1sJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdsb2dpbi1mb3JtQGxvZ2luJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL2xvZ2luLWZvcm0uaHRtbCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQGxvZ2luJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5zdGF0ZSgncmVnaXN0ZXInLCB7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvcmVnaXN0ZXInLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGgvcmVnaXN0ZXIuaHRtbCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQHJlZ2lzdGVyJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgcmVxdWlyZU5vQXV0aDogZnVuY3Rpb24gKCRzdGF0ZSwgQXV0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2hvbWUnKVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gZXJyb3JcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpXHJcbiAgfSlcclxuXHJcbiAgLmZpbHRlcignb3JkZXJPYmplY3RCeScsIGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbXMsIGZpZWxkLCByZXZlcnNlKSB7XHJcbiAgICAgIHZhciBmaWx0ZXJlZCA9IFtdXHJcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBmaWx0ZXJlZC5wdXNoKGl0ZW0uJGlkKS5zZXQoaXRlbSlcclxuICAgICAgfSlcclxuICAgICAgZmlsdGVyZWQuc29ydChmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgICAgIHJldHVybiAoYVtmaWVsZF0gPiBiW2ZpZWxkXSA/IDEgOiAtMSlcclxuICAgICAgfSlcclxuICAgICAgaWYgKHJldmVyc2UpIGZpbHRlcmVkLnJldmVyc2UoKVxyXG4gICAgICByZXR1cm4gZmlsdGVyZWRcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAuZmlsdGVyKCdkZWNvZGVVUkknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgcmV0dXJuIHRleHQgPyBkZWNvZGVVUkkodGV4dCkgOiAnJ1xyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEZvcm1hdHRpbmcgdGV4dHMgdG8gaW5jbHVkZSBuZXcgbGluZVxyXG4gIC5maWx0ZXIoJ25sMmJyJywgZnVuY3Rpb24gKCRzY2UpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICByZXR1cm4gdGV4dCA/ICRzY2UudHJ1c3RBc0h0bWwodGV4dC5yZXBsYWNlKC9cXG4vZywgJzxici8+JykpIDogJydcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAuY29uc3RhbnQoJ0ZpcmViYXNlVXJsJywgJ2h0dHBzOi8vYm14eXouZmlyZWJhc2Vpby5jb20vJylcclxuXHJcbmZ1bmN0aW9uIHNob3cgKGRhdGEpIHtcclxuICBjb25zb2xlLmxvZyhkYXRhKVxyXG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKVxyXG59XHJcblxyXG4vLyBmb3Igam9pbmluZyAtIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL2thdG93dWxmLzY1OTgyMzhcclxuZnVuY3Rpb24gZXh0ZW5kIChiYXNlKSB7XHJcbiAgdmFyIHBhcnRzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKVxyXG4gIHBhcnRzLmZvckVhY2goZnVuY3Rpb24gKHApIHtcclxuICAgIGlmIChwICYmIHR5cGVvZiAocCkgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGZvciAodmFyIGsgaW4gcCkge1xyXG4gICAgICAgIGlmIChwLmhhc093blByb3BlcnR5KGspKSB7XHJcbiAgICAgICAgICBiYXNlW2tdID0gcFtrXVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgcmV0dXJuIGJhc2VcclxufVxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ1RvcGljQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwkc2NvcGUsJHJvb3RTY29wZSwgJG1kRGlhbG9nLCAkbWRNZWRpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRodHRwLEZpcmViYXNlVXJsLCR0cmFuc2xhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NlcnZpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb3RpU2VydmljZSxUYWdzLCBUb3BpY3MsIEF1dGgsIFVzZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2x1ZyxQbGFjZXMsIExhbmd1YWdlcyxBcmNoaXZlKXtcblxuICAgIHZhciB0b3BpY0N0cmwgPSB0aGlzO1xuXG5cbiAgICAvL1BhcnNlciBoZXJlXG4gICAgdG9waWNDdHJsLnRhZ3MgICAgICA9IFRhZ3M7XG4gICAgdG9waWNDdHJsLnRvcGljcyAgICA9IFRvcGljcztcbiAgICB0b3BpY0N0cmwuYXV0aCAgICAgID0gQXV0aDtcbiAgICB0b3BpY0N0cmwudXNlcnMgICAgID0gVXNlcnM7XG4gICAgdG9waWNDdHJsLmxhbmd1YWdlcyA9IExhbmd1YWdlcztcbiAgICB0b3BpY0N0cmwucGxhY2VzICAgID0gUGxhY2VzO1xuICAgIHRvcGljQ3RybC5hcmNoaXZlICAgPSBBcmNoaXZlO1xuICAgIHRvcGljQ3RybC5ub3RpICAgICAgPSBOb3RpU2VydmljZTtcblxuICAgIGlmKHRvcGljQ3RybC5hdXRoLnJlZi5nZXRBdXRoKCkgIT0gbnVsbCApe1xuICAgICAgdG9waWNDdHJsLnByb2ZpbGUgID0gdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUodG9waWNDdHJsLmF1dGgucmVmLmdldEF1dGgoKS51aWQpO1xuICAgICAgdG9waWNDdHJsLnVpZCA9IHRvcGljQ3RybC5wcm9maWxlLiRpZDtcbiAgICAgIHRvcGljQ3RybC51c2VyUmVmID0gdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCk7XG4gICAgICB0b3BpY0N0cmwudXNlclVwdm90ZWRUb3BpY3MgPSB0b3BpY0N0cmwudXNlcnMudXB2b3Rlcyh0b3BpY0N0cmwudWlkKTtcbiAgICAgIHRvcGljQ3RybC51c2VyRG93bnZvdGVkVG9waWNzID0gdG9waWNDdHJsLnVzZXJzLmRvd252b3Rlcyh0b3BpY0N0cmwudWlkKTtcbiAgICAgIHRvcGljQ3RybC51c2VyRm9sbG93aW5nID0gdG9waWNDdHJsLnVzZXJzLmZvbGxvd2luZyh0b3BpY0N0cmwudWlkKTtcbiAgICB9XG4gICAgZWxzZXtcbiAgICAgIHRvcGljQ3RybC5wcm9maWxlID0nJztcbiAgICAgIHRvcGljQ3RybC51aWQgPSAnJztcbiAgICAgIHRvcGljQ3RybC51c2VyUmVmID0gJyc7XG4gICAgfVxuXG5cblxuICAgIC8vUHJlc2V0IFBhcmFtZXRlcnNcbiAgICB0b3BpY0N0cmwuaW1hZ2VTdHJpbmdzICA9IFtdO1xuICAgIHRvcGljQ3RybC5pbWFnZVRleHQgICAgID0gW107XG4gICAgdG9waWNDdHJsLmluUmVwbHlBcnIgICAgPSBbXTtcbiAgICB0b3BpY0N0cmwubG9hZEJ1c3kgICAgICA9IGZhbHNlO1xuICAgIHRvcGljQ3RybC5zbHVnUmV0dXJuICAgID0gbnVsbDtcbiAgICB0b3BpY0N0cmwuY3JpdGVyaWEgICAgICA9IGZhbHNlO1xuICAgIHRvcGljQ3RybC5jcml0ZXJpYVJlcGx5ID0gbnVsbDtcbiAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWE9ZmFsc2U7XG4gICAgdG9waWNDdHJsLmNyaXRSZXBseURhdGEgPSBudWxsO1xuXG4gICAgLy9pZiBhbGxvdyBudWxsIGluIHRoZSBmb3JtXG4gICAgdG9waWNDdHJsLm5ld1RvcGljICAgICAgPSB7XG4gICAgICAnbG9jYXRpb24nOiAnJyxcbiAgICAgICd1cmwnIDogJycsXG4gICAgICAnaXBJbmZvJzogJycsXG4gICAgICAndGFncyc6ICcnLFxuICAgICAgJ2JvZHknOiAnJ1xuICAgIH1cblxuXG4gICAgLy9DYWxjIGF2ZXJhZ2UgcmV2aWV3IGlucHV0IGluIHJlcGx5XG4gICAgdG9waWNDdHJsLmF2Z1Jldmlld1JlcGx5ID0gZnVuY3Rpb24oKXtcblxuICAgICAgdmFyIG9iakNvdW50ID0gT2JqZWN0LmtleXModG9waWNDdHJsLmNyaXRlcmlhUmVwbHkpLmxlbmd0aDtcbiAgICAgIHZhciBhdmcgPSAwXG4gICAgICBmb3IodmFyIGk9MDtpPG9iakNvdW50O2krKyl7XG4gICAgICAgIGF2ZyA9IGF2ZyArIHRvcGljQ3RybC5jcml0ZXJpYVJlcGx5W2ldO1xuICAgICAgfVxuXG4gICAgICB0b3BpY0N0cmwucmVwbHlSZXZpZXdBdmVyYWdlID0gYXZnL29iakNvdW50O1xuXG4gICAgICBjb25zb2xlLmxvZyh0b3BpY0N0cmwuY3JpdGVyaWFSZXBseSk7XG5cbiAgICAgIHRvcGljQ3RybC5jcml0UmVwbHlEYXRhID0geyBhdmc6IHRvcGljQ3RybC5yZXBseVJldmlld0F2ZXJhZ2UsIGRhdGE6IHRvcGljQ3RybC5jcml0ZXJpYVJlcGx5fVxuICAgIH1cblxuXG4gICAgLy9HZXQgdGhlIGF2ZXJhZ2Ugc2NvcmUgZnJvbSBjcml0ZXJpYSB2YWx1ZXNcbiAgICB0b3BpY0N0cmwuYXZnUmV2aWV3U2NvcmUgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgIGlmKGRhdGEpXG4gICAgICB7XG4gICAgICB2YXIgYXZnID0wO1xuICAgICAgZm9yKHZhciBpPTA7aTxkYXRhLmxlbmd0aDtpKyspe1xuICAgICAgICBhdmcgPSBhdmcgKyBkYXRhW2ldLnJhdGluZztcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdmcvZGF0YS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvL0xhYmVsIGZvciByZW1vdmUgdG9waWNzXG4gICAgJHRyYW5zbGF0ZShbJ0tFWV9SRU1PVkUnLCAnS0VZX0NBTkNFTCcsJ0tFWV9DT05GX1JFTU9WRScsJ0tFWV9DT05GX1JFTV9DJ10pLnRoZW4oZnVuY3Rpb24gKHRyYW5zbGF0aW9ucykge1xuICAgICAgdG9waWNDdHJsLnJlbW92ZVRyYW5zID0gdHJhbnNsYXRpb25zLktFWV9SRU1PVkU7XG4gICAgICB0b3BpY0N0cmwuY2FuY2VsVHJhbnMgPSB0cmFuc2xhdGlvbnMuS0VZX0NBTkNFTDtcbiAgICAgIHRvcGljQ3RybC5jb25maXJtUmVtICA9IHRyYW5zbGF0aW9ucy5LRVlfQ09ORl9SRU1PVkU7XG4gICAgICB0b3BpY0N0cmwuY29uZmlybVJlbUNvbnRlbnQgPSAgdHJhbnNsYXRpb25zLktFWV9DT05GX1JFTV9DO1xuICAgIH0pO1xuXG5cbiAgICB0b3BpY0N0cmwudXNlck5hbWUgPSBmdW5jdGlvbih1c2VySWQpe1xuICAgICAgaWYodXNlcklkIT0gbnVsbCl7XG4gICAgICAgIHJldHVybiB0b3BpY0N0cmwudXNlcnMuZ2V0RGlzcGxheU5hbWUodXNlcklkKTtcbiAgICAgIH1cbiAgICB9XG5cblxuXG5cbiAgICAvL0xvZ2luIGZvciBtYXRlcmlhbFxuICAgIHRvcGljQ3RybC5zaG93TWRMb2dpbiA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICB2YXIgdXNlRnVsbFNjcmVlbiA9ICgkbWRNZWRpYSgnc20nKSB8fCAkbWRNZWRpYSgneHMnKSkgJiYgJHNjb3BlLmN1c3RvbUZ1bGxzY3JlZW47XG4gICAgICAkbWREaWFsb2cuc2hvdyh7XG4gICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL21kLWxvZ2luLWZvcm0uaHRtbCcsXG4gICAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG4gICAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuICAgICAgICAgIGNsaWNrT3V0c2lkZVRvQ2xvc2U6IHRydWUsXG4gICAgICAgICAgZnVsbHNjcmVlbjogdXNlRnVsbFNjcmVlblxuICAgICAgICB9KVxuICAgIH1cblxuXG5cbiAgICB0b3BpY0N0cmwuZGVjb2RlVGV4dCA9IGZ1bmN0aW9uKHRleHQpe1xuICAgICAgLy9yZXR1cm4gJGZpbHRlcignc2x1Z2lmeScpKGl0ZW0ubmFtZSk7XG4gICAgICBjb25zb2xlLmxvZyhkZWNvZGVVUkkodGV4dCkpO1xuICAgICAgcmV0dXJuIGRlY29kZVVSSSh0ZXh0KTtcbiAgICB9XG5cblxuICAgIHRvcGljQ3RybC5sb2FkTW9yZSA9IGZ1bmN0aW9uKGl0ZW1zKSB7XG4gICAgICB0b3BpY0N0cmwubG9hZEJ1c3kgPSB0cnVlO1xuICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGF0YS5wdXNoKGl0ZW1zW2ldKTtcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9O1xuXG4gICAgdG9waWNDdHJsLmxvYWRUYWdzID0gZnVuY3Rpb24ocXVlcnkpIHtcbiAgICAgIGNvbnNvbGUubG9nKHRvcGljQ3RybC50YWdzLnRhZ3NVcmwoKSk7XG4gICAgfTtcblxuXG4gICAgLyp0b3BpY0N0cmwudXNlcnMuZ2V0TG9jYXRpb25JUCgpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmlwSW5mbyA9IGRhdGE7XG4gICAgfSk7Ki9cblxuXG4gICAgLy9VcGxvYWQgUHJvZmlsZSBpbWFnZVxuICAgIHRvcGljQ3RybC51cGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZXMsaW5kZXgpIHtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChmaWxlcywgZnVuY3Rpb24gKGZsb3dGaWxlLCBpbmRleCkge1xuICAgICAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgdmFyIHVyaSA9IGV2ZW50LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgdG9waWNDdHJsLmltYWdlU3RyaW5nc1tpbmRleF0gPSB1cmk7XG4gICAgICAgIH07XG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChmbG93RmlsZS5maWxlKTtcbiAgICAgIH0pXG4gICAgfTtcblxuXG4gICAgLy9TaG93IGNvbmZpcm0gcmVtb3ZlIHRvcGljXG4gICAgdG9waWNDdHJsLnNob3dDb25maXJtUmVtb3ZlID0gZnVuY3Rpb24oZXYsdG9waWNfb3duZXIsb2JqKXtcbiAgICAgIC8vIEFwcGVuZGluZyBkaWFsb2cgdG8gZG9jdW1lbnQuYm9keSB0byBjb3ZlciBzaWRlbmF2IGluIGRvY3MgYXBwXG4gICAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcbiAgICAgICAgLnRpdGxlKHRvcGljQ3RybC5jb25maXJtUmVtKVxuICAgICAgICAudGV4dENvbnRlbnQodG9waWNDdHJsLmNvbmZpcm1SZW1Db250ZW50KVxuICAgICAgICAudGFyZ2V0RXZlbnQoZXYpXG4gICAgICAgIC5vayh0b3BpY0N0cmwucmVtb3ZlVHJhbnMpXG4gICAgICAgIC5jYW5jZWwodG9waWNDdHJsLmNhbmNlbFRyYW5zKTtcbiAgICAgICRtZERpYWxvZy5zaG93KGNvbmZpcm0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmKHRvcGljQ3RybC5yZW1vdmVUb3BpYyh0b3BpY19vd25lcixvYmopKXtcbiAgICAgICAgICAkc3RhdGUuZ28oJ2Rhc2hib2FyZCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvL1JlbW92ZSB0b3BpY1xuICAgIHRvcGljQ3RybC5yZW1vdmVUb3BpYyA9IGZ1bmN0aW9uKHRvcGljX293bmVyLG9iail7XG4gICAgICAvL3ZlcmlmeSBpZiB0aGUgdG9waWMgb3duZXIgYW5kIHRoZSBsb2dpbiBvd25lciBpcyB0aGUgc2FtZSBwcGxcbiAgICAgIGlmKHRvcGljX293bmVyID09IHRvcGljQ3RybC51aWQpe1xuICAgICAgICBtb3ZlRmJSZWNvcmQodG9waWNDdHJsLnRvcGljcy5yZWZDaGlsZChvYmouJGlkKSwgdG9waWNDdHJsLmFyY2hpdmUuYWRkQ2hpbGQob2JqLiRpZCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vUmVwbHkgdG8gdG9waWNcbiAgICB0b3BpY0N0cmwucmVwbHkgPSBmdW5jdGlvbih0b3BpY09iail7XG5cbiAgICAgIHRvcGljQ3RybC50b3BpY3MucmVwbHlBcnIodG9waWNPYmouJGlkKS4kYWRkKHtcbiAgICAgICAgdG9waWNJZDogIHRvcGljT2JqLiRpZCxcbiAgICAgICAgYm9keTogICAgIHRvcGljQ3RybC5uZXdSZXBseS5ib2R5LFxuICAgICAgICB1aWQ6ICAgICAgdG9waWNDdHJsLnVpZCxcbiAgICAgICAgcmV2aWV3OiAgIHRvcGljQ3RybC5jcml0UmVwbHlEYXRhLFxuICAgICAgICBjcmVhdGVkOiAgbW9tZW50KCkudG9JU09TdHJpbmcoKVxuICAgIH0pXG5cbiAgICAgIHRvcGljQ3RybC5ub3RpLnVwZGF0ZU5vdGlmaWNhdGlvbkNvdW50KHRvcGljT2JqLnVpZCx0b3BpY0N0cmwudWlkKTtcblxuXG4gICAgICAvKnRvcGljQ3RybC5ub3RpLmFkZENoaWxkKHRvcGljT2JqLnVpZCkucHVzaCgpLnNldCh7XG4gICAgICAgIHRvcGljSWQ6ICAgIHRvcGljT2JqLiRpZCxcbiAgICAgICAgZnJvbTogICAgICAgdG9waWNDdHJsLnVpZCxcbiAgICAgICAgaXNfcmVhZDogICAgZmFsc2UsXG4gICAgICAgIHRpbWVzdGFtcDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pOyovXG5cblxuICAgICAgdG9waWNDdHJsLnRvcGljcy5yZXBseUNvdW50KHRvcGljT2JqLiRpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgIGlmKCFkYXRhLmNvdW50KXtcbiAgICAgICAgICB0b3BpY0N0cmwudG9waWNzLnJlcGx5Q291bnRSZWYodG9waWNPYmouJGlkKS5zZXQoMSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHRvcGljQ3RybC50b3BpY3MucmVwbHlDb3VudFJlZih0b3BpY09iai4kaWQpXG4gICAgICAgICAgICAuc2V0KGRhdGEuY291bnQgKzEpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuXG4gICAgICAvL1N0YXQgdXBkYXRlIGZvciB1c2VyXG4gICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9jb21tZW50L2NvdW50JylcbiAgICAgICAgLnNldCh0b3BpY0N0cmwucHJvZmlsZS5zdGF0LmNvbW1lbnQuY291bnQgKyAxKTtcblxuICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvY29tbWVudC90b3BpY3MvJyt0b3BpY09iai4kaWQpXG4gICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuXG5cbiAgICAvL1JlcGx5IGluIHJlcGx5XG4gICAgdG9waWNDdHJsLnJlcGx5SW5SZXBseSA9IGZ1bmN0aW9uKHRvcGljSWQscmVwbHlJZCl7XG4gICAgICB0b3BpY0N0cmwudG9waWNzLnJlcGx5SW5SZXBseUFycih0b3BpY0lkLHJlcGx5SWQpLiRhZGQoe1xuICAgICAgICBib2R5OiAgICAgdG9waWNDdHJsLnJlcGx5SW5SZXBseS5ib2R5LFxuICAgICAgICB1aWQ6ICAgICAgdG9waWNDdHJsLnVpZCxcbiAgICAgICAgY3JlYXRlZDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pXG4gICAgfVxuXG5cblxuICAgIHRvcGljQ3RybC5hZGROZXdDaG9pY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBuZXdJdGVtTm8gPSB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEubGVuZ3RoKzE7XG4gICAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEucHVzaCh7J2lkJzonY3JpdGVyaWEnK25ld0l0ZW1Ob30pO1xuICAgIH07XG5cbiAgICB0b3BpY0N0cmwucmVtb3ZlQ2hvaWNlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGFzdEl0ZW0gPSB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEubGVuZ3RoLTE7XG4gICAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEuc3BsaWNlKGxhc3RJdGVtKTtcbiAgICB9O1xuXG5cbiAgICAvL0NyZWF0ZSBuZXcgdG9waWNcbiAgICB0b3BpY0N0cmwuY3JlYXRlVG9waWMgPSBmdW5jdGlvbihjYXRlZ29yeSxpc0RyYWZ0KXtcblxuICAgICAgLy9DaGVjayBpZiB3ZSBoYXZlIGxvY2F0aW9uIGRldGFpbHNcbiAgICAgIHZhciBsb2NhdGlvbkRldGFpbCA9ICcnO1xuXG4gICAgICBpZih0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24gIT09ICcnICl7XG4gICAgICAgIGNvbnNvbGUubG9nKHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbik7XG4gICAgICAgIGxvY2F0aW9uRGV0YWlsID0ge1xuICAgICAgICAgIHBsYWNlX2lkOiB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5wbGFjZV9pZCxcbiAgICAgICAgICBzbHVnOiAgICAgU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLm5hbWUpLFxuICAgICAgICAgIG5hbWU6ICAgICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5uYW1lLFxuICAgICAgICAgIGFkZHJlc3M6ICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBsYXQ6ICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubGF0KCksXG4gICAgICAgICAgbG5nOiAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpLFxuICAgICAgICAgIGxuZzogICAgICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSxcbiAgICAgICAgICBsbmc6ICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAvKiBERUJVRyBGT1JNIFZBTFVFXG4gICAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICB0eXBlOiAgICAgICAgICAgdG9waWNDdHJsLnR5cGUsXG4gICAgICAgIGxhbmc6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMubGFuZyxcbiAgICAgICAgdG9waWM6ICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyxcbiAgICAgICAgYm9keTogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5ib2R5LFxuICAgICAgICBjYXRlZ29yeTogICAgICAgY2F0ZWdvcnksXG4gICAgICAgIHVpZDogICAgICAgICAgICB0b3BpY0N0cmwudWlkLFxuICAgICAgICBzbHVnOiAgICAgICAgICAgU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyksXG4gICAgICAgIHBob3RvczogICAgICAgICB0b3BpY0N0cmwuaW1hZ2VTdHJpbmdzLFxuICAgICAgICBwaG90b3NfdGV4dDogICAgdG9waWNDdHJsLmltYWdlVGV4dCxcbiAgICAgICAgbG9jYXRpb246ICAgICAgIGxvY2F0aW9uRGV0YWlsLFxuICAgICAgICB1cmw6ICAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnVybCxcbiAgICAgICAgZHJhZnQ6ICAgICAgICAgIGlzRHJhZnQsXG4gICAgICAgIGNyZWF0ZWQ6ICAgICAgICBtb21lbnQoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB0YWdzOiAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRhZ3MsXG4gICAgICAgIHVzZXJJUDogICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmlwSW5mb1xuICAgICAgfTtcbiAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgKi9cblxuICAgICAgdG9waWNDdHJsLnRvcGljcy5hcnIuJGFkZCh7XG4gICAgICAgICAgdHlwZTogICAgICAgICAgIHRvcGljQ3RybC50eXBlLFxuICAgICAgICAgIGxhbmc6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMubGFuZyxcbiAgICAgICAgICB0b3BpYzogICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRvcGljLFxuICAgICAgICAgIGJvZHk6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMuYm9keSxcbiAgICAgICAgICBjYXRlZ29yeTogICAgICAgY2F0ZWdvcnksXG4gICAgICAgICAgdWlkOiAgICAgICAgICAgIHRvcGljQ3RybC51aWQsXG4gICAgICAgICAgLy9zbHVnOiAgICAgICAgICAgU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyksXG4gICAgICAgICAgc2x1ZzogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyxcbiAgICAgICAgICBwaG90b3M6ICAgICAgICAgdG9waWNDdHJsLmltYWdlU3RyaW5ncyxcbiAgICAgICAgICBwaG90b3NfdGV4dDogICAgdG9waWNDdHJsLmltYWdlVGV4dCxcbiAgICAgICAgICBsb2NhdGlvbjogICAgICAgbG9jYXRpb25EZXRhaWwsXG4gICAgICAgICAgdXJsOiAgICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy51cmwsXG4gICAgICAgICAgZHJhZnQ6ICAgICAgICAgIGlzRHJhZnQsXG4gICAgICAgICAgY3JlYXRlZDogICAgICAgIG1vbWVudCgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgdGFnczogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy50YWdzLFxuICAgICAgICAgIHVzZXJJUDogICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMuaXBJbmZvLFxuICAgICAgICAgIHJldmlldzogICAgICAgICB0b3BpY0N0cmwucmV2aWV3Q3JpdGVyaWEsXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odG9waWMpe1xuXG4gICAgICAgICAgdmFyIHNsdWdUZXh0ID0nJztcbiAgICAgICAgICAvL2lmIHdlIGFyZSB1bmFibGUgdG8gY29udmVydCB0byBzbHVnIHRoZW4gd2UgdXNlIHRoZSB0b3BpYyB0ZXh0LCBlbHNlIHVzZSBzbHVnXG4gICAgICAgICAgaWYoU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYykgPT0nJyl7XG4gICAgICAgICAgICBzbHVnVGV4dCA9IHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYztcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHNsdWdUZXh0ID0gU2x1Zy5zbHVnaWZ5KHRvcGljQ3RybC5uZXdUb3BpYy50b3BpYyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9VcGRhdGUgc2x1ZyB3aXRoIHRvcGljIEtleVxuICAgICAgICAgIHRvcGljQ3RybC50b3BpY3MuZ2V0VG9waWNCeUtleSh0b3BpYy5rZXkoKSkudXBkYXRlKHtcInNsdWdcIjpzbHVnVGV4dCt0b3BpYy5rZXkoKX0pO1xuXG4gICAgICAgICAgLy9TdGF0IHVwZGF0ZVxuICAgICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L3Bvc3RlZC9jb3VudCcpXG4gICAgICAgICAgICAuc2V0KHRvcGljQ3RybC5wcm9maWxlLnN0YXQucG9zdGVkLmNvdW50ICsgMSk7XG5cbiAgICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9wb3N0ZWQvdG9waWNzLycrdG9waWMua2V5KCkpXG4gICAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcblxuICAgICAgICAgIC8vSWYgdGhlcmUgaXMgbG9jYXRpb25cbiAgICAgICAgICBpZihsb2NhdGlvbkRldGFpbCAhPT0gJycpe1xuXG4gICAgICAgICAgICB0b3BpY0N0cmwucGxhY2VzLmFkZENoaWxkKGxvY2F0aW9uRGV0YWlsLnBsYWNlX2lkKVxuICAgICAgICAgICAgICAgICAgICAgIC5jaGlsZCh0b3BpYy5rZXkoKSlcbiAgICAgICAgICAgICAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcblxuICAgICAgICAgICAgdG9waWNDdHJsLnBsYWNlcy5hZGRDaGlsZChsb2NhdGlvbkRldGFpbC5wbGFjZV9pZClcbiAgICAgICAgICAgICAgLmNoaWxkKCdpbmZvJykuc2V0KGxvY2F0aW9uRGV0YWlsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL2lmIHRoZXJlIGFyZSB0YWdzXG4gICAgICAgICAgaWYodG9waWNDdHJsLm5ld1RvcGljLnRhZ3MgIT09IG51bGwpe1xuICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRvcGljQ3RybC5uZXdUb3BpYy50YWdzLmxlbmd0aDsgKytpbmRleCkge1xuICAgICAgICAgICAgICB0b3BpY0N0cmwudGFncy5hZGRDaGlsZCh0b3BpY0N0cmwubmV3VG9waWMudGFnc1tpbmRleF0udGV4dClcbiAgICAgICAgICAgICAgICAuY2hpbGQodG9waWMua2V5KCkpLnB1c2goKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy9Ob3RpZnkgZm9sbG93ZXJcbiAgICAgICAgICB0b3BpY0N0cmwubm90aS5ub3RpZnlGb2xsb3dlcih0b3BpYy5rZXkoKSx0b3BpY0N0cmwudWlkKTtcblxuXG4gICAgICAgICAgLy9SZXNldCBmb3JtIGhlcmVcbiAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMgPSB7XG4gICAgICAgICAgICBib2R5OiAnJ1xuICAgICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvL0NoZWNrIGlmIHVzZXIgaXMgYWxyZWFkeSBmb2xsb3dpbmcgdXNlclxuICAgIHRvcGljQ3RybC5jaGVja0ZvbGxvdyA9IGZ1bmN0aW9uKGZvbGxvd191aWQpe1xuICAgICAgaWYodG9waWNDdHJsLnVzZXJzLmNoZWNrRm9sbG93KHRvcGljQ3RybC51aWQsZm9sbG93X3VpZCkpe1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAvL0ZvbGxvdyBVc2VyXG4gICAgdG9waWNDdHJsLmZvbGxvd1VzZXIgPSBmdW5jdGlvbihmb2xsb3dfdWlkKXtcblxuICAgICAgLy9VcGRhdGUgdGhlIHBlcnNvbiB0aGF0IGJlaW5nIGZvbGxvdywgY3JlZGl0IHRoZW0gZm9yIGhhdmluZyBmb2xsb3dlclxuICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUoZm9sbG93X3VpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZihmb2xsb3dfdWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQuZm9sbG93ZXIuY291bnQgKyAxKTtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZihmb2xsb3dfdWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci91aWQvJysgdG9waWNDdHJsLnVpZClcbiAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvL1VwZGF0ZSB0aGUgcGVyc29uIHRoYXQgaXMgZm9sbG93aW5nLCBjcmVkaXQgdGhlbSBmb3IgaGF2aW5nIGZvbGxvd2luZ1xuICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUodG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dpbmcvY291bnQnKVxuICAgICAgICAgIC5zZXQoZGF0YS5zdGF0LmZvbGxvd2VyLmNvdW50ICsgMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93aW5nL3VpZC8nKyBmb2xsb3dfdWlkKVxuICAgICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvL1VuZm9sbG93IFVzZXJcbiAgICB0b3BpY0N0cmwudW5mb2xsb3dVc2VyID0gZnVuY3Rpb24oZm9sbG93X3VpZCl7XG5cbiAgICAgIC8vVXBkYXRlIHRoZSBwZXJzb24gdGhhdCBiZWluZyBmb2xsb3csIGNyZWRpdCB0aGVtIGZvciBoYXZpbmcgZm9sbG93ZXJcbiAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKGZvbGxvd191aWQpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYoZm9sbG93X3VpZCkuY2hpbGQoJ3N0YXQvZm9sbG93ZXIvY291bnQnKVxuICAgICAgICAgIC5zZXQoZGF0YS5zdGF0LmZvbGxvd2VyLmNvdW50IC0gMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYoZm9sbG93X3VpZCkuY2hpbGQoJ3N0YXQvZm9sbG93ZXIvdWlkLycrIHRvcGljQ3RybC51aWQpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vVXBkYXRlIHRoZSBwZXJzb24gdGhhdCBpcyBmb2xsb3dpbmcsIGNyZWRpdCB0aGVtIGZvciBoYXZpbmcgZm9sbG93aW5nXG4gICAgICB0b3BpY0N0cmwudXNlcnMuZ2V0UHJvZmlsZSh0b3BpY0N0cmwudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L2ZvbGxvd2luZy9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQuZm9sbG93aW5nLmNvdW50IC0gMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93aW5nL3VpZC8nKyBmb2xsb3dfdWlkKS5yZW1vdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgfVxuXG5cblxuICAgICAvL3Vwdm90ZVxuICAgIHRvcGljQ3RybC51cHZvdGUgPSBmdW5jdGlvbih0b3BpYyl7XG5cbiAgICAgIGlmKHRvcGljLmRvd252b3RlcyAhPSB1bmRlZmluZWQgJiYgdG9waWMuZG93bnZvdGVzW3RvcGljQ3RybC51aWRdICE9IHVuZGVmaW5lZCl7XG4gICAgICAgIHRvcGljQ3RybC5jYW5jZWxEb3dudm90ZSh0b3BpYyk7XG4gICAgICB9XG4gICAgICB0b3BpY0N0cmwudG9waWNzLnVwdm90ZVRvcGljKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB0b3BpY0N0cmwudXNlclVwdm90ZWRUb3BpY3MuY2hpbGQodG9waWMuJGlkKS5zZXQodmFsdWUuJHZhbHVlKTtcblxuICAgICAgICAvL1N0YXQgdXBkYXRlXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKHRvcGljLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpYy51aWQpLmNoaWxkKCdzdGF0L3Vwdm90ZWQvY291bnQnKVxuICAgICAgICAgIC5zZXQoZGF0YS5zdGF0LnVwdm90ZWQuY291bnQgKyAxKTtcbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWMudWlkKS5jaGlsZCgnc3RhdC91cHZvdGVkL3RvcGljcy8nK3RvcGljLiRpZClcbiAgICAgICAgICAucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0b3BpY0N0cmwuY2FuY2VsVXB2b3RlID0gZnVuY3Rpb24odG9waWMpe1xuICAgICAgdG9waWNDdHJsLnRvcGljcy51bmRvVXB2b3RlKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCk7XG5cbiAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKHRvcGljLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAvL1N0YXQgdXBkYXRlXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljLnVpZCkuY2hpbGQoJ3N0YXQvdXB2b3RlZC9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQudXB2b3RlZC5jb3VudCAtIDEpO1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljLnVpZCkuY2hpbGQoJ3N0YXQvdXB2b3RlZC90b3BpY3MvJyt0b3BpYy4kaWQpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cblxuICAgICAgdG9waWNDdHJsLnVzZXJVcHZvdGVkVG9waWNzLmNoaWxkKHRvcGljLiRpZCkucmVtb3ZlKGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9fSk7XG4gICAgfTtcblxuICAgIC8vZG93bnZvdGVcbiAgICB0b3BpY0N0cmwuZG93bnZvdGUgPSBmdW5jdGlvbih0b3BpYyl7XG4gICAgICBpZih0b3BpYy51cHZvdGVzICE9IHVuZGVmaW5lZCAmJiB0b3BpYy51cHZvdGVzW3RvcGljQ3RybC51aWRdICE9IHVuZGVmaW5lZCl7XG4gICAgICAgIHRvcGljQ3RybC5jYW5jZWxVcHZvdGUodG9waWMpO1xuICAgICAgfVxuICAgICAgdG9waWNDdHJsLnRvcGljcy5kb3dudm90ZVRvcGljKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB0b3BpY0N0cmwudXNlckRvd252b3RlZFRvcGljcy5jaGlsZCh0b3BpYy4kaWQpLnNldCh2YWx1ZS4kdmFsdWUpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRvcGljQ3RybC5jYW5jZWxEb3dudm90ZSA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MudW5kb0Rvd252b3RlKHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCk7XG4gICAgICB0b3BpY0N0cmwudXNlckRvd252b3RlZFRvcGljcy5jaGlsZCh0b3BpYy4kaWQpLnJlbW92ZShmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJSZW1vdmVkIHN1Y2Nlc3NmdWxseSFcIik7XG4gICAgICAgICAgfX0pO1xuICAgIH07XG5cbiAgICAvL2ZvbGxvdyB0b3BpY1xuICAgIHRvcGljQ3RybC5mb2xsb3dUb3BpYyA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MuZm9sbG93KHRvcGljLiRpZCwgdG9waWNDdHJsLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB0b3BpY0N0cmwudXNlckZvbGxvd2luZy5jaGlsZCh0b3BpYy4kaWQpLnNldCh2YWx1ZS5oaXN0b3J5W3RvcGljQ3RybC51aWRdKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0b3BpY0N0cmwudW5mb2xsb3dUb3BpYyA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MudW5mb2xsb3codG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKTtcbiAgICAgIHRvcGljQ3RybC51c2VyRm9sbG93aW5nLmNoaWxkKHRvcGljLiRpZCkucmVtb3ZlKGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9fSk7XG4gICAgfTtcblxuICB9KTtcblxuXG4vL2h0dHBzOi8vZ2lzdC5naXRodWIuY29tL2thdG93dWxmLzYwOTkwNDJcbmZ1bmN0aW9uIG1vdmVGYlJlY29yZChvbGRSZWYsIG5ld1JlZikge1xuICBvbGRSZWYub25jZSgndmFsdWUnLCBmdW5jdGlvbiAoc25hcCkge1xuICAgIG5ld1JlZi5zZXQoc25hcC52YWwoKSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIG9sZFJlZi5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZihjb25zb2xlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG4vKipcclxuICogTWFpbiBtb2R1bGUgb2YgdGhlIGFwcGxpY2F0aW9uLlxyXG4gKi9cclxudmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdBcHAnLCBbXHJcbiAgICAnZmlyZWJhc2UnLFxyXG4gICAgJ2FuZ3VsYXItbWQ1JywgLy8gRW5jcnlwdCBlbWFpbFxyXG4gICAgJ3VpLnJvdXRlcicsXHJcbiAgICAnbmdNYXRlcmlhbCcsIC8vIEludGVyZmFjZVxyXG4gICAgJ2FuZ3VsYXJNb21lbnQnLCAvLyBUaW1lIG1hbmFnZW1lbnRcclxuICAgICdmbG93JywgLy8gSW1hZ2UgdXBsb2FkXHJcbiAgICAnc2x1Z2lmaWVyJywgLy8gQ3JlYXRlIFNsdWdzXHJcbiAgICAnbmdBdXRvY29tcGxldGUnLCAvLyBHb29nbGUgcGxhY2VzXHJcbiAgICAnbmdUYWdzSW5wdXQnLCAvLyBUYWdzXHJcbiAgICAnY2dOb3RpZnknLCAvLyBOb3RpZmljYXRpb24gLSBodHRwczovL2dpdGh1Yi5jb20vY2dyb3NzL2FuZ3VsYXItbm90aWZ5XHJcbiAgICAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZScsIC8vIFRyYW5zbGF0aW9uIC0gaHR0cHM6Ly9hbmd1bGFyLXRyYW5zbGF0ZS5naXRodWIuaW8vXHJcbiAgICAnZmFjZWJvb2snLCAvLyBGYWNlYm9vayAtIGh0dHBzOi8vZ2l0aHViLmNvbS9DaXVsL2FuZ3VsYXItZmFjZWJvb2tcclxuICAgICdhbmd1bGFyLXdlYi1ub3RpZmljYXRpb24nLCAvLyBodHRwczovL2dpdGh1Yi5jb20vc2FnaWVndXJhcmkvYW5ndWxhci13ZWItbm90aWZpY2F0aW9uXHJcbiAgICAnYW5ndWxhci1mbGV4c2xpZGVyJywgLy8gSW1hZ2Ugc2xpZGVyIC0gaHR0cHM6Ly9naXRodWIuY29tL3RoZW5pa3NvL2FuZ3VsYXItZmxleHNsaWRlclxyXG5cclxuICAgIC8vIEVtb3RpY29uIC0tIGh0dHA6Ly9taXN0aWMxMDAuZ2l0aHViLmlvL2FuZ3VsYXItc21pbGllcy9cclxuICAgICduZ1Nhbml0aXplJyxcclxuICAgICd1aS5ib290c3RyYXAnLCAvLyBPUiBtZ2NyZWEubmdTdHJhcFxyXG4gICAgJ2FuZ3VsYXItc21pbGllcycsXHJcblxyXG4gICAgJ25nQ29va2llcycsIC8vIGNvb2tpZXMgc3R1ZmZcclxuXHJcbiAgXSlcclxuXHJcbiAgLmNvbmZpZyhbXCIkbWRUaGVtaW5nUHJvdmlkZXJcIiwgZnVuY3Rpb24gKCRtZFRoZW1pbmdQcm92aWRlcikge1xyXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLmRlZmluZVBhbGV0dGUoJ3NsYWNrJywge1xyXG4gICAgICAnNTAnOiAnZmZlYmVlJyxcclxuICAgICAgJzEwMCc6ICdmZmNkZDInLFxyXG4gICAgICAnMjAwJzogJ2VmOWE5YScsXHJcbiAgICAgICczMDAnOiAnZTU3MzczJyxcclxuICAgICAgJzQwMCc6ICdlZjUzNTAnLFxyXG4gICAgICAnNTAwJzogJzREMzk0QicsIC8vIHByaW1hcnkgY29sb3VyXHJcbiAgICAgICc2MDAnOiAnZTUzOTM1JyxcclxuICAgICAgJzcwMCc6ICdkMzJmMmYnLFxyXG4gICAgICAnODAwJzogJ2M2MjgyOCcsXHJcbiAgICAgICc5MDAnOiAnYjcxYzFjJyxcclxuICAgICAgJ0ExMDAnOiAnZmY4YTgwJyxcclxuICAgICAgJ0EyMDAnOiAnZmY1MjUyJyxcclxuICAgICAgJ0E0MDAnOiAnZmYxNzQ0JyxcclxuICAgICAgJ0E3MDAnOiAnZDUwMDAwJyxcclxuICAgICAgJ2NvbnRyYXN0RGVmYXVsdENvbG9yJzogJ2xpZ2h0JywgLy8gd2hldGhlciwgYnkgZGVmYXVsdCwgdGV4dCAoY29udHJhc3QpXHJcbiAgICAgIC8vIG9uIHRoaXMgcGFsZXR0ZSBzaG91bGQgYmUgZGFyayBvciBsaWdodFxyXG4gICAgICAnY29udHJhc3REYXJrQ29sb3JzJzogWyc1MCcsICcxMDAnLCAvLyBodWVzIHdoaWNoIGNvbnRyYXN0IHNob3VsZCBiZSAnZGFyaycgYnkgZGVmYXVsdFxyXG4gICAgICAgICcyMDAnLCAnMzAwJywgJzQwMCcsICdBMTAwJ10sXHJcbiAgICAgICdjb250cmFzdExpZ2h0Q29sb3JzJzogdW5kZWZpbmVkIC8vIGNvdWxkIGFsc28gc3BlY2lmeSB0aGlzIGlmIGRlZmF1bHQgd2FzICdkYXJrJ1xyXG4gICAgfSlcclxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXHJcbiAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnc2xhY2snKVxyXG4gIH1dKVxyXG5cclxuICAvLyBGYWNlYm9vayBDb25maWdcclxuICAuY29uZmlnKFxyXG4gICAgW1wiRmFjZWJvb2tQcm92aWRlclwiLCBmdW5jdGlvbiAoRmFjZWJvb2tQcm92aWRlcikge1xyXG4gICAgICB2YXIgbXlBcHBJZCA9ICc5MzEzNzYxMjAyNjM4NTYnXHJcbiAgICAgIEZhY2Vib29rUHJvdmlkZXIuc2V0QXBwSWQobXlBcHBJZClcclxuICAgICAgRmFjZWJvb2tQcm92aWRlci5pbml0KG15QXBwSWQpXHJcbiAgICB9XVxyXG4gIClcclxuXHJcbiAgLy9TZWN1cml0eSBmb3IgVHJhbnNsYXRlXHJcbiAgLmNvbmZpZyhbXCIkdHJhbnNsYXRlUHJvdmlkZXJcIiwgZnVuY3Rpb24gKCR0cmFuc2xhdGVQcm92aWRlcikge1xyXG4gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnByZWZlcnJlZExhbmd1YWdlKCdFbmcnKTtcclxuICAgIC8vIEVuYWJsZSBlc2NhcGluZyBvZiBIVE1MXHJcbiAgICAkdHJhbnNsYXRlUHJvdmlkZXIudXNlU2FuaXRpemVWYWx1ZVN0cmF0ZWd5KCdlc2NhcGUnKTtcclxuICB9XSlcclxuXHJcblxyXG5cclxuICAuY29uZmlnKFtcIiRzdGF0ZVByb3ZpZGVyXCIsIFwiJHVybFJvdXRlclByb3ZpZGVyXCIsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAuc3RhdGUoJ2hvbWUnLCB7XHJcbiAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCBhcyAgaG9tZUN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2hvbWUvaG9tZS5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIHJlcXVpcmVOb0F1dGg6IFtcIiRzdGF0ZVwiLCBcIkF1dGhcIiwgZnVuY3Rpb24gKCRzdGF0ZSwgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJylcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3JcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgZmVlZDogW1wiVG9waWNzXCIsIGZ1bmN0aW9uIChUb3BpY3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MubGF0ZXN0RmVlZCgpXHJcbiAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdsb2dpbi1mb3JtQGhvbWUnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2h0bWwvbG9naW4tZm9ybS5odG1sJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAaG9tZSc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG5cclxuICAgICAgLy9UcmVuZGluZ1xyXG4gICAgICAuc3RhdGUoJ3RyZW5kaW5nJywge1xyXG4gICAgICAgIHVybDogJy9leHBsb3JlL3RyZW5kaW5nJyxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsIGFzICBob21lQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaG9tZS90cmVuZC5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIGZlZWQ6IFtcIlRvcGljc1wiLCBmdW5jdGlvbiAoVG9waWNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmxhdGVzdEZlZWQoKVxyXG4gICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQHRyZW5kaW5nJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcblxyXG4gICAgICAvLyBDYXRlZ29yeSBMYW5kaW5nXHJcbiAgICAgIC5zdGF0ZSgnY2F0ZWdvcnknLCB7XHJcbiAgICAgICAgdXJsOiAnL2NhdGVnb3J5L3tTbHVnfScsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDYXRlQ3RybCBhcyBjYXRlQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY2F0ZWdvcnkvaW5kZXguaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAvLyBHZXR0aW5nIENhdGVnb3J5IGRldGFpbHNcclxuICAgICAgICAgICAgICBjYXRlTmFtZTogW1wiJHN0YXRlUGFyYW1zXCIsIFwiQ2F0ZWdvcnlcIiwgZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgQ2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBDYXRlZ29yeS5nZXROYW1lKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKClcclxuICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAvLyBHZXR0aW5nIGxpc3Qgb2YgY2F0ZWdvcnkgdG9waWNzIGhlcmVcclxuICAgICAgICAgICAgICBjYXRlVG9waWNzOiBbXCIkc3RhdGVQYXJhbXNcIiwgXCJUb3BpY3NcIiwgZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgVG9waWNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmxpc3QoJHN0YXRlUGFyYW1zLlNsdWcpXHJcbiAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAY2F0ZWdvcnknOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuXHJcbiAgICAgIC8vIFBsYWNlcyBsYW5kaW5nIHBhZ2VcclxuICAgICAgLnN0YXRlKCdwbGFjZXMnLCB7XHJcbiAgICAgICAgdXJsOiAnL3BsYWNlcy97cGxhY2Vfc2x1Z30ve3BsYWNlX2lkfScsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICdoZWFkZXJAcGxhY2VzJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQbGFjZXNDdHJsIGFzIHBsYWNlc0N0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BsYWNlL2luZGV4Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgcGxhY2VMYW5kaW5nOiBbXCJQbGFjZXNcIiwgXCJUb3BpY3NcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCIkZmlyZWJhc2VBcnJheVwiLCBmdW5jdGlvbiAoUGxhY2VzLCBUb3BpY3MsICRzdGF0ZVBhcmFtcywgJGZpcmViYXNlQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhXHJcbiAgICAgICAgICAgICAgICBQbGFjZXMuZ2V0UGxhY2VSZWYoJHN0YXRlUGFyYW1zLnBsYWNlX2lkKS5vbigndmFsdWUnLCBmdW5jdGlvbiAoc25hcHNob3QpIHtcclxuICAgICAgICAgICAgICAgICAgZGF0YSA9IHNuYXBzaG90LnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNuYXBzaG90LnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhXHJcbiAgICAgICAgICAgICAgLy8gcmV0dXJuICAkZmlyZWJhc2VBcnJheShQbGFjZXMuZ2V0UGxhY2VSZWYoJHN0YXRlUGFyYW1zLnBsYWNlX2lkKSlcclxuICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuXHJcbiAgICAgIC8vIFRhZyBsYW5kaW5nIHBhZ2VcclxuICAgICAgLnN0YXRlKCd0YWcnLCB7XHJcbiAgICAgICAgdXJsOiAnL3RhZy97VGFnfScsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICdoZWFkZXJAdGFnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUYWdDdHJsIGFzIHRhZ0N0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RhZy9pbmRleC5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIHRhZ05hbWU6IFtcIiRzdGF0ZVBhcmFtc1wiLCBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHN0YXRlUGFyYW1zLlRhZ1xyXG4gICAgICAgICAgICAgIH1dLFxyXG5cclxuICAgICAgICAgICAgICB0YWdMYW5kaW5nOiBbXCJUb3BpY3NcIiwgXCIkc3RhdGVQYXJhbXNcIiwgXCJUYWdzXCIsIGZ1bmN0aW9uIChUb3BpY3MsICRzdGF0ZVBhcmFtcywgVGFncykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhZyA9ICRzdGF0ZVBhcmFtcy5UYWdcclxuICAgICAgICAgICAgICAgIC8vIHZhciBmYiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybClcclxuICAgICAgICAgICAgICAgIC8vIHZhciBkYXRhUmV0ID0gJydcclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBzaG93KFRhZ3MudG9waWNUYWdzKHRhZykpXHJcbiAgICAgICAgICAgICAgICAvKnJldHVybiBmYi5jaGlsZCgndGFncy8nICsgdGFnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbigndmFsdWUnLCBmdW5jdGlvbiAodGFnU25hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZiLmNoaWxkKCd0b3BpY3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub3JkZXJCeUNoaWxkKFwidGFnc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXF1YWxUbyh0YWcpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbigndmFsdWUnLCBmdW5jdGlvbiAodG9waWNTbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3coIGV4dGVuZCh7fSwgdGFnU25hcC52YWwoKSwgdG9waWNTbmFwLnZhbCgpKSApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLyEqZGF0YVJldCA9IGV4dGVuZCh7fSwgdGFnU25hcC52YWwoKSwgdG9waWNTbmFwLnZhbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCRmaXJlYmFzZUFycmF5KGRhdGFSZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhUmV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICohL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKi9cclxuICAgICAgICAgICAgICAgIC8vIHZhciB0YWdPYmogPSBUYWdzLmdldFRhZ09iamVjdCh0YWcpXHJcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4gdGFnT2JqLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgcmV0dXJuIFRvcGljcy50b3BpY3NCeVRhZyh0YWcpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24gKHNuYXApIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhleHRlbmQoe30sIHRhZ09iai4kdmFsdWUsIHNuYXAudmFsKCkpKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiBleHRlbmQoe30sIHRhZ09iai4kdmFsdWUsIHNuYXAudmFsKCkpXHJcbiAgICAgICAgICAgICAgICAvLyAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBmYi5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHZhciBkYXRhID0gc25hcHNob3QudmFsKClcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGRhdGFTbmFwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB2YXIgaW5kZXggPSB3b3JkLmluZGV4T2YoJyAnKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgdmFyIGZpcnN0ID0gZGF0YVNuYXAuTmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB2YXIgbGFzdCA9IHdvcmQuc3Vic3RyaW5nKGluZGV4ICsgMSlcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIHZhciBjYW5kaWRhdGUgPSBkYXRhU25hcC5OYW1lXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBpZiAoY2FuZGlkYXRlLmluZGV4T2YoZmlyc3QpID49IDAgJiYgY2FuZGlkYXRlLmluZGV4T2YobGFzdCkgPj0gMClcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhU25hcC5DSUQpXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgIHJlamVjdCgnU29tZSBzb3J0IG9mIGZhaWx1cmUnKVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLy8gICAgIH0pXHJcbiAgICAgICAgICAgICAgICAvLyB9KVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MudG9waWNzQnlUYWcodGFnKVxyXG4gICAgICAgICAgICAgIC8vIC5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXApe1xyXG4gICAgICAgICAgICAgIC8vIH0pXHJcbiAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcblxyXG4gICAgICAvLyBUb3BpYyBsYW5kaW5nIHBhZ2VcclxuICAgICAgLnN0YXRlKCd0b3BpYycsIHtcclxuICAgICAgICB1cmw6ICcve1NsdWd9JyxcclxuICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICBTbHVnOiBbXCIkc3RhdGVQYXJhbXNcIiwgXCIkc3RhdGVcIiwgXCJOb3RpU2VydmljZVwiLCBcIkF1dGhcIiwgZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywkc3RhdGUsIE5vdGlTZXJ2aWNlLEF1dGgpIHtcclxuICAgICAgICAgICAgTm90aVNlcnZpY2UudW5yZWFkTm90aWZpY2F0aW9uKEF1dGgucmVmLmdldEF1dGgoKS51aWQpO1xyXG4gICAgICAgICAgICAkc3RhdGVQYXJhbXMuU2x1ZyA9IGRlY29kZVVSSUNvbXBvbmVudCgkc3RhdGVQYXJhbXMuU2x1ZylcclxuICAgICAgICAgICAgaWYoJHN0YXRlUGFyYW1zLlNsdWcgPT0gJycpe1xyXG4gICAgICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1dXHJcbiAgICAgICAgfSxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1RvcGljTGFuZGluZ0N0cmwgYXMgdG9waWNMYW5kaW5nQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndG9waWNzL2luZGV4Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgaXNPd25lcjogW1wiQXV0aFwiLCBcIlVzZXJzXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwiVG9waWNzXCIsIGZ1bmN0aW9uIChBdXRoLCBVc2VycywgJHN0YXRlUGFyYW1zLCBUb3BpY3MpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3BpY1VpZCA9ICcnXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB1c2VyIGxvZ2luLCBjaGVjayBpZiB0aGV5IGFyZSB0aGUgdG9waWMgb3duZXJcclxuICAgICAgICAgICAgICAgIGlmIChBdXRoLnJlZi5nZXRBdXRoKCkpIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIFRvcGljcy5mb3J0b3BpYygkc3RhdGVQYXJhbXMuU2x1ZykuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVswXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0b3BpY1VpZCA9IGRhdGFbMF0udWlkXHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCA9PSB0b3BpY1VpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgdG9waWNMYW5kaW5nOiBbXCIkc3RhdGVQYXJhbXNcIiwgXCJUb3BpY3NcIiwgZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgVG9waWNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmZvcnRvcGljKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKCk7XHJcbiAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgcmVwbHlMaXN0OiBbXCIkc3RhdGVQYXJhbXNcIiwgXCJUb3BpY3NcIiwgXCIkc3RhdGVcIiwgZnVuY3Rpb24gKCRzdGF0ZVBhcmFtcywgVG9waWNzLCAkc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3BpY0tleSA9ICcnXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVG9waWNzLmZvcnRvcGljKCRzdGF0ZVBhcmFtcy5TbHVnKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBpZiAoZGF0YVswXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9waWNLZXkgPSBkYXRhWzBdLiRpZFxyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygndG9waWMtbm90Zm91bmQnKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MucmVwbHlMaXN0KHRvcGljS2V5KVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICB2aWV3RGF0YTogW1wiJHN0YXRlUGFyYW1zXCIsIFwiVG9waWNzXCIsIFwiVXNlcnNcIiwgXCJBdXRoXCIsIGZ1bmN0aW9uICgkc3RhdGVQYXJhbXMsIFRvcGljcywgVXNlcnMsIEF1dGgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3BpY0tleSwgdmlld3NcclxuICAgICAgICAgICAgICAgIHZhciB0aW1lID0gbW9tZW50KCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgdmFyIGhpc3RvcnlPYmogPSB7J3VzZXJJUCc6ICcnLCAnY3JlYXRlZCc6IHRpbWV9XHJcbiAgICAgICAgICAgICAgICBVc2Vycy5nZXRMb2NhdGlvbklQKCkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBoaXN0b3J5T2JqLnVzZXJJUCA9IGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICBoaXN0b3J5T2JqLnVzZXJJUCA9IGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuZ2V0VG9waWNCeVNsdWcoJHN0YXRlUGFyYW1zLlNsdWcpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChkYXRhWzBdLiRpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB0b3BpY0tleSA9IGRhdGFbMF0uJGlkXHJcbiAgICAgICAgICAgICAgICAgICAgdmlld3MgPSBUb3BpY3MuZ2V0Vmlld3ModG9waWNLZXkpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzLm9iai4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY291bnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3cy5yZWYuY2hpbGQoJ2NvdW50Jykuc2V0KDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3cy5yZWYuY2hpbGQoJ2NvdW50Jykuc2V0KGRhdGEuY291bnQgKyAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLnRoZW4oZnVuY3Rpb24gKGF1dGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBhdXRoLnVpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmlld3MucmVmLmNoaWxkKCdoaXN0b3J5JykuY2hpbGQodWlkKS5wdXNoKCkuc2V0KGhpc3RvcnlPYmopXHJcbiAgICAgICAgICAgICAgICAgICAgICBVc2Vycy51c2VyUmVmKGF1dGgudWlkKS5jaGlsZCgndmlld3MnKS5jaGlsZCh0b3BpY0tleSkucHVzaCgpLnNldChoaXN0b3J5T2JqKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXdzLm9ialxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICBmb2xsb3dlcnM6IFtcIiRzdGF0ZVBhcmFtc1wiLCBcIlRvcGljc1wiLCBmdW5jdGlvbiAoJHN0YXRlUGFyYW1zLCBUb3BpY3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuZ2V0VG9waWNCeVNsdWcoJHN0YXRlUGFyYW1zLlNsdWcpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciB0b3BpY0tleSA9IGRhdGFbMF0uJGlkXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuZ2V0Rm9sbG93ZXJzKHRvcGljS2V5KS5vYmouJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQHRvcGljJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIFRvcGljIG5vdCBmb3VuZFxyXG4gICAgICAuc3RhdGUoJ3RvcGljLW5vdGZvdW5kJywge1xyXG4gICAgICAgIHVybDogJy9lcnIvbm90Zm91bmQnXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBQcm9maWxlIGxhbmRpbmcgcGFnZVxyXG4gICAgICAuc3RhdGUoJ3Byb2ZpbGUnLCB7XHJcbiAgICAgICAgdXJsOiAnL3Byb2ZpbGUve05hbWV9JyxcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL2luZGV4Lmh0bWwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgaXNPd25lcjogW1wiQXV0aFwiLCBcIlVzZXJzXCIsIFwiJHN0YXRlUGFyYW1zXCIsIGZ1bmN0aW9uIChBdXRoLCBVc2VycywgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoQXV0aC5yZWYuZ2V0QXV0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlQnlVc2VybmFtZSgkc3RhdGVQYXJhbXMuTmFtZSkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZmlsZVswXS4kaWQgPT0gQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgdXNlclBvc3RzOiBbXCJVc2Vyc1wiLCBcIlRvcGljc1wiLCBcIiRzdGF0ZVBhcmFtc1wiLCBmdW5jdGlvbiAoVXNlcnMsIFRvcGljcywgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVXNlcnMuZ2V0UHJvZmlsZUJ5VXNlcm5hbWUoJHN0YXRlUGFyYW1zLk5hbWUpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChwcm9maWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChwcm9maWxlWzBdLiRpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBUb3BpY3MuY3JlYXRlZEJ5KHByb2ZpbGVbMF0uJGlkKVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgIHByb2ZpbGU6IFtcIiRzdGF0ZVwiLCBcIiRzdGF0ZVBhcmFtc1wiLCBcIiRyb290U2NvcGVcIiwgXCJBdXRoXCIsIFwiVXNlcnNcIiwgZnVuY3Rpb24gKCRzdGF0ZSwgJHN0YXRlUGFyYW1zLCAkcm9vdFNjb3BlLCBBdXRoLCBVc2Vycykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJzLmdldFByb2ZpbGVCeVVzZXJuYW1lKCRzdGF0ZVBhcmFtcy5OYW1lKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZmlsZVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJ2hlYWRlckBwcm9maWxlJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBQcm9maWxlIGxhbmRpbmcgcGFnZVxyXG4gICAgICAvLyBAcHJvZmlsZUN0cmxcclxuICAgICAgLnN0YXRlKCdhY2Njb3VudEVkaXQnLCB7XHJcbiAgICAgICAgdXJsOiAnL2FjY291bnQvZWRpdCcsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICdwYXNzd29yZEVkaXRAYWNjY291bnRFZGl0Jzoge1xyXG4gICAgICAgICAgICB1cmw6ICcvYWNjb3VudC9jaGFuZ2VQYXNzd29yZCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncHJvZmlsZS9wYXNzd2QuaHRtbCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAndXNlckVkaXRAYWNjY291bnRFZGl0Jzoge1xyXG4gICAgICAgICAgICB1cmw6ICcvYWNjb3VudC9lZGl0LWZvcm0nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3Byb2ZpbGUvZWRpdC1mb3JtLmh0bWwnXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJyc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2ZpbGVDdHJsIGFzIHByb2ZpbGVDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL2VkaXQuaHRtbCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICB1c2VyUG9zdHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgaXNPd25lcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHByb2ZpbGU6IFtcIiRzdGF0ZVwiLCBcIiRyb290U2NvcGVcIiwgXCJBdXRoXCIsIFwiVXNlcnNcIiwgZnVuY3Rpb24gKCRzdGF0ZSwgJHJvb3RTY29wZSwgQXV0aCwgVXNlcnMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkudGhlbihmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gVXNlcnMuZ2V0UHJvZmlsZShhdXRoLnVpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKHByb2ZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJvZmlsZS5kaXNwbGF5TmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2ZpbGVcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdnZXRfc3RhcnRlZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgIGF1dGg6IFtcIiRzdGF0ZVwiLCBcIlVzZXJzXCIsIFwiQXV0aFwiLCBmdW5jdGlvbiAoJHN0YXRlLCBVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQGFjY2NvdW50RWRpdCc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLnN0YXRlKCdhY2NvdW50UGFzc3dvcmQnLCB7XHJcbiAgICAgICAgdXJsOiAnL2FjY291bnQvY2hhbmdlUGFzc3dvcmQnLFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAncHJvZmlsZS9wYXNzd2QuaHRtbCdcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5zdGF0ZSgnYWNjb3VudFVzZXJFZGl0Jywge1xyXG4gICAgICAgIHVybDogJy9hY2NvdW50L2VkaXQtZm9ybScsXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdwcm9maWxlL2VkaXQtZm9ybS5odG1sJ1xyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8gRGFzaGJvYXJkXHJcbiAgICAgIC8vIEBwcm9maWxlQ3RybFxyXG4gICAgICAuc3RhdGUoJ2Rhc2hib2FyZCcsIHtcclxuICAgICAgICB1cmw6ICcvdXNlci9kYXNoYm9hcmQnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvZmlsZUN0cmwgYXMgcHJvZmlsZUN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2Rhc2hib2FyZC9pbmRleC5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIHVzZXJQb3N0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBpc093bmVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcHJvZmlsZTogW1wiJHN0YXRlXCIsIFwiJHJvb3RTY29wZVwiLCBcIkF1dGhcIiwgXCJVc2Vyc1wiLCBmdW5jdGlvbiAoJHN0YXRlLCAkcm9vdFNjb3BlLCBBdXRoLCBVc2Vycykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlKGF1dGgudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAocHJvZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIHN0YXQgb2JqZWN0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcm9maWxlLnN0YXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIFVzZXJzLnVzZXJSZWYoYXV0aC51aWQpLmNoaWxkKCdzdGF0L3Vwdm90ZWQvY291bnQnKS5zZXQoMClcclxuICAgICAgICAgICAgICAgICAgICAgIFVzZXJzLnVzZXJSZWYoYXV0aC51aWQpLmNoaWxkKCdzdGF0L3Bvc3RlZC9jb3VudCcpLnNldCgwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgVXNlcnMudXNlclJlZihhdXRoLnVpZCkuY2hpbGQoJ3N0YXQvY29tbWVudC9jb3VudCcpLnNldCgwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgVXNlcnMudXNlclJlZihhdXRoLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93ZXIvY291bnQnKS5zZXQoMClcclxuICAgICAgICAgICAgICAgICAgICAgIFVzZXJzLnVzZXJSZWYoYXV0aC51aWQpLmNoaWxkKCdzdGF0L2ZvbGxvd2luZy9jb3VudCcpLnNldCgwKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgbm8gZGlzcGxheW5hbWUgLSBnbyB0byBnZXRfc3RhcnRlZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9maWxlLmRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZmlsZVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2dldF9zdGFydGVkJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgIGF1dGg6IFtcIiRzdGF0ZVwiLCBcIlVzZXJzXCIsIFwiQXV0aFwiLCBmdW5jdGlvbiAoJHN0YXRlLCBVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS5jYXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQGRhc2hib2FyZCc6IHtcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0F1dGhDdHJsIGFzIGF1dGhDdHJsJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvdG9vbGJhci9tYWluX3Rvb2xiYXIuaHRtbCdcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyBGb2xsbG93IENhdGVnb3J5XHJcbiAgICAgIC8vIEBwcm9maWxlQ3RybFxyXG4gICAgICAuc3RhdGUoJ2ZvbGxvd19jYXRlcycsIHtcclxuICAgICAgICB1cmw6ICcvdXNlci9mb2xsb3ctY2F0ZWdvcmllcycsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9maWxlQ3RybCBhcyBwcm9maWxlQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aC9mb2xsb3ctY2F0ZWdvcmllcy5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIHVzZXJQb3N0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBpc093bmVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcHJvZmlsZTogW1wiVXNlcnNcIiwgXCJBdXRoXCIsIGZ1bmN0aW9uIChVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlKGF1dGgudWlkKS4kbG9hZGVkKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgYXV0aDogW1wiJHN0YXRlXCIsIFwiVXNlcnNcIiwgXCJBdXRoXCIsIGZ1bmN0aW9uICgkc3RhdGUsIFVzZXJzLCBBdXRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLmNhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAZm9sbG93X2NhdGVzJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIEdldHRpbmcgc3RhcnRlZFxyXG4gICAgICAvLyBAcHJvZmlsZUN0cmxcclxuICAgICAgLnN0YXRlKCdnZXRfc3RhcnRlZCcsIHtcclxuICAgICAgICB1cmw6ICcvdXNlci9nZXRfc3RhcnRlZCcsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9maWxlQ3RybCBhcyBwcm9maWxlQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aC9nZXRfc3RhcnRlZC5odG1sJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgIHVzZXJQb3N0czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBpc093bmVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgcHJvZmlsZTogW1wiVXNlcnNcIiwgXCJBdXRoXCIsIGZ1bmN0aW9uIChVc2VycywgQXV0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEF1dGguYXV0aC4kcmVxdWlyZUF1dGgoKS50aGVuKGZ1bmN0aW9uIChhdXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBVc2Vycy5nZXRQcm9maWxlKGF1dGgudWlkKS4kbG9hZGVkKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgYXV0aDogW1wiJHN0YXRlXCIsIFwiVXNlcnNcIiwgXCJBdXRoXCIsIGZ1bmN0aW9uICgkc3RhdGUsIFVzZXJzLCBBdXRoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gQXV0aC5hdXRoLiRyZXF1aXJlQXV0aCgpLmNhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdob21lJylcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdoZWFkZXJAZ2V0X3N0YXJ0ZWQnOiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdBdXRoQ3RybCBhcyBhdXRoQ3RybCcsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL3Rvb2xiYXIvbWFpbl90b29sYmFyLmh0bWwnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLnN0YXRlKCdsb2dpbicsIHtcclxuICAgICAgICB1cmw6ICcvdXNlci9sb2dpbicsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICcnOiB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXV0aC9sb2dpbi5odG1sJ1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICdsb2dpbi1mb3JtQGxvZ2luJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL2xvZ2luLWZvcm0uaHRtbCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQGxvZ2luJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuXHJcbiAgICAgIC5zdGF0ZSgncmVnaXN0ZXInLCB7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvcmVnaXN0ZXInLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAnJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2F1dGgvcmVnaXN0ZXIuaHRtbCdcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICAnaGVhZGVyQHJlZ2lzdGVyJzoge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy90b29sYmFyL21haW5fdG9vbGJhci5odG1sJ1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgcmVxdWlyZU5vQXV0aDogW1wiJHN0YXRlXCIsIFwiQXV0aFwiLCBmdW5jdGlvbiAoJHN0YXRlLCBBdXRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBdXRoLmF1dGguJHJlcXVpcmVBdXRoKCkudGhlbihmdW5jdGlvbiAoYXV0aCkge1xyXG4gICAgICAgICAgICAgICRzdGF0ZS5nbygnaG9tZScpXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgIHJldHVybiBlcnJvclxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfV1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpXHJcbiAgfV0pXHJcblxyXG4gIC5maWx0ZXIoJ29yZGVyT2JqZWN0QnknLCBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGl0ZW1zLCBmaWVsZCwgcmV2ZXJzZSkge1xyXG4gICAgICB2YXIgZmlsdGVyZWQgPSBbXVxyXG4gICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgZmlsdGVyZWQucHVzaChpdGVtLiRpZCkuc2V0KGl0ZW0pXHJcbiAgICAgIH0pXHJcbiAgICAgIGZpbHRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gKGFbZmllbGRdID4gYltmaWVsZF0gPyAxIDogLTEpXHJcbiAgICAgIH0pXHJcbiAgICAgIGlmIChyZXZlcnNlKSBmaWx0ZXJlZC5yZXZlcnNlKClcclxuICAgICAgcmV0dXJuIGZpbHRlcmVkXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLmZpbHRlcignZGVjb2RlVVJJJywgZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAgIHJldHVybiB0ZXh0ID8gZGVjb2RlVVJJKHRleHQpIDogJydcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBGb3JtYXR0aW5nIHRleHRzIHRvIGluY2x1ZGUgbmV3IGxpbmVcclxuICAuZmlsdGVyKCdubDJicicsIFtcIiRzY2VcIiwgZnVuY3Rpb24gKCRzY2UpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGV4dCkge1xyXG4gICAgICByZXR1cm4gdGV4dCA/ICRzY2UudHJ1c3RBc0h0bWwodGV4dC5yZXBsYWNlKC9cXG4vZywgJzxici8+JykpIDogJydcclxuICAgIH1cclxuICB9XSlcclxuXHJcbiAgLmNvbnN0YW50KCdGaXJlYmFzZVVybCcsICdodHRwczovL2JteHl6LmZpcmViYXNlaW8uY29tLycpXHJcblxyXG5mdW5jdGlvbiBzaG93IChkYXRhKSB7XHJcbiAgY29uc29sZS5sb2coZGF0YSlcclxuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMilcclxufVxyXG5cclxuLy8gZm9yIGpvaW5pbmcgLSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9rYXRvd3VsZi82NTk4MjM4XHJcbmZ1bmN0aW9uIGV4dGVuZCAoYmFzZSkge1xyXG4gIHZhciBwYXJ0cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSlcclxuICBwYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XHJcbiAgICBpZiAocCAmJiB0eXBlb2YgKHApID09PSAnb2JqZWN0Jykge1xyXG4gICAgICBmb3IgKHZhciBrIGluIHApIHtcclxuICAgICAgICBpZiAocC5oYXNPd25Qcm9wZXJ0eShrKSkge1xyXG4gICAgICAgICAgYmFzZVtrXSA9IHBba11cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG4gIHJldHVybiBiYXNlXHJcbn1cclxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwJylcclxuICAuY29udHJvbGxlcignQXV0aEN0cmwnLCBbXCJBdXRoXCIsIFwiVXNlcnNcIiwgXCIkc3RhdGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJG1kU2lkZW5hdlwiLCBcIiR0cmFuc2xhdGVcIiwgXCIkY29va2llc1wiLCBcIk5vdGlTZXJ2aWNlXCIsIGZ1bmN0aW9uKEF1dGgsIFVzZXJzLCAkc3RhdGUsJHJvb3RTY29wZSwkbWRTaWRlbmF2LCR0cmFuc2xhdGUsICRjb29raWVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlTZXJ2aWNlKXtcclxuICAgIHZhciBhdXRoQ3RybCA9IHRoaXM7XHJcblxyXG5cclxuICAgIC8vUGFyc2VyXHJcbiAgICBhdXRoQ3RybC5hdXRoICAgICA9IEF1dGg7XHJcbiAgICBhdXRoQ3RybC51c2VycyAgICA9IFVzZXJzO1xyXG4gICAgYXV0aEN0cmwubm90aWZpY2F0aW9uID0gTm90aVNlcnZpY2U7XHJcblxyXG5cclxuICAgIGlmKEF1dGgucmVmLmdldEF1dGgoKSAhPSBudWxsICl7XHJcbiAgICAgIGF1dGhDdHJsLnByb2ZpbGUgID0gYXV0aEN0cmwudXNlcnMuZ2V0UHJvZmlsZShBdXRoLnJlZi5nZXRBdXRoKCkudWlkKTtcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIGF1dGhDdHJsLnByb2ZpbGUgPScnXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGF1dGhDdHJsLnVzZXIgPSB7XHJcbiAgICAgIGVtYWlsOiAnJyxcclxuICAgICAgcGFzc3dvcmQ6ICcnXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICAvL0dldCB0aGUgYmFkZ2Ugbm90aWZpY2F0aW9uXHJcbiAgICBhdXRoQ3RybC5iYWRnZU5vdGlmaWNhdGlvbiA9ICBhdXRoQ3RybC5ub3RpZmljYXRpb24uYWRkQXJyQ2hpbGQoYXV0aEN0cmwucHJvZmlsZS4kaWQrJy91bnJlYWQnKTtcclxuICAgIC8vUmVzZXQgY291bnRlclxyXG4gICAgYXV0aEN0cmwucmVzZXRDb3VudGVyID0gZnVuY3Rpb24oKXtcclxuICAgICAgYXV0aEN0cmwubm90aWZpY2F0aW9uLnJlc2V0VW5yZWFkKGF1dGhDdHJsLnByb2ZpbGUuJGlkKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy9DaGFuZ2UgbGFuZ3VhZ2VcclxuICAgIGF1dGhDdHJsLnRvZ2dsZUxhbmcgPSBmdW5jdGlvbiAobGFuZ0tleSkge1xyXG4gICAgICAkdHJhbnNsYXRlLnVzZShsYW5nS2V5KTtcclxuICAgICAgLy8gU2V0dGluZyBhIGNvb2tpZVxyXG4gICAgICAkY29va2llcy5wdXQoJ3VzZXJMYW5nJywgbGFuZ0tleSk7XHJcbiAgICAgIC8vSWYgdXNlciByZWdpc3RlcmVkIC0gdXBkYXRlIHRoaXMgaW4gdGhlaXIgcHJlZmVyZW5jZVxyXG4gICAgICBpZihBdXRoLnJlZi5nZXRBdXRoKCkpe1xyXG4gICAgICAgIGF1dGhDdHJsLnVzZXJzLnVzZXJBcnJSZWYoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkudXBkYXRlKHtcImxhbmdcIjpsYW5nS2V5fSlcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vQ2hlY2trIHVzZXIgc2VsZWN0ZWQgbGFuZ3VhZ2VcclxuICAgIGlmKCFhdXRoQ3RybC5wcm9maWxlLmxhbmcpe1xyXG4gICAgICBpZigkY29va2llcy5nZXQoJ3VzZXJMYW5nJykpe1xyXG4gICAgICAgIGF1dGhDdHJsLnRvZ2dsZUxhbmcoJGNvb2tpZXMuZ2V0KCd1c2VyTGFuZycpKTtcclxuICAgICAgfWVsc2V7XHJcbiAgICAgICAgYXV0aEN0cmwudG9nZ2xlTGFuZygnRW5nJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIGF1dGhDdHJsLnRvZ2dsZUxhbmcoYXV0aEN0cmwucHJvZmlsZS5sYW5nKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy9Mb2dpblxyXG4gICAgYXV0aEN0cmwubG9naW4gPSBmdW5jdGlvbiAoKXtcclxuICAgICAgYXV0aEN0cmwuYXV0aC5hdXRoLiRhdXRoV2l0aFBhc3N3b3JkKGF1dGhDdHJsLnVzZXIpLnRoZW4oZnVuY3Rpb24gKGF1dGgpe1xyXG4gICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XHJcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcil7XHJcbiAgICAgICAgYXV0aEN0cmwuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vTG9nb3V0XHJcbiAgICBhdXRoQ3RybC5sb2dvdXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICBBdXRoLmF1dGguJHVuYXV0aCgpO1xyXG4gICAgICAkc3RhdGUuZ28oJ2xvZ2luJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9SZWdpc3RlciB1c2VyXHJcbiAgICBhdXRoQ3RybC5yZWdpc3RlciA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICBBdXRoLmF1dGguJGNyZWF0ZVVzZXIoYXV0aEN0cmwudXNlcikudGhlbihmdW5jdGlvbiAodXNlcil7XHJcbiAgICAgICAgYXV0aEN0cmwubG9naW4oKTtcclxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKXtcclxuICAgICAgICBhdXRoQ3RybC5lcnJvciA9IGVycm9yO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIGF1dGhDdHJsLnRvZ2dsZVJpZ2h0ID0gYnVpbGRUb2dnbGVyKCdyaWdodCcpO1xyXG4gICAgZnVuY3Rpb24gYnVpbGRUb2dnbGVyKG5hdklEKSB7XHJcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAkbWRTaWRlbmF2KG5hdklEKVxyXG4gICAgICAgICAgLnRvZ2dsZSgpXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfV0pO1xyXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuZmFjdG9yeSgnQXV0aCcsIFtcIiRmaXJlYmFzZUF1dGhcIiwgXCJGaXJlYmFzZVVybFwiLCBmdW5jdGlvbigkZmlyZWJhc2VBdXRoLCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCk7XG4gICAgdmFyIGF1dGggPSAkZmlyZWJhc2VBdXRoKHJlZik7XG5cbiAgICB2YXIgQXV0aCA9IHtcbiAgICAgIHJlZjpyZWYsXG4gICAgICBhdXRoOiBhdXRoLFxuXG4gICAgICBnZXRVaWQ6ZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHVpZCA9IHJlZi5nZXRBdXRoKCk7XG4gICAgICAgIGlmKHVpZCAhPSBudWxsICl7XG4gICAgICAgICAgcmV0dXJuIHJlZi5nZXRBdXRoKCkudWlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH1cblxuICAgIHJldHVybiBBdXRoO1xuICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxyXG4gIC5jb250cm9sbGVyKCdDYXRlQ3RybCcsIFtcIiRzdGF0ZVwiLCBcIkNhdGVnb3J5XCIsIFwiY2F0ZU5hbWVcIiwgXCJjYXRlVG9waWNzXCIsIGZ1bmN0aW9uKCRzdGF0ZSwgQ2F0ZWdvcnksY2F0ZU5hbWUsY2F0ZVRvcGljcyl7XHJcbiAgICB2YXIgY2F0ZUN0cmwgPSB0aGlzO1xyXG5cclxuICAgIC8vUGFyc2Vyc1xyXG4gICAgY2F0ZUN0cmwuY2F0ZU5hbWUgICA9IGNhdGVOYW1lO1xyXG4gICAgY2F0ZUN0cmwuY2F0ZWdvcnkgICA9IENhdGVnb3J5O1xyXG4gICAgY2F0ZUN0cmwuY2F0ZVRvcGljcyA9IGNhdGVUb3BpY3M7XHJcblxyXG4gIH1dKTtcclxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwJylcblxuICAvL1RvcGljIGxpc3RcbiAgLmZhY3RvcnkoJ0NhdGVTZXJ2aWNlJywgW1wiJGZpcmViYXNlT2JqZWN0XCIsIFwiJGZpcmViYXNlQXJyYXlcIiwgXCJGaXJlYmFzZVVybFwiLCBmdW5jdGlvbigkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5ICwgRmlyZWJhc2VVcmwpe1xuICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ2NhdGVnb3JpZXMnKTtcbiAgICB2YXIgY2F0ZWdvcmllcyA9ICRmaXJlYmFzZU9iamVjdChyZWYpO1xuXG4gICAgdmFyIENhdGUgPSB7XG5cbiAgICAgIG5hbWU6IGZ1bmN0aW9uKHRvcGljX3NsdWcpe1xuICAgICAgICB2YXIgZGF0YSA9IHJlZi5vcmRlckJ5Q2hpbGQoXCJzbHVnXCIpLmVxdWFsVG8odG9waWNfc2x1Zyk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICBmb3J0b3BpYzogZnVuY3Rpb24odG9waWNfc2x1Zyl7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QodXNlcnNSZWYuY2hpbGQodWlkKSk7XG4gICAgICB9LFxuXG4gICAgICBhZGRDaGlsZDogZnVuY3Rpb24oY2hpbGRuYW1lKXtcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZG5hbWUpXG4gICAgICB9LFxuXG4gICAgICBmb2xsb3dMaXN0OmZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHZhciBkYXRhID0gcmVmLm9yZGVyQnlDaGlsZChcIm5ld3MvZm9sbG93ZXJcIikuZXF1YWxUbyh1aWQpO1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICB1bkZvbGxvdzpmdW5jdGlvbihzbHVnLHVpZCl7XG4gICAgICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ2NhdGVnb3JpZXMvJytzbHVnKycvZm9sbG93ZXIvJyt1aWQpO1xuICAgICAgICByZWYucmVtb3ZlKCk7XG4gICAgICB9LFxuXG4gICAgICB1c2VyRm9sbG93OmZ1bmN0aW9uKHNsdWcsdWlkKXtcbiAgICAgICAgdmFyIGZvbGxvdz1mYWxzZTtcbiAgICAgICAgdmFyIHJlZiAgICA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnY2F0ZWdvcmllcy8nK3NsdWcrJy9mb2xsb3dlci8nK3VpZCk7XG4gICAgICAgIHJlZi5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgICBmb2xsb3cgPSBzbmFwc2hvdC5leGlzdHMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZvbGxvdztcbiAgICAgIH0sXG4gICAgICBhcnI6ICRmaXJlYmFzZUFycmF5KHJlZiksXG4gICAgICBhbGw6Y2F0ZWdvcmllc1xuICAgIH1cbiAgICByZXR1cm4gQ2F0ZTtcbiAgfV0pXG5cblxuYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG5cbiAgLy9Ub3BpYyBsaXN0XG4gIC5mYWN0b3J5KCdQb3N0JywgW1wiJGZpcmViYXNlT2JqZWN0XCIsIFwiRmlyZWJhc2VVcmxcIiwgZnVuY3Rpb24oJGZpcmViYXNlT2JqZWN0LCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiAgICA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsndG9waWNzJyk7XG4gICAgdmFyIHRvcGljcyA9ICRmaXJlYmFzZU9iamVjdChyZWYpO1xuXG4gICAgdmFyIFRTID0ge1xuICAgICAgdG9waWNOYW1lOiBmdW5jdGlvbih0b3BpY19zbHVnKXtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKFwic2x1Z1wiKS5lcXVhbFRvKHRvcGljX3NsdWcpO1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KGRhdGEpO1xuICAgICAgfSxcbiAgICAgIGZvcnRvcGljOiBmdW5jdGlvbih0b3BpY19zbHVnKXtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdCh1c2Vyc1JlZi5jaGlsZCh1aWQpKTtcbiAgICAgIH0sXG4gICAgICBhbGw6dG9waWNzXG4gICAgfVxuICAgIHJldHVybiBUUztcbiAgfV0pXG5cblxuYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdEYXNoYm9hcmRDdHJsJywgW1wiQXV0aFwiLCBcIiRzdGF0ZVwiLCBcIkNhdGVnb3J5XCIsIFwiQ2F0ZVNlcnZpY2VcIiwgXCJUYWdzXCIsIFwiJHRpbWVvdXRcIiwgXCIkbWRTaWRlbmF2XCIsIFwiJGxvZ1wiLCBmdW5jdGlvbihBdXRoLCAkc3RhdGUsQ2F0ZWdvcnksQ2F0ZVNlcnZpY2UsVGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dCwgJG1kU2lkZW5hdiwgJGxvZykge1xuICAgIHZhciBkYXNoYm9hcmRDdHJsID0gdGhpcztcblxuICAgIGRhc2hib2FyZEN0cmwuYXV0aCA9IEF1dGg7XG5cbiAgICBkYXNoYm9hcmRDdHJsLmNhdGUgPSBDYXRlU2VydmljZTtcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGVnb3JpZXMgICAgICA9IENhdGVnb3J5LmFsbDtcbiAgICBkYXNoYm9hcmRDdHJsLnRvcGljX2dyaWQgID0gZmFsc2U7XG4gICAgZGFzaGJvYXJkQ3RybC50YWdzICAgICAgICA9IFRhZ3MuYXJyO1xuXG4gICAgZGFzaGJvYXJkQ3RybC51c2VyQ2F0ZUZvbGxvdyAgPSBbXTtcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGVJc0ZvbGxvdyAgICA9IFtdO1xuICAgIGRhc2hib2FyZEN0cmwuZm9sbG93TGlzdCAgICAgID0gJyc7XG5cblxuICAgIC8vQ2xvc2UgU2lkZSBiYXJcbiAgICBkYXNoYm9hcmRDdHJsLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgJG1kU2lkZW5hdigncmlnaHQnKS5jbG9zZSgpO1xuICAgIH07XG5cblxuICAgIGRhc2hib2FyZEN0cmwuZm9sbG93Q2F0ZSA9IGZ1bmN0aW9uKGNhdGVfc2x1Zyl7XG4gICAgICBkYXNoYm9hcmRDdHJsLmNhdGUuYWRkQ2hpbGQoY2F0ZV9zbHVnKycvZm9sbG93ZXInKVxuICAgICAgICAuY2hpbGQoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICB9XG4gIH1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG5cblxuICAvL0xpc3Qgb2YgY2F0ZWdvcmllcyBvbiB0aGUgc2lkZXJiYXJcbiAgLmRpcmVjdGl2ZSgncmV2aWV3U2NvcmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAgICAgJ0UnLFxuICAgICAgdHJhbnNjbHVkZTogICB0cnVlLFxuICAgICAgY29udHJvbGxlcjogICAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogICd0ZW1wbGF0ZXMvaHRtbC9yZXZpZXctc3VtbWFyeS1saXN0Lmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcmV2aWV3OiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy9Gb2xsb3cgQnV0dG9uXG4gIC5kaXJlY3RpdmUoJ3VzZXJGb2xsb3dlckJ0bicsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICAgICAnRScsXG4gICAgICB0cmFuc2NsdWRlOiAgIHRydWUsXG4gICAgICBjb250cm9sbGVyOiAgICdUb3BpY0N0cmwgYXMgdG9waWNDdHJsJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAgJ3RlbXBsYXRlcy9odG1sL2ZvbGxvdy11c2VyLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgZm9sbG93OiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy9DYXRlZ29yeSBmb2xsb3cgYnV0dG9uXG4gIC5kaXJlY3RpdmUoJ2NhdGVGb2xsb3dCdG4nLGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9jYXRlZ29yeS1mb2xsb3ctYnRuLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY2F0ZTogJz0nXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC8vTGlzdCBvZiBjYXRlZ29yaWVzIG9uIHRoZSBzaWRlcmJhclxuICAuZGlyZWN0aXZlKCd0b3BpY0dyaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9jYXRlZ29yeS1ncmlkLmh0bWwnXG4gICAgfVxuICB9KVxuXG4gIC8vR3JpZCBUYWdzIGZvciBzaWRlYmFyXG4gIC5kaXJlY3RpdmUoJ3RhZ0dyaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC90YWctZ3JpZC5odG1sJ1xuICAgIH1cbiAgfSlcblxuXG4gIC5kaXJlY3RpdmUoJ3RvcGljQ3JlYXRlJywgZnVuY3Rpb24oKXtcblxuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sbGVyOiAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL3RvcGljLWNyZWF0ZS5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHRvcGljOiAnPSdcbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcblxuXG4gIC5kaXJlY3RpdmUoJ3RvcGljTGlzdCcsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udHJvbGxlcjogJ1RvcGljQ3RybCBhcyB0b3BpY0N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC90b3BpYy1saXN0Lmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgdG9waWNzOiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cblxuICAuZGlyZWN0aXZlKCd0b3BpY0FjdGlvbnNDYXJkJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sbGVyOiAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL3RvcGljLWFjdGlvbnMtY2FyZC5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHRvcGljOiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cblxuICAvL2ZvciB0YWdzIC0gbWF4IHRhZ3NcbiAgLmRpcmVjdGl2ZSgnZW5mb3JjZU1heFRhZ3MnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ0N0cmwpIHtcbiAgICAgIHZhciBtYXhUYWdzID0gYXR0cnMubWF4VGFncyA/IHBhcnNlSW50KGF0dHJzLm1heFRhZ3MsICc0JykgOiBudWxsO1xuXG4gICAgICBuZ0N0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgbWF4VGFncyAmJiB2YWx1ZS5sZW5ndGggPiBtYXhUYWdzKSB7XG4gICAgICAgICAgdmFsdWUuc3BsaWNlKHZhbHVlLmxlbmd0aCAtIDEsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgW1wiJHN0YXRlXCIsIFwiQ2F0ZWdvcnlcIiwgXCJUb3BpY3NcIiwgXCJmZWVkXCIsIGZ1bmN0aW9uKCRzdGF0ZSxDYXRlZ29yeSxUb3BpY3MsZmVlZCl7XG4gICAgdmFyIGhvbWVDdHJsID0gdGhpcztcblxuICAgIGhvbWVDdHJsLnRvcGljcyA9IENhdGVnb3J5O1xuICAgIGhvbWVDdHJsLnRvcGljcyA9IFRvcGljcztcbiAgICBob21lQ3RybC5mZWVkICAgPSBmZWVkO1xuICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29uZmlnKFsnJHRyYW5zbGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCR0cmFuc2xhdGVQcm92aWRlcikge1xuICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ0VuZycsIHtcbiAgICAgICdLRVlfREFTSEJPQVJEJzogICdEYXNoYm9hcmQnLFxuICAgICAgJ0tFWV9MQU5HVUFHRVMnOiAgJ0xhbmd1YWdlcycsXG4gICAgICAnS0VZX0hPTUUnOiAgICAgICAnSG9tZScsXG4gICAgICAnS0VZX1JFR0lTVEVSJzogICAnUmVnaXN0ZXInLFxuICAgICAgJ0tFWV9MT0dJTic6ICAgICAgJ0xvZyBpbicsXG4gICAgICAnS0VZX0xPR09VVCc6ICAgICAnTG9nIG91dCcsXG4gICAgICAnS0VZX0ZPTExPVyc6ICAgICAnRm9sbG93JyxcbiAgICAgICdLRVlfRk9MTE9XRVInOiAgICdGb2xsb3dlcicsXG4gICAgICAnS0VZX1VORk9MTE9XJzogICAnVW5mb2xsb3cnLFxuICAgICAgJ0tFWV9GT0xMT1dJTkcnOiAgJ0ZvbGxvd2luZycsXG4gICAgICAnS0VZX1BPU1QnOiAgICAgICAnUG9zdCcsXG4gICAgICAnS0VZX1BPU1RFRCc6ICAgICAnUG9zdGVkJyxcbiAgICAgICdLRVlfVVBWT1RFJzogICAgICdVcHZvdGUnLFxuICAgICAgJ0tFWV9VUFZPVEVEJzogICAgJ1Vwdm90ZWQnLFxuICAgICAgJ0tFWV9EV05fVk9URSc6ICAgJ0Rvd252b3RlJyxcbiAgICAgICdLRVlfRFdOX1ZPVEVEJzogICdEb3dudm90ZWQnLFxuICAgICAgJ0tFWV9WSUVXJzogICAgICAgJ1ZpZXcnLFxuICAgICAgJ0tFWV9SRU1PVkUnOiAgICAgJ1JlbW92ZScsXG4gICAgICAnS0VZX0NBTkNFTCc6ICAgICAnQ2FuY2VsJyxcbiAgICAgICdLRVlfUVVFU1RJT04nOiAgICdRdWVzdGlvbicsXG4gICAgICAnS0VZX1RPUElDJzogICAgICAnVG9waWMnLFxuICAgICAgJ0tFWV9DSEdfUFdEJzogICAgJ0NoYW5nZSBQYXNzd29yZCcsXG4gICAgICAnS0VZX1BBU1NXT1JEJzogICAnUGFzc3dvcmQnLFxuICAgICAgJ0tFWV9PTERfUFdEJzogICAgJ09sZCBQYXNzd29yZCcsXG4gICAgICAnS0VZX05FV19QV0QnOiAgICAnTmV3IFBhc3N3b3JkJyxcbiAgICAgICdLRVlfTkVXX1BXRF9DJzogICdOZXcgcGFzc3dvcmQgY29uZmlybWF0aW9uJyxcbiAgICAgICdLRVlfU0FWRSc6ICAgICAgICdTYXZlJyxcbiAgICAgICdLRVlfU0FWRV9EUkFGVCc6ICdTYXZlIGFzIGRyYWZ0JyxcbiAgICAgICdLRVlfVEFHUyc6ICAgICAgICdUYWdzJyxcbiAgICAgICdLRVlfRVhQTE9SRSc6ICAgICdFeHBsb3JlJyxcbiAgICAgICdLRVlfQ09NTUVOVFMnOiAgICdDb21tZW50cycsXG4gICAgICAnS0VZX1JFUExZJzogICAgICAnUmVwbHknLFxuICAgICAgJ0tFWV9SRVZJRVcnOiAgICAgJ1JldmlldycsXG4gICAgICAnS0VZX0VESVQnOiAgICAgICAnRWRpdCcsXG4gICAgICAnS0VZX1RSRU5EJzogICAgICAnVHJlbmQnLFxuICAgICAgJ0tFWV9UUkVORElORyc6ICAgJ1RyZW5kaW5nJyxcbiAgICAgICdLRVlfV1JJVEVfUkVQTFknOidXcml0ZSBhIHJlcGx5JyxcbiAgICAgICdLRVlfTEFURVNUX0ZFRUQnOidMYXRlc3QgRmVlZCcsXG5cbiAgICAgIC8vUmVtb3ZlIHRvcGljXG4gICAgICAnS0VZX0NPTkZfUkVNT1ZFJzonQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlbW92ZT8nLFxuICAgICAgJ0tFWV9DT05GX1JFTV9DJzogJ09uY2UgcmVtb3ZlLCB5b3Ugd2lsbCBub3QgYmUgYWJsZXRvIHRvIGdldCB0aGlzIHRvcGljIGJhY2snLFxuXG5cbiAgICAgIC8vU0VOVEVOQ0VcbiAgICAgICdLRVlfV0hBVF9PTl9VUl9NSU5EJzogICdXaGF0XFwncyBvbiB5b3VyIG1pbmQ/JyxcbiAgICAgICdLRVlfWU9VX1dBTlRfRk9MTE9XJzogICdZb3UgbWF5IHdhbnQgdG8gZm9sbG93JyxcbiAgICAgICdLRVlfTk9fQUNDVF9SRUdJU1RFUic6ICdEb25cXCd0IGhhdmUgYWNjb3VudD8gUmVnaXN0ZXInLFxuICAgICAgJ0tFWV9DQU5UX0NITkdfVVNFUic6ICAgJ0RvblxcJ3QgaGF2ZSBhY2NvdW50PyBSZWdpc3RlcicsXG4gICAgICAnS0VZX1lPVVJfQUNDT1VOVCc6ICAgICAnWW91ciBhY2NvdW50JyxcbiAgICAgICdLRVlfTk9USElOR19IRVJFJzogICAgICdOb3RoaW5nIGhlcmUsIHlldCcsXG4gICAgICAnS0VZX1dIT19UT19GT0xMT1cnOiAgICAnV2hvIHRvIGZvbGxvdycsXG4gICAgICAnS0VZX0NBVF9XSUxMX0FQUEVBUic6ICAnRm9sbG93IHNvbWUgY2F0ZWdvcmllcyBhbmQgaXQgd2lsbCBhcHBlYXIgaGVyZScsXG4gICAgICAnS0VZX1dIVF9VUl9TVE9SWSc6ICAgICAnV2hhdFxcJ3MgeW91ciBzdG9yeScsXG4gICAgICAnS0VZX1dSVF9DT01NRU5UJzogICAgICAnV3JpdGUgYSBjb21tZW50JyxcblxuXG5cbiAgICAgIC8vVVNFUiBJTlBVVFxuICAgICAgJ0tFWV9GSVJTVE5BTUUnOiAgJ0ZpcnN0IG5hbWUnLFxuICAgICAgJ0tFWV9MQVNUTkFNRSc6ICAgJ0xhc3QgbmFtZScsXG4gICAgICAnS0VZX0JJUlRIREFZJzogICAnQmlydGhkYXknLFxuICAgICAgJ0tFWV9NT05USCc6ICAgICAgJ01vbnRoJyxcbiAgICAgICdLRVlfREFZJzogICAgICAgICdEYXknLFxuICAgICAgJ0tFWV9FTUFJTCc6ICAgICAgJ0VtYWlsJyxcbiAgICAgICdLRVlfQ09ORl9FTUFJTCc6ICdDb25maXJtIEVtYWlsJyxcbiAgICAgICdLRVlfR0VOREVSJzogICAgICdHZW5kZXInLFxuICAgICAgJ0tFWV9NQUxFJzogICAgICAgJ01hbGUnLFxuICAgICAgJ0tFWV9GRU1BTEUnOiAgICAgJ0ZlbWFsZScsXG4gICAgICAnS0VZX1VTRVJOQU1FJzogICAnVXNlcm5hbWUnLFxuICAgICAgJ0tFWV9MT0NBVElPTic6ICAgJ0xvY2F0aW9uJyxcblxuICAgICAgLy9Vc2VyIEVkaXRcbiAgICAgICdLRVlfRURfUFJPRklMRSc6ICdFZGl0IFByb2ZpbGUnLFxuICAgICAgJ0tFWV9FRF9DSEdfUFdEJzogJ0NoYW5nZSBQYXNzd29yZCcsXG4gICAgICAnS0VZX0VEX1BST0ZJTEUnOiAnRWRpdCBQcm9maWxlJyxcbiAgICAgICdLRVlfRURfU0lURSc6ICAgICdXZWJzaXRlJyxcbiAgICAgICdLRVlfRURfUEhPTkUnOiAgICdQaG9uZScsXG4gICAgICAnS0VZX0VEX0JJTyc6ICAgICAnQmlvZ3JhcGh5JyxcblxuICAgIH0pO1xuXG4gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygn4LmE4LiX4LiiJywge1xuICAgICAgJ0tFWV9EQVNIQk9BUkQnOiAgJ+C4q+C5ieC4reC4h+C4l+C4seC5ieC4h+C4q+C4oeC4lCcsXG4gICAgICAnS0VZX0xBTkdVQUdFUyc6ICAn4Lig4Liy4Lip4LiyJyxcbiAgICAgICdLRVlfSE9NRSc6ICAgICAgICfguKvguJnguYnguLLguYHguKPguIEnLFxuICAgICAgJ0tFWV9SRUdJU1RFUic6ICAgJ+C4quC4oeC4seC4hOC4o+C5g+C4iuC5iScsXG4gICAgICAnS0VZX0xPR0lOJzogICAgICAn4LmA4LiC4LmJ4Liy4Liq4Li54LmI4Lij4Liw4Lia4LiaJyxcbiAgICAgICdLRVlfRk9MTE9XJzogICAgICfguJXguLTguJTguJXguLLguKEnLFxuICAgICAgJ0tFWV9QT1NUJzogICAgICAgJ+C5guC4nuC4quC4leC5jCdcbiAgICB9KTtcblxuICAgICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZW4nKTtcbiAgfV0pXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29udHJvbGxlcignTm90aUN0cmwnLCBbXCIkc3RhdGVcIiwgXCJDYXRlZ29yeVwiLCBcIlRvcGljc1wiLCBcIk5vdGlTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRzdGF0ZSxDYXRlZ29yeSxUb3BpY3MsTm90aVNlcnZpY2Upe1xuICAgIHZhciBub3RpQ3RybCA9IHRoaXM7XG5cblxuICAgIG5vdGlDdHJsLnRvcGljcyA9IFRvcGljcztcbiAgICBub3RpQ3RybC5mZWVkICAgPSBmZWVkO1xuICAgIG5vdGlDdHJsLm5vdGlTZXJ2aWNlID0gTm90aVNlcnZpY2U7XG5cbiAgICBub3RpQ3RybC5ub3RpZnlUbyA9ZnVuY3Rpb24odWlkKXtcbiAgICAgIHJldHVybiBub3RpQ3RybC5hcnIucHVzaCh1aWQpLiRhZGQodWlkKVxuICAgIH1cbiAgfV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnQXBwJylcblxuICAuZmFjdG9yeSgnTm90aVNlcnZpY2UnLCBbXCIkZmlyZWJhc2VPYmplY3RcIiwgXCIkZmlyZWJhc2VBcnJheVwiLCBcIkZpcmViYXNlVXJsXCIsIFwiVXNlcnNcIiwgZnVuY3Rpb24oJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSAsIEZpcmViYXNlVXJsLCBVc2Vycyl7XG4gICAgdmFyIHJlZiAgICA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnbm90aWZpY2F0aW9uJyk7XG4gICAgdmFyIG5vdGkgPSAkZmlyZWJhc2VPYmplY3QocmVmKTtcbiAgICB2YXIgdXNlcnMgPSBVc2VycztcblxuICAgIHZhciBOb3RpZmljYXRpb24gPSB7XG5cbiAgICAgIHVucmVhZE5vdGlmaWNhdGlvbjpmdW5jdGlvbih1aWQpe1xuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydub3RpZmljYXRpb24vJyt1aWQpO1xuICAgICAgICBjb25zb2xlLmxvZygkZmlyZWJhc2VPYmplY3QocmVmLm9yZGVyQnlDaGlsZChcImlzX3JlYWRcIikuZXF1YWxUbyhcImZhbHNlXCIpKSk7XG4gICAgICB9LFxuXG4gICAgICAvL05vdGlmeSBmb2xsb3dlcnNcbiAgICAgIG5vdGlmeUZvbGxvd2VyOmZ1bmN0aW9uKHRvcGljSWQsdWlkKXtcbiAgICAgICAgdmFyIHJlZiA9IHVzZXJzLmdldEZvbGxvd2VyKHVpZCk7XG4gICAgICAgIHJlZi5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkU25hcHNob3QpIHtcbiAgICAgICAgICAgIC8vdXBkYXRlIG5vdGlmaWNhdGlvbiBhbmQgZGV0YWlsc1xuICAgICAgICAgICAgTm90aWZpY2F0aW9uLnVwZGF0ZU5vdGlmaWNhdGlvbkNvdW50KHRvcGljSWQsY2hpbGRTbmFwc2hvdC5rZXkoKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgIH0sXG5cbiAgICAgIC8vQWRkIGRldGFpbCBmb3IgdGhpcyBub3RpZmljdGlhb25cbiAgICAgIG5vdGlmeUxvZzpmdW5jdGlvbih0b3BpY0lkLHVpZCl7XG4gICAgICAgIE5vdGlmaWNhdGlvbi5hZGRDaGlsZCh1aWQpLnB1c2goKS5zZXQoe1xuICAgICAgICAgIHRvcGljSWQ6ICAgIHRvcGljSWQsXG4gICAgICAgICAgZnJvbTogICAgICAgdWlkLFxuICAgICAgICAgIGlzX3JlYWQ6ICAgIGZhbHNlLFxuICAgICAgICAgIHRpbWVzdGFtcDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG5cbiAgICAgIC8vUmVzZXQgdW5yZWFkIGNvdW50ZXJcbiAgICAgIHJlc2V0VW5yZWFkOmZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ25vdGlmaWNhdGlvbi8nK3VpZCsnL3VucmVhZCcpO1xuICAgICAgICByZWYuc2V0KDApO1xuICAgICAgfSxcblxuXG4gICAgICAvL1VwZGF0ZSBub3RpZmljYXRpb25cbiAgICAgIC8vQHBhcmFtcyB1aWQgLSB3aG8gdGhpcyBub3RpZmljYXRpb24gaXMgZ29pbmcgdG9cbiAgICAgIHVwZGF0ZU5vdGlmaWNhdGlvbkNvdW50OmZ1bmN0aW9uKHRvcGljSWQsdWlkKXtcbiAgICAgICAgY29uc29sZS5sb2coXCI+Pj5cIiArIHVpZCk7XG4gICAgICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ25vdGlmaWNhdGlvbi8nK3VpZCsnL3VucmVhZCcpO1xuICAgICAgICByZWYub25jZShcInZhbHVlXCIsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG4gICAgICAgICAgLy9kZWZhdWx0IHVucmVhZCBpcyAxXG4gICAgICAgICBpZihzbmFwc2hvdC52YWwoKSA9PSAnbnVsbCcpe1xuICAgICAgICAgICAgcmVmLnNldCgxKVxuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmVmLnNldChzbmFwc2hvdC52YWwoKSArIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yT2JqZWN0KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJUaGUgcmVhZCBmYWlsZWQ6IFwiICsgZXJyb3JPYmplY3QuY29kZSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAvL0FkZCB0byBsb2dcbiAgICAgICAgICBOb3RpZmljYXRpb24ubm90aWZ5TG9nKHRvcGljSWQsdWlkKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG5cbiAgICAgIGFkZENoaWxkOmZ1bmN0aW9uKGNoaWxkKXtcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZCk7XG4gICAgICB9LFxuXG4gICAgICBhZGRBcnJDaGlsZDpmdW5jdGlvbihjaGlsZCl7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKGNoaWxkKSk7XG4gICAgICB9LFxuXG4gICAgICBhcnI6ICRmaXJlYmFzZUFycmF5KHJlZiksXG4gICAgICBhbGw6IG5vdGlcbiAgICB9XG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbiAgfV0pXG5cblxuYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdQbGFjZXNDdHJsJywgW1wiJHN0YXRlXCIsIFwiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRtZERpYWxvZ1wiLCBcIiRtZE1lZGlhXCIsIFwiVGFnc1wiLCBcIlRvcGljc1wiLCBcIkF1dGhcIiwgXCJVc2Vyc1wiLCBcIlNsdWdcIiwgXCJMYW5ndWFnZXNcIiwgXCJwbGFjZUxhbmRpbmdcIiwgZnVuY3Rpb24oJHN0YXRlLCRzY29wZSwkcm9vdFNjb3BlLCAkbWREaWFsb2csICRtZE1lZGlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2VydmljZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUYWdzLCBUb3BpY3MsIEF1dGgsIFVzZXJzLCBTbHVnLExhbmd1YWdlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZUxhbmRpbmcpIHtcblxuICAgIHZhciBwbGFjZXNDdHJsID0gdGhpcztcbiAgICBjb25zb2xlLmxvZyhwbGFjZUxhbmRpbmcpO1xuICAgIHBsYWNlc0N0cmwucGxhY2VMYW5kaW5nID0gcGxhY2VMYW5kaW5nO1xuXG4gIH1dKTtcblxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmZhY3RvcnkoJ1BsYWNlcycsIFtcIiRmaXJlYmFzZUFycmF5XCIsIFwiRmlyZWJhc2VVcmxcIiwgZnVuY3Rpb24oJGZpcmViYXNlQXJyYXksIEZpcmViYXNlVXJsKXtcblxuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ3BsYWNlcycpO1xuICAgIHZhciBwbGFjZURldGFpbF9yZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ3BsYWNlc19kZXRhaWxzJyk7XG5cbiAgICB2YXIgcGxhY2VzID0gJGZpcmViYXNlQXJyYXkocmVmKTtcblxuICAgIHZhciBQbGFjZXMgPSB7XG4gICAgICBhZGRDaGlsZDogZnVuY3Rpb24oY2hpbGRuYW1lKXtcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZG5hbWUpXG4gICAgICB9LFxuXG4gICAgICBhZGRQbGFjZURldGFpbENoaWxkOiBmdW5jdGlvbihjaGlsZG5hbWUpe1xuICAgICAgICByZXR1cm4gcGxhY2VEZXRhaWxfcmVmLmNoaWxkKGNoaWxkbmFtZSlcbiAgICAgIH0sXG5cbiAgICAgIGdldFBsYWNlUmVmOmZ1bmN0aW9uKHBsYWNlX2lkKXtcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChwbGFjZV9pZCsnL2luZm8nKTtcbiAgICAgIH0sXG4gICAgICBhcnI6IHBsYWNlc1xuICAgIH1cbiAgICByZXR1cm4gUGxhY2VzO1xuICB9XSlcblxuYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG5cbiAgLy9DYXRlZ29yeSBsaXN0XG4gIC5mYWN0b3J5KCdDYXRlZ29yeScsIFtcIiRmaXJlYmFzZU9iamVjdFwiLCBcIiRmaXJlYmFzZUFycmF5XCIsIFwiRmlyZWJhc2VVcmxcIiwgZnVuY3Rpb24oJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSwgRmlyZWJhc2VVcmwpe1xuICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ2NhdGVnb3JpZXMnKTtcbiAgICB2YXIgY2F0ZWdvcmllcyA9ICRmaXJlYmFzZU9iamVjdChyZWYpO1xuICAgIHZhciB0b3BpY0FyciA9ICRmaXJlYmFzZUFycmF5KHJlZik7XG5cbiAgICB2YXIgQ2F0ZWdvcnkgPSB7XG4gICAgICBnZXROYW1lOiBmdW5jdGlvbihzbHVnKXtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYuY2hpbGQoc2x1Zyk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICBhbGw6IGNhdGVnb3JpZXNcbiAgICB9XG4gICAgcmV0dXJuIENhdGVnb3J5O1xuICB9XSlcblxuXG4gIC8vTGFuZ3VhZ2VzXG4gIC5mYWN0b3J5KCdMYW5ndWFnZXMnLCBbXCIkZmlyZWJhc2VBcnJheVwiLCBcIkZpcmViYXNlVXJsXCIsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnbGFuZ3VhZ2VzJyk7XG4gICAgdmFyIGxhbmcgPSAkZmlyZWJhc2VBcnJheShyZWYpO1xuXG4gICAgcmV0dXJuIGxhbmc7XG4gIH1dKVxuXG5cbiAgLy9MYW5ndWFnZXNcbiAgLmZhY3RvcnkoJ0FyY2hpdmUnLCBbXCIkZmlyZWJhc2VBcnJheVwiLCBcIkZpcmViYXNlVXJsXCIsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnYXJjaGl2ZScpO1xuICAgIHZhciBhcmNoaXZlID0gJGZpcmViYXNlQXJyYXkocmVmKTtcblxuICAgIHZhciBBcmNoaXZlID17XG4gICAgICBhZGRDaGlsZDogZnVuY3Rpb24oc2x1Zyl7XG4gICAgICAgIHJldHVybiByZWYuY2hpbGQoc2x1Zyk7XG4gICAgICB9LFxuICAgICAgcmVmOiByZWYsXG4gICAgICBhcnI6IGFyY2hpdmVcbiAgICB9XG4gICAgcmV0dXJuIEFyY2hpdmU7XG4gIH1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdUYWdDdHJsJywgW1wiQXV0aFwiLCBcIlVzZXJzXCIsIFwiJHN0YXRlXCIsIFwiJHJvb3RTY29wZVwiLCBcInRhZ0xhbmRpbmdcIiwgXCJ0YWdOYW1lXCIsIGZ1bmN0aW9uKEF1dGgsIFVzZXJzLCAkc3RhdGUsJHJvb3RTY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1Jlc29sdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWdMYW5kaW5nLHRhZ05hbWUpIHtcblxuICAgIHZhciB0YWdDdHJsID0gdGhpcztcbiAgICB0YWdDdHJsLnRhZ0xhbmRpbmcgID0gdGFnTGFuZGluZztcbiAgICB0YWdDdHJsLnRhZ05hbWUgICAgID0gdGFnTmFtZTtcblxuICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxyXG4gIC5mYWN0b3J5KCdUYWdzJywgW1wiJGZpcmViYXNlQXJyYXlcIiwgXCIkZmlyZWJhc2VPYmplY3RcIiwgXCJGaXJlYmFzZVVybFwiLCBcIiRxXCIsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIEZpcmViYXNlVXJsLCAkcSl7XHJcblxyXG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsndGFncycpO1xyXG4gICAgdmFyIHRhZ3MgPSAkZmlyZWJhc2VBcnJheShyZWYpO1xyXG5cclxuICAgIHZhciBUYWdzID0ge1xyXG5cclxuICAgICAgYWRkQ2hpbGQ6IGZ1bmN0aW9uKGNoaWxkbmFtZSl7XHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZG5hbWUpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB0YWdzVXJsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZik7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRUYWdSZWY6ZnVuY3Rpb24odGFnKXtcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHRhZyk7XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRUYWdPYmplY3Q6ZnVuY3Rpb24odGFnKXtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0YWcpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdG9waWNUYWdzOmZ1bmN0aW9uKHRhZyl7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIGZiID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKTtcclxuICAgICAgICB2YXIgZGF0YVJldCA9ICcnO1xyXG5cclxuICAgICAgICByZXR1cm4gZmIuY2hpbGQoJ3RhZ3MvJyt0YWcpXHJcbiAgICAgICAgICAub24oJ2NoaWxkX2FkZGVkJywgZnVuY3Rpb24odGFnU25hcCl7XHJcbiAgICAgICAgICAgIGZiLmNoaWxkKCd0b3BpY3MnKVxyXG4gICAgICAgICAgICAgIC5vcmRlckJ5Q2hpbGQoXCJ0YWdzXCIpXHJcbiAgICAgICAgICAgICAgLmVxdWFsVG8odGFnKVxyXG4gICAgICAgICAgICAgIC5vbignY2hpbGRfYWRkZWQnLCBmdW5jdGlvbih0b3BpY1NuYXApIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIC8vc2hvdyggZXh0ZW5kKHt9LCB0YWdTbmFwLnZhbCgpLCB0b3BpY1NuYXAudmFsKCkpICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZW5kKHt9LCB0YWdTbmFwLnZhbCgpLCB0b3BpY1NuYXAudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhUmV0KTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGFycjogdGFnc1xyXG5cclxuICAgIH1cclxuICAgIHJldHVybiBUYWdzO1xyXG4gIH1dKVxyXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxyXG4gIC5jb250cm9sbGVyKCdUb3BpY0xhbmRpbmdDdHJsJywgW1wiJHN0YXRlXCIsIFwiJHNjb3BlXCIsIFwiU2x1Z1wiLCBcIlRvcGljc1wiLCBcIkF1dGhcIiwgXCJVc2Vyc1wiLCBcImlzT3duZXJcIiwgXCJ0b3BpY0xhbmRpbmdcIiwgXCJyZXBseUxpc3RcIiwgXCJ2aWV3RGF0YVwiLCBcImZvbGxvd2Vyc1wiLCBmdW5jdGlvbiAoJHN0YXRlLCAkc2NvcGUsIFNsdWcsIFRvcGljcywgQXV0aCwgVXNlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9SZXNvbHZlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPd25lcix0b3BpY0xhbmRpbmcsIHJlcGx5TGlzdCwgdmlld0RhdGEsIGZvbGxvd2Vycykge1xyXG5cclxuICAgIHZhciB0b3BpY0xhbmRpbmdDdHJsID0gdGhpc1xyXG5cclxuXHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLmF1dGggICAgICAgICA9IEF1dGg7XHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnVzZXJzICAgICAgICA9IFVzZXJzO1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC50b3BpY0xhbmRpbmcgPSB0b3BpY0xhbmRpbmc7XHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnRvcGljcyAgICAgICA9IFRvcGljcztcclxuICAgIHRvcGljTGFuZGluZ0N0cmwucmVwbHlMaXN0ICAgID0gcmVwbHlMaXN0O1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC52aWV3cyAgICAgICAgPSB2aWV3RGF0YTtcclxuICAgIHRvcGljTGFuZGluZ0N0cmwuZm9sbG93ZXJzICAgID0gZm9sbG93ZXJzO1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC5pc093bmVyICAgICAgPSBpc093bmVyO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8vR2V0dGluZyBSZXBsaWVzIGluIHJlcGxpZXNcclxuICAgIHRvcGljTGFuZGluZ0N0cmwuaW5SZXBseUFyciA9IFtdO1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC5yZXBseUluUmVwbHkgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgZm9yKHZhciBpPTA7IGk8dG9waWNMYW5kaW5nQ3RybC5yZXBseUxpc3QubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgdmFyIHRvcGljSWQgPSB0b3BpY0xhbmRpbmdDdHJsLnJlcGx5TGlzdFtpXS50b3BpY0lkO1xyXG4gICAgICAgIHZhciByZXBseUlkID0gdG9waWNMYW5kaW5nQ3RybC5yZXBseUxpc3RbaV0uJGlkO1xyXG4gICAgICAgIHRvcGljTGFuZGluZ0N0cmwuaW5SZXBseUFycltpXSA9IHRvcGljTGFuZGluZ0N0cmwudG9waWNzLnJlcGx5SW5SZXBseSh0b3BpY0lkLHJlcGx5SWQpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdG9waWNMYW5kaW5nQ3RybC5yZXBseUluUmVwbHkoKTtcclxuICB9XSlcclxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ1RvcGljQ3RybCcsIFtcIiRzdGF0ZVwiLCBcIiRzY29wZVwiLCBcIiRyb290U2NvcGVcIiwgXCIkbWREaWFsb2dcIiwgXCIkbWRNZWRpYVwiLCBcIiRodHRwXCIsIFwiRmlyZWJhc2VVcmxcIiwgXCIkdHJhbnNsYXRlXCIsIFwiTm90aVNlcnZpY2VcIiwgXCJUYWdzXCIsIFwiVG9waWNzXCIsIFwiQXV0aFwiLCBcIlVzZXJzXCIsIFwiU2x1Z1wiLCBcIlBsYWNlc1wiLCBcIkxhbmd1YWdlc1wiLCBcIkFyY2hpdmVcIiwgZnVuY3Rpb24oJHN0YXRlLCRzY29wZSwkcm9vdFNjb3BlLCAkbWREaWFsb2csICRtZE1lZGlhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAsRmlyZWJhc2VVcmwsJHRyYW5zbGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vU2VydmljZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlTZXJ2aWNlLFRhZ3MsIFRvcGljcywgQXV0aCwgVXNlcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTbHVnLFBsYWNlcywgTGFuZ3VhZ2VzLEFyY2hpdmUpe1xuXG4gICAgdmFyIHRvcGljQ3RybCA9IHRoaXM7XG5cblxuICAgIC8vUGFyc2VyIGhlcmVcbiAgICB0b3BpY0N0cmwudGFncyAgICAgID0gVGFncztcbiAgICB0b3BpY0N0cmwudG9waWNzICAgID0gVG9waWNzO1xuICAgIHRvcGljQ3RybC5hdXRoICAgICAgPSBBdXRoO1xuICAgIHRvcGljQ3RybC51c2VycyAgICAgPSBVc2VycztcbiAgICB0b3BpY0N0cmwubGFuZ3VhZ2VzID0gTGFuZ3VhZ2VzO1xuICAgIHRvcGljQ3RybC5wbGFjZXMgICAgPSBQbGFjZXM7XG4gICAgdG9waWNDdHJsLmFyY2hpdmUgICA9IEFyY2hpdmU7XG4gICAgdG9waWNDdHJsLm5vdGkgICAgICA9IE5vdGlTZXJ2aWNlO1xuXG4gICAgaWYodG9waWNDdHJsLmF1dGgucmVmLmdldEF1dGgoKSAhPSBudWxsICl7XG4gICAgICB0b3BpY0N0cmwucHJvZmlsZSAgPSB0b3BpY0N0cmwudXNlcnMuZ2V0UHJvZmlsZSh0b3BpY0N0cmwuYXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCk7XG4gICAgICB0b3BpY0N0cmwudWlkID0gdG9waWNDdHJsLnByb2ZpbGUuJGlkO1xuICAgICAgdG9waWNDdHJsLnVzZXJSZWYgPSB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKTtcbiAgICAgIHRvcGljQ3RybC51c2VyVXB2b3RlZFRvcGljcyA9IHRvcGljQ3RybC51c2Vycy51cHZvdGVzKHRvcGljQ3RybC51aWQpO1xuICAgICAgdG9waWNDdHJsLnVzZXJEb3dudm90ZWRUb3BpY3MgPSB0b3BpY0N0cmwudXNlcnMuZG93bnZvdGVzKHRvcGljQ3RybC51aWQpO1xuICAgICAgdG9waWNDdHJsLnVzZXJGb2xsb3dpbmcgPSB0b3BpY0N0cmwudXNlcnMuZm9sbG93aW5nKHRvcGljQ3RybC51aWQpO1xuICAgIH1cbiAgICBlbHNle1xuICAgICAgdG9waWNDdHJsLnByb2ZpbGUgPScnO1xuICAgICAgdG9waWNDdHJsLnVpZCA9ICcnO1xuICAgICAgdG9waWNDdHJsLnVzZXJSZWYgPSAnJztcbiAgICB9XG5cblxuXG4gICAgLy9QcmVzZXQgUGFyYW1ldGVyc1xuICAgIHRvcGljQ3RybC5pbWFnZVN0cmluZ3MgID0gW107XG4gICAgdG9waWNDdHJsLmltYWdlVGV4dCAgICAgPSBbXTtcbiAgICB0b3BpY0N0cmwuaW5SZXBseUFyciAgICA9IFtdO1xuICAgIHRvcGljQ3RybC5sb2FkQnVzeSAgICAgID0gZmFsc2U7XG4gICAgdG9waWNDdHJsLnNsdWdSZXR1cm4gICAgPSBudWxsO1xuICAgIHRvcGljQ3RybC5jcml0ZXJpYSAgICAgID0gZmFsc2U7XG4gICAgdG9waWNDdHJsLmNyaXRlcmlhUmVwbHkgPSBudWxsO1xuICAgIHRvcGljQ3RybC5yZXZpZXdDcml0ZXJpYT1mYWxzZTtcbiAgICB0b3BpY0N0cmwuY3JpdFJlcGx5RGF0YSA9IG51bGw7XG5cbiAgICAvL2lmIGFsbG93IG51bGwgaW4gdGhlIGZvcm1cbiAgICB0b3BpY0N0cmwubmV3VG9waWMgICAgICA9IHtcbiAgICAgICdsb2NhdGlvbic6ICcnLFxuICAgICAgJ3VybCcgOiAnJyxcbiAgICAgICdpcEluZm8nOiAnJyxcbiAgICAgICd0YWdzJzogJycsXG4gICAgICAnYm9keSc6ICcnXG4gICAgfVxuXG5cbiAgICAvL0NhbGMgYXZlcmFnZSByZXZpZXcgaW5wdXQgaW4gcmVwbHlcbiAgICB0b3BpY0N0cmwuYXZnUmV2aWV3UmVwbHkgPSBmdW5jdGlvbigpe1xuXG4gICAgICB2YXIgb2JqQ291bnQgPSBPYmplY3Qua2V5cyh0b3BpY0N0cmwuY3JpdGVyaWFSZXBseSkubGVuZ3RoO1xuICAgICAgdmFyIGF2ZyA9IDBcbiAgICAgIGZvcih2YXIgaT0wO2k8b2JqQ291bnQ7aSsrKXtcbiAgICAgICAgYXZnID0gYXZnICsgdG9waWNDdHJsLmNyaXRlcmlhUmVwbHlbaV07XG4gICAgICB9XG5cbiAgICAgIHRvcGljQ3RybC5yZXBseVJldmlld0F2ZXJhZ2UgPSBhdmcvb2JqQ291bnQ7XG5cbiAgICAgIGNvbnNvbGUubG9nKHRvcGljQ3RybC5jcml0ZXJpYVJlcGx5KTtcblxuICAgICAgdG9waWNDdHJsLmNyaXRSZXBseURhdGEgPSB7IGF2ZzogdG9waWNDdHJsLnJlcGx5UmV2aWV3QXZlcmFnZSwgZGF0YTogdG9waWNDdHJsLmNyaXRlcmlhUmVwbHl9XG4gICAgfVxuXG5cbiAgICAvL0dldCB0aGUgYXZlcmFnZSBzY29yZSBmcm9tIGNyaXRlcmlhIHZhbHVlc1xuICAgIHRvcGljQ3RybC5hdmdSZXZpZXdTY29yZSA9IGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgaWYoZGF0YSlcbiAgICAgIHtcbiAgICAgIHZhciBhdmcgPTA7XG4gICAgICBmb3IodmFyIGk9MDtpPGRhdGEubGVuZ3RoO2krKyl7XG4gICAgICAgIGF2ZyA9IGF2ZyArIGRhdGFbaV0ucmF0aW5nO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF2Zy9kYXRhLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vTGFiZWwgZm9yIHJlbW92ZSB0b3BpY3NcbiAgICAkdHJhbnNsYXRlKFsnS0VZX1JFTU9WRScsICdLRVlfQ0FOQ0VMJywnS0VZX0NPTkZfUkVNT1ZFJywnS0VZX0NPTkZfUkVNX0MnXSkudGhlbihmdW5jdGlvbiAodHJhbnNsYXRpb25zKSB7XG4gICAgICB0b3BpY0N0cmwucmVtb3ZlVHJhbnMgPSB0cmFuc2xhdGlvbnMuS0VZX1JFTU9WRTtcbiAgICAgIHRvcGljQ3RybC5jYW5jZWxUcmFucyA9IHRyYW5zbGF0aW9ucy5LRVlfQ0FOQ0VMO1xuICAgICAgdG9waWNDdHJsLmNvbmZpcm1SZW0gID0gdHJhbnNsYXRpb25zLktFWV9DT05GX1JFTU9WRTtcbiAgICAgIHRvcGljQ3RybC5jb25maXJtUmVtQ29udGVudCA9ICB0cmFuc2xhdGlvbnMuS0VZX0NPTkZfUkVNX0M7XG4gICAgfSk7XG5cblxuICAgIHRvcGljQ3RybC51c2VyTmFtZSA9IGZ1bmN0aW9uKHVzZXJJZCl7XG4gICAgICBpZih1c2VySWQhPSBudWxsKXtcbiAgICAgICAgcmV0dXJuIHRvcGljQ3RybC51c2Vycy5nZXREaXNwbGF5TmFtZSh1c2VySWQpO1xuICAgICAgfVxuICAgIH1cblxuXG5cblxuICAgIC8vTG9naW4gZm9yIG1hdGVyaWFsXG4gICAgdG9waWNDdHJsLnNob3dNZExvZ2luID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgIHZhciB1c2VGdWxsU2NyZWVuID0gKCRtZE1lZGlhKCdzbScpIHx8ICRtZE1lZGlhKCd4cycpKSAmJiAkc2NvcGUuY3VzdG9tRnVsbHNjcmVlbjtcbiAgICAgICRtZERpYWxvZy5zaG93KHtcbiAgICAgICAgICBjb250cm9sbGVyOiAnQXV0aEN0cmwgYXMgYXV0aEN0cmwnLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndGVtcGxhdGVzL2h0bWwvbWQtbG9naW4tZm9ybS5odG1sJyxcbiAgICAgICAgICBwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcbiAgICAgICAgICB0YXJnZXRFdmVudDogZXYsXG4gICAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTogdHJ1ZSxcbiAgICAgICAgICBmdWxsc2NyZWVuOiB1c2VGdWxsU2NyZWVuXG4gICAgICAgIH0pXG4gICAgfVxuXG5cblxuICAgIHRvcGljQ3RybC5kZWNvZGVUZXh0ID0gZnVuY3Rpb24odGV4dCl7XG4gICAgICAvL3JldHVybiAkZmlsdGVyKCdzbHVnaWZ5JykoaXRlbS5uYW1lKTtcbiAgICAgIGNvbnNvbGUubG9nKGRlY29kZVVSSSh0ZXh0KSk7XG4gICAgICByZXR1cm4gZGVjb2RlVVJJKHRleHQpO1xuICAgIH1cblxuXG4gICAgdG9waWNDdHJsLmxvYWRNb3JlID0gZnVuY3Rpb24oaXRlbXMpIHtcbiAgICAgIHRvcGljQ3RybC5sb2FkQnVzeSA9IHRydWU7XG4gICAgICB2YXIgZGF0YSA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkYXRhLnB1c2goaXRlbXNbaV0pO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICByZXR1cm4gZGF0YVxuICAgIH07XG5cbiAgICB0b3BpY0N0cmwubG9hZFRhZ3MgPSBmdW5jdGlvbihxdWVyeSkge1xuICAgICAgY29uc29sZS5sb2codG9waWNDdHJsLnRhZ3MudGFnc1VybCgpKTtcbiAgICB9O1xuXG5cbiAgICAvKnRvcGljQ3RybC51c2Vycy5nZXRMb2NhdGlvbklQKCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICB0b3BpY0N0cmwubmV3VG9waWMuaXBJbmZvID0gZGF0YTtcbiAgICB9KTsqL1xuXG5cbiAgICAvL1VwbG9hZCBQcm9maWxlIGltYWdlXG4gICAgdG9waWNDdHJsLnVwbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlcyxpbmRleCkge1xuICAgICAgYW5ndWxhci5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbiAoZmxvd0ZpbGUsIGluZGV4KSB7XG4gICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICB2YXIgdXJpID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICB0b3BpY0N0cmwuaW1hZ2VTdHJpbmdzW2luZGV4XSA9IHVyaTtcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZsb3dGaWxlLmZpbGUpO1xuICAgICAgfSlcbiAgICB9O1xuXG5cbiAgICAvL1Nob3cgY29uZmlybSByZW1vdmUgdG9waWNcbiAgICB0b3BpY0N0cmwuc2hvd0NvbmZpcm1SZW1vdmUgPSBmdW5jdGlvbihldix0b3BpY19vd25lcixvYmope1xuICAgICAgLy8gQXBwZW5kaW5nIGRpYWxvZyB0byBkb2N1bWVudC5ib2R5IHRvIGNvdmVyIHNpZGVuYXYgaW4gZG9jcyBhcHBcbiAgICAgIHZhciBjb25maXJtID0gJG1kRGlhbG9nLmNvbmZpcm0oKVxuICAgICAgICAudGl0bGUodG9waWNDdHJsLmNvbmZpcm1SZW0pXG4gICAgICAgIC50ZXh0Q29udGVudCh0b3BpY0N0cmwuY29uZmlybVJlbUNvbnRlbnQpXG4gICAgICAgIC50YXJnZXRFdmVudChldilcbiAgICAgICAgLm9rKHRvcGljQ3RybC5yZW1vdmVUcmFucylcbiAgICAgICAgLmNhbmNlbCh0b3BpY0N0cmwuY2FuY2VsVHJhbnMpO1xuICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgaWYodG9waWNDdHJsLnJlbW92ZVRvcGljKHRvcGljX293bmVyLG9iaikpe1xuICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vUmVtb3ZlIHRvcGljXG4gICAgdG9waWNDdHJsLnJlbW92ZVRvcGljID0gZnVuY3Rpb24odG9waWNfb3duZXIsb2JqKXtcbiAgICAgIC8vdmVyaWZ5IGlmIHRoZSB0b3BpYyBvd25lciBhbmQgdGhlIGxvZ2luIG93bmVyIGlzIHRoZSBzYW1lIHBwbFxuICAgICAgaWYodG9waWNfb3duZXIgPT0gdG9waWNDdHJsLnVpZCl7XG4gICAgICAgIG1vdmVGYlJlY29yZCh0b3BpY0N0cmwudG9waWNzLnJlZkNoaWxkKG9iai4kaWQpLCB0b3BpY0N0cmwuYXJjaGl2ZS5hZGRDaGlsZChvYmouJGlkKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgfVxuICAgIH1cblxuXG4gICAgLy9SZXBseSB0byB0b3BpY1xuICAgIHRvcGljQ3RybC5yZXBseSA9IGZ1bmN0aW9uKHRvcGljT2JqKXtcblxuICAgICAgdG9waWNDdHJsLnRvcGljcy5yZXBseUFycih0b3BpY09iai4kaWQpLiRhZGQoe1xuICAgICAgICB0b3BpY0lkOiAgdG9waWNPYmouJGlkLFxuICAgICAgICBib2R5OiAgICAgdG9waWNDdHJsLm5ld1JlcGx5LmJvZHksXG4gICAgICAgIHVpZDogICAgICB0b3BpY0N0cmwudWlkLFxuICAgICAgICByZXZpZXc6ICAgdG9waWNDdHJsLmNyaXRSZXBseURhdGEsXG4gICAgICAgIGNyZWF0ZWQ6ICBtb21lbnQoKS50b0lTT1N0cmluZygpXG4gICAgfSlcblxuICAgICAgdG9waWNDdHJsLm5vdGkudXBkYXRlTm90aWZpY2F0aW9uQ291bnQodG9waWNPYmoudWlkLHRvcGljQ3RybC51aWQpO1xuXG5cbiAgICAgIC8qdG9waWNDdHJsLm5vdGkuYWRkQ2hpbGQodG9waWNPYmoudWlkKS5wdXNoKCkuc2V0KHtcbiAgICAgICAgdG9waWNJZDogICAgdG9waWNPYmouJGlkLFxuICAgICAgICBmcm9tOiAgICAgICB0b3BpY0N0cmwudWlkLFxuICAgICAgICBpc19yZWFkOiAgICBmYWxzZSxcbiAgICAgICAgdGltZXN0YW1wOiAgbW9tZW50KCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7Ki9cblxuXG4gICAgICB0b3BpY0N0cmwudG9waWNzLnJlcGx5Q291bnQodG9waWNPYmouJGlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgaWYoIWRhdGEuY291bnQpe1xuICAgICAgICAgIHRvcGljQ3RybC50b3BpY3MucmVwbHlDb3VudFJlZih0b3BpY09iai4kaWQpLnNldCgxKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgdG9waWNDdHJsLnRvcGljcy5yZXBseUNvdW50UmVmKHRvcGljT2JqLiRpZClcbiAgICAgICAgICAgIC5zZXQoZGF0YS5jb3VudCArMSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG5cbiAgICAgIC8vU3RhdCB1cGRhdGUgZm9yIHVzZXJcbiAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L2NvbW1lbnQvY291bnQnKVxuICAgICAgICAuc2V0KHRvcGljQ3RybC5wcm9maWxlLnN0YXQuY29tbWVudC5jb3VudCArIDEpO1xuXG4gICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9jb21tZW50L3RvcGljcy8nK3RvcGljT2JqLiRpZClcbiAgICAgICAgLnB1c2goKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSk7XG4gICAgfVxuXG5cblxuICAgIC8vUmVwbHkgaW4gcmVwbHlcbiAgICB0b3BpY0N0cmwucmVwbHlJblJlcGx5ID0gZnVuY3Rpb24odG9waWNJZCxyZXBseUlkKXtcbiAgICAgIHRvcGljQ3RybC50b3BpY3MucmVwbHlJblJlcGx5QXJyKHRvcGljSWQscmVwbHlJZCkuJGFkZCh7XG4gICAgICAgIGJvZHk6ICAgICB0b3BpY0N0cmwucmVwbHlJblJlcGx5LmJvZHksXG4gICAgICAgIHVpZDogICAgICB0b3BpY0N0cmwudWlkLFxuICAgICAgICBjcmVhdGVkOiAgbW9tZW50KCkudG9JU09TdHJpbmcoKVxuICAgICAgfSlcbiAgICB9XG5cblxuXG4gICAgdG9waWNDdHJsLmFkZE5ld0Nob2ljZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5ld0l0ZW1ObyA9IHRvcGljQ3RybC5yZXZpZXdDcml0ZXJpYS5sZW5ndGgrMTtcbiAgICAgIHRvcGljQ3RybC5yZXZpZXdDcml0ZXJpYS5wdXNoKHsnaWQnOidjcml0ZXJpYScrbmV3SXRlbU5vfSk7XG4gICAgfTtcblxuICAgIHRvcGljQ3RybC5yZW1vdmVDaG9pY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsYXN0SXRlbSA9IHRvcGljQ3RybC5yZXZpZXdDcml0ZXJpYS5sZW5ndGgtMTtcbiAgICAgIHRvcGljQ3RybC5yZXZpZXdDcml0ZXJpYS5zcGxpY2UobGFzdEl0ZW0pO1xuICAgIH07XG5cblxuICAgIC8vQ3JlYXRlIG5ldyB0b3BpY1xuICAgIHRvcGljQ3RybC5jcmVhdGVUb3BpYyA9IGZ1bmN0aW9uKGNhdGVnb3J5LGlzRHJhZnQpe1xuXG4gICAgICAvL0NoZWNrIGlmIHdlIGhhdmUgbG9jYXRpb24gZGV0YWlsc1xuICAgICAgdmFyIGxvY2F0aW9uRGV0YWlsID0gJyc7XG5cbiAgICAgIGlmKHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbiAhPT0gJycgKXtcbiAgICAgICAgY29uc29sZS5sb2codG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uKTtcbiAgICAgICAgbG9jYXRpb25EZXRhaWwgPSB7XG4gICAgICAgICAgcGxhY2VfaWQ6IHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLnBsYWNlX2lkLFxuICAgICAgICAgIHNsdWc6ICAgICBTbHVnLnNsdWdpZnkodG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uLmRldGFpbHMubmFtZSksXG4gICAgICAgICAgbmFtZTogICAgIHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLm5hbWUsXG4gICAgICAgICAgYWRkcmVzczogIHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLmZvcm1hdHRlZF9hZGRyZXNzLFxuICAgICAgICAgIGxhdDogICAgICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICBsbmc6ICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubG5nKCksXG4gICAgICAgICAgbG5nOiAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5sb2NhdGlvbi5kZXRhaWxzLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpLFxuICAgICAgICAgIGxuZzogICAgICB0b3BpY0N0cmwubmV3VG9waWMubG9jYXRpb24uZGV0YWlscy5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgIC8qIERFQlVHIEZPUk0gVkFMVUVcbiAgICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHR5cGU6ICAgICAgICAgICB0b3BpY0N0cmwudHlwZSxcbiAgICAgICAgbGFuZzogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5sYW5nLFxuICAgICAgICB0b3BpYzogICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRvcGljLFxuICAgICAgICBib2R5OiAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLmJvZHksXG4gICAgICAgIGNhdGVnb3J5OiAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgdWlkOiAgICAgICAgICAgIHRvcGljQ3RybC51aWQsXG4gICAgICAgIHNsdWc6ICAgICAgICAgICBTbHVnLnNsdWdpZnkodG9waWNDdHJsLm5ld1RvcGljLnRvcGljKSxcbiAgICAgICAgcGhvdG9zOiAgICAgICAgIHRvcGljQ3RybC5pbWFnZVN0cmluZ3MsXG4gICAgICAgIHBob3Rvc190ZXh0OiAgICB0b3BpY0N0cmwuaW1hZ2VUZXh0LFxuICAgICAgICBsb2NhdGlvbjogICAgICAgbG9jYXRpb25EZXRhaWwsXG4gICAgICAgIHVybDogICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMudXJsLFxuICAgICAgICBkcmFmdDogICAgICAgICAgaXNEcmFmdCxcbiAgICAgICAgY3JlYXRlZDogICAgICAgIG1vbWVudCgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHRhZ3M6ICAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMudGFncyxcbiAgICAgICAgdXNlcklQOiAgICAgICB0b3BpY0N0cmwubmV3VG9waWMuaXBJbmZvXG4gICAgICB9O1xuICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAqL1xuXG4gICAgICB0b3BpY0N0cmwudG9waWNzLmFyci4kYWRkKHtcbiAgICAgICAgICB0eXBlOiAgICAgICAgICAgdG9waWNDdHJsLnR5cGUsXG4gICAgICAgICAgbGFuZzogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5sYW5nLFxuICAgICAgICAgIHRvcGljOiAgICAgICAgICB0b3BpY0N0cmwubmV3VG9waWMudG9waWMsXG4gICAgICAgICAgYm9keTogICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5ib2R5LFxuICAgICAgICAgIGNhdGVnb3J5OiAgICAgICBjYXRlZ29yeSxcbiAgICAgICAgICB1aWQ6ICAgICAgICAgICAgdG9waWNDdHJsLnVpZCxcbiAgICAgICAgICAvL3NsdWc6ICAgICAgICAgICBTbHVnLnNsdWdpZnkodG9waWNDdHJsLm5ld1RvcGljLnRvcGljKSxcbiAgICAgICAgICBzbHVnOiAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRvcGljLFxuICAgICAgICAgIHBob3RvczogICAgICAgICB0b3BpY0N0cmwuaW1hZ2VTdHJpbmdzLFxuICAgICAgICAgIHBob3Rvc190ZXh0OiAgICB0b3BpY0N0cmwuaW1hZ2VUZXh0LFxuICAgICAgICAgIGxvY2F0aW9uOiAgICAgICBsb2NhdGlvbkRldGFpbCxcbiAgICAgICAgICB1cmw6ICAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnVybCxcbiAgICAgICAgICBkcmFmdDogICAgICAgICAgaXNEcmFmdCxcbiAgICAgICAgICBjcmVhdGVkOiAgICAgICAgbW9tZW50KCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICB0YWdzOiAgICAgICAgICAgdG9waWNDdHJsLm5ld1RvcGljLnRhZ3MsXG4gICAgICAgICAgdXNlcklQOiAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYy5pcEluZm8sXG4gICAgICAgICAgcmV2aWV3OiAgICAgICAgIHRvcGljQ3RybC5yZXZpZXdDcml0ZXJpYSxcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbih0b3BpYyl7XG5cbiAgICAgICAgICB2YXIgc2x1Z1RleHQgPScnO1xuICAgICAgICAgIC8vaWYgd2UgYXJlIHVuYWJsZSB0byBjb252ZXJ0IHRvIHNsdWcgdGhlbiB3ZSB1c2UgdGhlIHRvcGljIHRleHQsIGVsc2UgdXNlIHNsdWdcbiAgICAgICAgICBpZihTbHVnLnNsdWdpZnkodG9waWNDdHJsLm5ld1RvcGljLnRvcGljKSA9PScnKXtcbiAgICAgICAgICAgIHNsdWdUZXh0ID0gdG9waWNDdHJsLm5ld1RvcGljLnRvcGljO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgc2x1Z1RleHQgPSBTbHVnLnNsdWdpZnkodG9waWNDdHJsLm5ld1RvcGljLnRvcGljKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL1VwZGF0ZSBzbHVnIHdpdGggdG9waWMgS2V5XG4gICAgICAgICAgdG9waWNDdHJsLnRvcGljcy5nZXRUb3BpY0J5S2V5KHRvcGljLmtleSgpKS51cGRhdGUoe1wic2x1Z1wiOnNsdWdUZXh0K3RvcGljLmtleSgpfSk7XG5cbiAgICAgICAgICAvL1N0YXQgdXBkYXRlXG4gICAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvcG9zdGVkL2NvdW50JylcbiAgICAgICAgICAgIC5zZXQodG9waWNDdHJsLnByb2ZpbGUuc3RhdC5wb3N0ZWQuY291bnQgKyAxKTtcblxuICAgICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L3Bvc3RlZC90b3BpY3MvJyt0b3BpYy5rZXkoKSlcbiAgICAgICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuXG4gICAgICAgICAgLy9JZiB0aGVyZSBpcyBsb2NhdGlvblxuICAgICAgICAgIGlmKGxvY2F0aW9uRGV0YWlsICE9PSAnJyl7XG5cbiAgICAgICAgICAgIHRvcGljQ3RybC5wbGFjZXMuYWRkQ2hpbGQobG9jYXRpb25EZXRhaWwucGxhY2VfaWQpXG4gICAgICAgICAgICAgICAgICAgICAgLmNoaWxkKHRvcGljLmtleSgpKVxuICAgICAgICAgICAgICAgICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICB0b3BpY0N0cmwucGxhY2VzLmFkZENoaWxkKGxvY2F0aW9uRGV0YWlsLnBsYWNlX2lkKVxuICAgICAgICAgICAgICAuY2hpbGQoJ2luZm8nKS5zZXQobG9jYXRpb25EZXRhaWwpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vaWYgdGhlcmUgYXJlIHRhZ3NcbiAgICAgICAgICBpZih0b3BpY0N0cmwubmV3VG9waWMudGFncyAhPT0gbnVsbCl7XG4gICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdG9waWNDdHJsLm5ld1RvcGljLnRhZ3MubGVuZ3RoOyArK2luZGV4KSB7XG4gICAgICAgICAgICAgIHRvcGljQ3RybC50YWdzLmFkZENoaWxkKHRvcGljQ3RybC5uZXdUb3BpYy50YWdzW2luZGV4XS50ZXh0KVxuICAgICAgICAgICAgICAgIC5jaGlsZCh0b3BpYy5rZXkoKSkucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvL05vdGlmeSBmb2xsb3dlclxuICAgICAgICAgIHRvcGljQ3RybC5ub3RpLm5vdGlmeUZvbGxvd2VyKHRvcGljLmtleSgpLHRvcGljQ3RybC51aWQpO1xuXG5cbiAgICAgICAgICAvL1Jlc2V0IGZvcm0gaGVyZVxuICAgICAgICAgIHRvcGljQ3RybC5uZXdUb3BpYyA9IHtcbiAgICAgICAgICAgIGJvZHk6ICcnXG4gICAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vQ2hlY2sgaWYgdXNlciBpcyBhbHJlYWR5IGZvbGxvd2luZyB1c2VyXG4gICAgdG9waWNDdHJsLmNoZWNrRm9sbG93ID0gZnVuY3Rpb24oZm9sbG93X3VpZCl7XG4gICAgICBpZih0b3BpY0N0cmwudXNlcnMuY2hlY2tGb2xsb3codG9waWNDdHJsLnVpZCxmb2xsb3dfdWlkKSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cblxuICAgIC8vRm9sbG93IFVzZXJcbiAgICB0b3BpY0N0cmwuZm9sbG93VXNlciA9IGZ1bmN0aW9uKGZvbGxvd191aWQpe1xuXG4gICAgICAvL1VwZGF0ZSB0aGUgcGVyc29uIHRoYXQgYmVpbmcgZm9sbG93LCBjcmVkaXQgdGhlbSBmb3IgaGF2aW5nIGZvbGxvd2VyXG4gICAgICB0b3BpY0N0cmwudXNlcnMuZ2V0UHJvZmlsZShmb2xsb3dfdWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKGZvbGxvd191aWQpLmNoaWxkKCdzdGF0L2ZvbGxvd2VyL2NvdW50JylcbiAgICAgICAgICAuc2V0KGRhdGEuc3RhdC5mb2xsb3dlci5jb3VudCArIDEpO1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKGZvbGxvd191aWQpLmNoaWxkKCdzdGF0L2ZvbGxvd2VyL3VpZC8nKyB0b3BpY0N0cmwudWlkKVxuICAgICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vVXBkYXRlIHRoZSBwZXJzb24gdGhhdCBpcyBmb2xsb3dpbmcsIGNyZWRpdCB0aGVtIGZvciBoYXZpbmcgZm9sbG93aW5nXG4gICAgICB0b3BpY0N0cmwudXNlcnMuZ2V0UHJvZmlsZSh0b3BpY0N0cmwudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljQ3RybC51aWQpLmNoaWxkKCdzdGF0L2ZvbGxvd2luZy9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQuZm9sbG93ZXIuY291bnQgKyAxKTtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dpbmcvdWlkLycrIGZvbGxvd191aWQpXG4gICAgICAgICAgLnB1c2goKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSk7XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8vVW5mb2xsb3cgVXNlclxuICAgIHRvcGljQ3RybC51bmZvbGxvd1VzZXIgPSBmdW5jdGlvbihmb2xsb3dfdWlkKXtcblxuICAgICAgLy9VcGRhdGUgdGhlIHBlcnNvbiB0aGF0IGJlaW5nIGZvbGxvdywgY3JlZGl0IHRoZW0gZm9yIGhhdmluZyBmb2xsb3dlclxuICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUoZm9sbG93X3VpZCkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZihmb2xsb3dfdWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQuZm9sbG93ZXIuY291bnQgLSAxKTtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZihmb2xsb3dfdWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dlci91aWQvJysgdG9waWNDdHJsLnVpZCkucmVtb3ZlKCk7XG4gICAgICB9KTtcblxuICAgICAgLy9VcGRhdGUgdGhlIHBlcnNvbiB0aGF0IGlzIGZvbGxvd2luZywgY3JlZGl0IHRoZW0gZm9yIGhhdmluZyBmb2xsb3dpbmdcbiAgICAgIHRvcGljQ3RybC51c2Vycy5nZXRQcm9maWxlKHRvcGljQ3RybC51aWQpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWNDdHJsLnVpZCkuY2hpbGQoJ3N0YXQvZm9sbG93aW5nL2NvdW50JylcbiAgICAgICAgICAuc2V0KGRhdGEuc3RhdC5mb2xsb3dpbmcuY291bnQgLSAxKTtcblxuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpY0N0cmwudWlkKS5jaGlsZCgnc3RhdC9mb2xsb3dpbmcvdWlkLycrIGZvbGxvd191aWQpLnJlbW92ZSgpO1xuICAgICAgfSk7XG5cbiAgICB9XG5cblxuXG4gICAgIC8vdXB2b3RlXG4gICAgdG9waWNDdHJsLnVwdm90ZSA9IGZ1bmN0aW9uKHRvcGljKXtcblxuICAgICAgaWYodG9waWMuZG93bnZvdGVzICE9IHVuZGVmaW5lZCAmJiB0b3BpYy5kb3dudm90ZXNbdG9waWNDdHJsLnVpZF0gIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgdG9waWNDdHJsLmNhbmNlbERvd252b3RlKHRvcGljKTtcbiAgICAgIH1cbiAgICAgIHRvcGljQ3RybC50b3BpY3MudXB2b3RlVG9waWModG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgIHRvcGljQ3RybC51c2VyVXB2b3RlZFRvcGljcy5jaGlsZCh0b3BpYy4kaWQpLnNldCh2YWx1ZS4kdmFsdWUpO1xuXG4gICAgICAgIC8vU3RhdCB1cGRhdGVcbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUodG9waWMudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgIHRvcGljQ3RybC51c2Vycy51c2VyUmVmKHRvcGljLnVpZCkuY2hpbGQoJ3N0YXQvdXB2b3RlZC9jb3VudCcpXG4gICAgICAgICAgLnNldChkYXRhLnN0YXQudXB2b3RlZC5jb3VudCArIDEpO1xuICAgICAgICB0b3BpY0N0cmwudXNlcnMudXNlclJlZih0b3BpYy51aWQpLmNoaWxkKCdzdGF0L3Vwdm90ZWQvdG9waWNzLycrdG9waWMuJGlkKVxuICAgICAgICAgIC5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRvcGljQ3RybC5jYW5jZWxVcHZvdGUgPSBmdW5jdGlvbih0b3BpYyl7XG4gICAgICB0b3BpY0N0cmwudG9waWNzLnVuZG9VcHZvdGUodG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKTtcblxuICAgICAgdG9waWNDdHJsLnVzZXJzLmdldFByb2ZpbGUodG9waWMudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgIC8vU3RhdCB1cGRhdGVcbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWMudWlkKS5jaGlsZCgnc3RhdC91cHZvdGVkL2NvdW50JylcbiAgICAgICAgICAuc2V0KGRhdGEuc3RhdC51cHZvdGVkLmNvdW50IC0gMSk7XG5cbiAgICAgICAgdG9waWNDdHJsLnVzZXJzLnVzZXJSZWYodG9waWMudWlkKS5jaGlsZCgnc3RhdC91cHZvdGVkL3RvcGljcy8nK3RvcGljLiRpZCkucmVtb3ZlKCk7XG4gICAgICB9KTtcblxuXG4gICAgICB0b3BpY0N0cmwudXNlclVwdm90ZWRUb3BpY3MuY2hpbGQodG9waWMuJGlkKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVtb3ZlZCBzdWNjZXNzZnVsbHkhXCIpO1xuICAgICAgICAgIH19KTtcbiAgICB9O1xuXG4gICAgLy9kb3dudm90ZVxuICAgIHRvcGljQ3RybC5kb3dudm90ZSA9IGZ1bmN0aW9uKHRvcGljKXtcbiAgICAgIGlmKHRvcGljLnVwdm90ZXMgIT0gdW5kZWZpbmVkICYmIHRvcGljLnVwdm90ZXNbdG9waWNDdHJsLnVpZF0gIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgdG9waWNDdHJsLmNhbmNlbFVwdm90ZSh0b3BpYyk7XG4gICAgICB9XG4gICAgICB0b3BpY0N0cmwudG9waWNzLmRvd252b3RlVG9waWModG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgIHRvcGljQ3RybC51c2VyRG93bnZvdGVkVG9waWNzLmNoaWxkKHRvcGljLiRpZCkuc2V0KHZhbHVlLiR2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgdG9waWNDdHJsLmNhbmNlbERvd252b3RlID0gZnVuY3Rpb24odG9waWMpe1xuICAgICAgdG9waWNDdHJsLnRvcGljcy51bmRvRG93bnZvdGUodG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKTtcbiAgICAgIHRvcGljQ3RybC51c2VyRG93bnZvdGVkVG9waWNzLmNoaWxkKHRvcGljLiRpZCkucmVtb3ZlKGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlbW92ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9fSk7XG4gICAgfTtcblxuICAgIC8vZm9sbG93IHRvcGljXG4gICAgdG9waWNDdHJsLmZvbGxvd1RvcGljID0gZnVuY3Rpb24odG9waWMpe1xuICAgICAgdG9waWNDdHJsLnRvcGljcy5mb2xsb3codG9waWMuJGlkLCB0b3BpY0N0cmwudWlkKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgIHRvcGljQ3RybC51c2VyRm9sbG93aW5nLmNoaWxkKHRvcGljLiRpZCkuc2V0KHZhbHVlLmhpc3RvcnlbdG9waWNDdHJsLnVpZF0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRvcGljQ3RybC51bmZvbGxvd1RvcGljID0gZnVuY3Rpb24odG9waWMpe1xuICAgICAgdG9waWNDdHJsLnRvcGljcy51bmZvbGxvdyh0b3BpYy4kaWQsIHRvcGljQ3RybC51aWQpO1xuICAgICAgdG9waWNDdHJsLnVzZXJGb2xsb3dpbmcuY2hpbGQodG9waWMuJGlkKS5yZW1vdmUoZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOlwiLCBlcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVtb3ZlZCBzdWNjZXNzZnVsbHkhXCIpO1xuICAgICAgICAgIH19KTtcbiAgICB9O1xuXG4gIH1dKTtcblxuXG4vL2h0dHBzOi8vZ2lzdC5naXRodWIuY29tL2thdG93dWxmLzYwOTkwNDJcbmZ1bmN0aW9uIG1vdmVGYlJlY29yZChvbGRSZWYsIG5ld1JlZikge1xuICBvbGRSZWYub25jZSgndmFsdWUnLCBmdW5jdGlvbiAoc25hcCkge1xuICAgIG5ld1JlZi5zZXQoc25hcC52YWwoKSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgIG9sZFJlZi5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHR5cGVvZihjb25zb2xlKSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxyXG4gIC8vIFRvcGljIGxpc3RcclxuICAuZmFjdG9yeSgnVG9waWNzJywgW1wiJGZpcmViYXNlT2JqZWN0XCIsIFwiJGZpcmViYXNlQXJyYXlcIiwgXCJGaXJlYmFzZVVybFwiLCBmdW5jdGlvbiAoJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSwgRmlyZWJhc2VVcmwpIHtcclxuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwgKyAndG9waWNzJylcclxuICAgIHZhciB0b3BpY3MgPSAkZmlyZWJhc2VPYmplY3QocmVmKVxyXG4gICAgdmFyIHRvcGljc0FyciA9ICRmaXJlYmFzZUFycmF5KHJlZilcclxuICAgIHZhciB0b3BpY0tleSA9ICcnXHJcblxyXG4gICAgdmFyIFRvcGljcyA9IHtcclxuICAgICAgLy8gR2V0IHRvcGljIHRhZ1xyXG4gICAgICBnZXRUYWc6IGZ1bmN0aW9uICh0YWcpIHtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkocmVmLm9yZGVyQnlDaGlsZCgndGFncycpLmVxdWFsVG8odGFnKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIEdldCB0b3BpYyBzbHVnXHJcbiAgICAgIGdldFNsdWc6IGZ1bmN0aW9uIChzbHVnKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKCdzbHVnJykuZXF1YWxUbyhzbHVnKVxyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShkYXRhKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gR2V0dGluZyB0aGUgbGlzdCBvZiB0b3BpY3MgY3JlYXRlZCBieSB1c2VyX2lkXHJcbiAgICAgIGNyZWF0ZWRCeTogZnVuY3Rpb24gKHVpZCkge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYub3JkZXJCeUNoaWxkKCd1aWQnKS5lcXVhbFRvKHVpZCkpXHJcblxyXG4gICAgICB9LFxyXG4gICAgICByZWZDaGlsZDogZnVuY3Rpb24gKGNoaWxkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZChjaGlsZClcclxuICAgICAgfSxcclxuICAgICAgY291bnRVc2VyVG9waWNzOiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICAgIC8vIEdldHRpbmcgdGhlIGxpc3Qgb2YgdG9waWMgYmFzZSBvbiBjYXRlZ29yeVxyXG4gICAgICBsaXN0OiBmdW5jdGlvbiAoY2F0ZWdvcnkpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHJlZi5vcmRlckJ5Q2hpbGQoJ2NhdGVnb3J5JykuZXF1YWxUbyhjYXRlZ29yeSlcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZGF0YSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIG5hbWU6IGZ1bmN0aW9uICh0b3BpY19zbHVnKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKCdzbHVnJykuZXF1YWxUbyh0b3BpY19zbHVnKVxyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIFJldHVybiB0b3BpYyBkZXRhaWxzIGluIFJlZlxyXG4gICAgICBmb3J0b3BpY1JlZjogZnVuY3Rpb24gKHRvcGljX3NsdWcpIHtcclxuICAgICAgICByZXR1cm4gcmVmLm9yZGVyQnlDaGlsZCgnc2x1ZycpLmVxdWFsVG8odG9waWNfc2x1ZylcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldFRvcGljQnlLZXk6IGZ1bmN0aW9uICh0b3BpY19rZXkpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsICsgJ3RvcGljcy8nICsgdG9waWNfa2V5KVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0VG9waWNCeVNsdWc6IGZ1bmN0aW9uICh0b3BpY19zbHVnKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5vcmRlckJ5Q2hpbGQoJ3NsdWcnKS5lcXVhbFRvKHRvcGljX3NsdWcpLmxpbWl0VG9GaXJzdCgxKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGluY3JlbWVudFZpZXc6IGZ1bmN0aW9uICh0b3BpY19zbHVnKSB7fSxcclxuXHJcbiAgICAgIC8vIFJldHVybiB0b3BpYyBkZXRhaWxzIGluIGFycmF5XHJcbiAgICAgIGZvcnRvcGljOiBmdW5jdGlvbiAodG9waWNfc2x1Zykge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShUb3BpY3MuZm9ydG9waWNSZWYodG9waWNfc2x1ZykpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBSZXBseSBsaXN0aW5nXHJcbiAgICAgIHJlcGx5TGlzdDogZnVuY3Rpb24gKHRvcGljSWQpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzJylcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZGF0YSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIFJlcGx5IEFycmF5XHJcbiAgICAgIHJlcGx5QXJyOiBmdW5jdGlvbiAodG9waWNJZCkge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcycpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gUmVwbHkgY291bnRcclxuICAgICAgcmVwbHlDb3VudDogZnVuY3Rpb24gKHRvcGljSWQpIHtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzLycpKVxyXG4gICAgICB9LFxyXG4gICAgICByZXBseUNvdW50UmVmOiBmdW5jdGlvbiAodG9waWNJZCkge1xyXG4gICAgICAgIHJldHVybiByZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcy9jb3VudCcpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICByZXBseUluUmVwbHk6IGZ1bmN0aW9uICh0b3BpY0lkLCByZXBseUlkKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzLycgKyByZXBseUlkICsgJy9pblJlcGx5JykpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBSZXBseSBpbiBSZXBseSBBcnJheVxyXG4gICAgICByZXBseUluUmVwbHlBcnI6IGZ1bmN0aW9uICh0b3BpY0lkLCByZXBseUlkKSB7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL3JlcGxpZXMvJytyZXBseUlkKycvaW5SZXBseScpKSlcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL3JlcGxpZXMvJyArIHJlcGx5SWQgKyAnL2luUmVwbHknKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIHVwdm90ZXNcclxuICAgICAgZ2V0VXB2b3RlczogZnVuY3Rpb24gKHRvcGljSWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVmOiByZWYuY2hpbGQodG9waWNJZCArICcvdXB2b3RlcycpLFxyXG4gICAgICAgICAgYXJyYXk6ICRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy91cHZvdGVzJykpXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gZG93bnZvdGVzXHJcbiAgICAgIGdldERvd252b3RlczogZnVuY3Rpb24gKHRvcGljSWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgcmVmOiByZWYuY2hpbGQodG9waWNJZCArICcvZG93bnZvdGVzJyksXHJcbiAgICAgICAgICBhcnJheTogJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIGZvbGxvd2Vyc1xyXG4gICAgICBnZXRGb2xsb3dlcnM6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlZjogcmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpLFxyXG4gICAgICAgICAgb2JqOiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIHVwdm90ZVRvcGljOiBmdW5jdGlvbiAodG9waWNJZCwgdWlkKSB7XHJcbiAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKS5jaGlsZCh1aWQpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKVxyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKS5jaGlsZCh1aWQpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdW5kb1Vwdm90ZTogZnVuY3Rpb24gKHRvcGljSWQsIHVpZCkge1xyXG4gICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy91cHZvdGVzJykuY2hpbGQodWlkKS5yZW1vdmUoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbW92ZWQgc3VjY2Vzc2Z1bGx5IScpXHJcbiAgICAgICAgICB9fSlcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZG93bnZvdGVUb3BpYzogZnVuY3Rpb24gKHRvcGljSWQsIHVpZCkge1xyXG4gICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9kb3dudm90ZXMnKS5jaGlsZCh1aWQpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKVxyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpLmNoaWxkKHVpZCkpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1bmRvRG93bnZvdGU6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcclxuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvZG93bnZvdGVzJykuY2hpbGQodWlkKS5yZW1vdmUoZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbW92ZWQgc3VjY2Vzc2Z1bGx5IScpXHJcbiAgICAgICAgICB9fSlcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBmb2xsb3c6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcclxuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2hpc3RvcnknKS5jaGlsZCh1aWQpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKVxyXG4gICAgICAgICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2NvdW50JykpLiRsb2FkZWQoKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBpZiAoZGF0YS52YWx1ZSA9PT0gbnVsbCB8fCBkYXRhLnZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpLmNoaWxkKCdjb3VudCcpLnNldCgxKVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpLmNoaWxkKCdjb3VudCcpLnNldChkYXRhLiR2YWx1ZSArIDEpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1bmZvbGxvdzogZnVuY3Rpb24gKHRvcGljSWQsIHVpZCkge1xyXG4gICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnaGlzdG9yeScpLmNoaWxkKHVpZCkucmVtb3ZlKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjonLCBlcnJvcilcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmVkIHN1Y2Nlc3NmdWxseSEnKVxyXG4gICAgICAgICAgICAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpLmNoaWxkKCdjb3VudCcpKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnY291bnQnKS5zZXQoZGF0YS4kdmFsdWUgLSAxKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfX0pXHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0Vmlld3M6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlZjogcmVmLmNoaWxkKHRvcGljSWQpLmNoaWxkKCd2aWV3cycpLFxyXG4gICAgICAgICAgb2JqOiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQpLmNoaWxkKCd2aWV3cycpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIGxhdGVzdEZlZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkocmVmLm9yZGVyQnlDaGlsZCgnY3JlYXRlZCcpLmxpbWl0VG9MYXN0KDEwKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHRvcGljc0J5VGFnOiBmdW5jdGlvbiAodGFnKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5vcmRlckJ5Q2hpbGQoJ3RhZ3MnKS5lcXVhbFRvKHRhZykpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBSZXR1cm4gYXJyYXlcclxuICAgICAgYXJyOiAkZmlyZWJhc2VBcnJheShyZWYpLFxyXG5cclxuICAgICAgYWxsOiB0b3BpY3MsXHJcbiAgICAgIHJlZjogcmVmXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBUb3BpY3NcclxuXHJcbiAgfV0pO1xyXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29udHJvbGxlcignUHJvZmlsZUN0cmwnLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHN0YXRlXCIsIFwiJGZpbHRlclwiLCBcIm1kNVwiLCBcIkF1dGhcIiwgXCJVc2Vyc1wiLCBcIlRvcGljc1wiLCBcIkZhY2Vib29rXCIsIFwibm90aWZ5XCIsIFwiQ2F0ZVNlcnZpY2VcIiwgXCJwcm9maWxlXCIsIFwiaXNPd25lclwiLCBcInVzZXJQb3N0c1wiLCBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUsICRzdGF0ZSwgJGZpbHRlciwgbWQ1LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NlcnZpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEF1dGgsVXNlcnMsVG9waWNzLCBGYWNlYm9vayxub3RpZnksQ2F0ZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVzb2x2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9maWxlLGlzT3duZXIsdXNlclBvc3RzKXtcbiAgICB2YXIgcHJvZmlsZUN0cmwgPSB0aGlzO1xuXG4gICAgLy9QYXJzZXJcbiAgICBwcm9maWxlQ3RybC5wcm9maWxlICAgPSBwcm9maWxlO1xuICAgIHByb2ZpbGVDdHJsLmF1dGggICAgICA9IEF1dGg7XG4gICAgcHJvZmlsZUN0cmwudXNlcnMgICAgID0gVXNlcnM7XG4gICAgcHJvZmlsZUN0cmwudG9waWNzICAgID0gVG9waWNzO1xuICAgIHByb2ZpbGVDdHJsLmZhY2Vib29rICA9IEZhY2Vib29rO1xuICAgIHByb2ZpbGVDdHJsLmlzT3duZXIgICA9IGlzT3duZXI7XG4gICAgcHJvZmlsZUN0cmwuY2F0ZSAgICAgID0gQ2F0ZVNlcnZpY2U7XG4gICAgcHJvZmlsZUN0cmwuJHN0YXRlICAgID0gJHN0YXRlO1xuICAgIHByb2ZpbGVDdHJsLnVzZXJQb3N0cyA9IHVzZXJQb3N0cztcblxuICAgIHByb2ZpbGVDdHJsLmZlZWQgPSAnJztcbiAgICBwcm9maWxlQ3RybC5lZGl0SW5pdCA9ICd1c2VyRWRpdCc7XG5cbiAgICBwcm9maWxlQ3RybC5uYW1lRXhpc3Q9IGZhbHNlO1xuXG5cbiAgICBwcm9maWxlQ3RybC5nZXRVc2VyUG9zdCA9IGZ1bmN0aW9uKHVpZCl7XG4gICAgICBwcm9maWxlQ3RybC5mZWVkID0gcHJvZmlsZUN0cmwudG9waWNzLmNyZWF0ZWRCeSh1aWQpO1xuICAgIH1cblxuXG5cbiAgICAvKkxpbmsgYWNjb3VudCB3aXRoIGZhY2Vib29rKi9cbiAgICBwcm9maWxlQ3RybC5saW5rRmFjZWJvb2sgPSBmdW5jdGlvbigpe1xuICAgICAgcHJvZmlsZUN0cmwuZmFjZWJvb2subG9naW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgcHJvZmlsZUN0cmwuZmFjZWJvb2suZ2V0TG9naW5TdGF0dXMoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PT0gJ2Nvbm5lY3RlZCcpIHtcbiAgICAgICAgICAgICRzY29wZS5sb2dnZWRJbiA9IHRydWU7XG4gICAgICAgICAgICBwcm9maWxlQ3RybC5mYWNlYm9vay5hcGkoJy9tZScsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm90IGxvZ2dlZCBpblwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvL1RoZSBvcmlnaW5hbCB2YWx1ZSBmcm9tIHByb2ZpbGVcbiAgICBwcm9maWxlQ3RybC5vbGRQcm9maWxlVmFsdWUgPSBwcm9maWxlQ3RybC5wcm9maWxlO1xuXG5cbiAgICBwcm9maWxlQ3RybC51c2VyQ3JlYXRlZCA9IGZ1bmN0aW9uKHVpZCl7XG4gICAgICByZXR1cm4gcHJvZmlsZUN0cmwudG9waWNzLmNyZWF0ZWRCeSh1aWQpO1xuICAgIH1cblxuXG4gICAgLy9QcmVzZXQgUGFyYW1ldGVyc1xuICAgIHByb2ZpbGVDdHJsLmltYWdlU3RyaW5ncyAgICA9IFtdO1xuICAgIHByb2ZpbGVDdHJsLnVzZXJDYXRlRm9sbG93ICA9IFtdO1xuICAgIHByb2ZpbGVDdHJsLmNhdGVJc0ZvbGxvdyAgICA9IFtdO1xuICAgIHByb2ZpbGVDdHJsLmZvbGxvd0xpc3QgICAgICA9ICcnO1xuXG5cblxuXG5cbiAgICBwcm9maWxlQ3RybC5mb2xsb3dDYXRlTGlzdEFyciA9IGZ1bmN0aW9uKHVpZCl7XG4gICAgICBwcm9maWxlQ3RybC5mb2xsb3dMaXN0ID0gcHJvZmlsZUN0cmwuY2F0ZS5mb2xsb3dMaXN0KHVpZCk7XG4gICAgfVxuXG4gICAgaWYoQXV0aC5yZWYuZ2V0QXV0aCgpKXtcbiAgICAgIHByb2ZpbGVDdHJsLmZvbGxvd0NhdGVMaXN0QXJyKEF1dGgucmVmLmdldEF1dGgoKS51aWQpO1xuICAgIH1cblxuICAgIHByb2ZpbGVDdHJsLmZvbGxvd0NhdGUgPSBmdW5jdGlvbihpbmRleCxjYXRlX3NsdWcpe1xuICAgICAgcHJvZmlsZUN0cmwuY2F0ZUlzRm9sbG93W2luZGV4XSAgPSB0cnVlO1xuICAgICAgcHJvZmlsZUN0cmwuY2F0ZS5hZGRDaGlsZChjYXRlX3NsdWcrJy9mb2xsb3dlcicpXG4gICAgICAgIC5jaGlsZChBdXRoLnJlZi5nZXRBdXRoKCkudWlkKS5wdXNoKCkuc2V0KG1vbWVudCgpLnRvSVNPU3RyaW5nKCkpO1xuICAgIH1cblxuXG5cblxuXG4gICAgLy9VcGxvYWQgUHJvZmlsZSBpbWFnZVxuICAgIHByb2ZpbGVDdHJsLnVwbG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlcykge1xuICAgICAgYW5ndWxhci5mb3JFYWNoKGZpbGVzLCBmdW5jdGlvbiAoZmxvd0ZpbGUsIGkpIHtcbiAgICAgICAgdmFyIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHZhciB1cmkgPSBldmVudC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgIHByb2ZpbGVDdHJsLmltYWdlU3RyaW5nc1tpXSA9IHVyaTtcbiAgICAgICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZSh7XCJwaG90b1wiOiB1cml9KVxuICAgICAgICAgIG5vdGlmeSh7bWVzc2FnZTonU2F2ZWQnLHBvc2l0aW9uOidjZW50ZXInLGR1cmF0aW9uOiAzMDAwIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmxvd0ZpbGUuZmlsZSk7XG4gICAgICB9KVxuICAgIH07XG5cblxuICAgIC8vU2F2ZSBwcm9maWxlIHdpdGggcHJvZmlsZUN0cmwucHJvZmlsZVxuICAgIC8vcGFyYW1zOiByZWRpcmVjdCwgaWYgZXhpc3QgdGhlbiByZWRpcmVjdCBhZnRlciBzYXZlXG4gICAgcHJvZmlsZUN0cmwuc2F2ZVByb2ZpbGUgPSBmdW5jdGlvbihyZWRpcmVjdCl7XG4gICAgICBwcm9maWxlQ3RybC5wcm9maWxlLnVwZGF0ZWQgPSBtb21lbnQoKS50b0lTT1N0cmluZygpO1xuXG5cbiAgICAgIGlmKHByb2ZpbGVDdHJsLmxvY2F0aW9uICE9PSBudWxsICkge1xuICAgICAgICBsb2NhdGlvbkRldGFpbCA9IHtcbiAgICAgICAgICBwbGFjZV9pZDogcHJvZmlsZUN0cmwubG9jYXRpb24uZGV0YWlscy5wbGFjZV9pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlQ3RybC5sb2NhdGlvbi5kZXRhaWxzLm5hbWUsXG4gICAgICAgICAgYWRkcmVzczogcHJvZmlsZUN0cmwubG9jYXRpb24uZGV0YWlscy5mb3JtYXR0ZWRfYWRkcmVzcyxcbiAgICAgICAgICBsYXQ6IHByb2ZpbGVDdHJsLmxvY2F0aW9uLmRldGFpbHMuZ2VvbWV0cnkubG9jYXRpb24ubGF0KCksXG4gICAgICAgICAgbG5nOiBwcm9maWxlQ3RybC5sb2NhdGlvbi5kZXRhaWxzLmdlb21ldHJ5LmxvY2F0aW9uLmxuZygpLFxuICAgICAgICB9XG5cbiAgICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS51c2VyTG9jYXRpb24gPSBsb2NhdGlvbkRldGFpbDtcbiAgICAgIH1cblxuICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgIG5vdGlmeSh7bWVzc2FnZTonU2F2ZWQnLHBvc2l0aW9uOidjZW50ZXInLGR1cmF0aW9uOiAzMDAwIH0pO1xuICAgICAgICBpZihyZWRpcmVjdCAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAkc3RhdGUuZ28ocmVkaXJlY3QpO1xuICAgICAgICB9XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBub3RpZnkoe21lc3NhZ2U6J0Vycm9yIHNhdmluZyBkYXRhJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLy9VcGRhdGUgbmFtZVxuICAgIHByb2ZpbGVDdHJsLnVwZGF0ZU5hbWUgPSBmdW5jdGlvbigpe1xuXG4gICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZShcbiAgICAgICAge1xuICAgICAgICAgIFwiZmlyc3RuYW1lXCI6ICBwcm9maWxlQ3RybC5wcm9maWxlLmZpcnN0bmFtZSxcbiAgICAgICAgICBcImxhc3RuYW1lXCI6ICAgcHJvZmlsZUN0cmwucHJvZmlsZS5sYXN0bmFtZSxcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQrJy9sb2cnKS5wdXNoKCkuc2V0KHtcbiAgICAgICAgYWN0aW9uOiAgIFwibmFtZV9jaGFuZ2VcIixcbiAgICAgICAgb2xkbmFtZTogIHByb2ZpbGVDdHJsLm9sZFByb2ZpbGVWYWx1ZS5maXJzdG5hbWUgKyBcIi1cIiArIHByb2ZpbGVDdHJsLm9sZFByb2ZpbGVWYWx1ZS5sYXN0bmFtZSxcbiAgICAgICAgY3JlYXRlZDogIG1vbWVudCgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuXG4gICAgICBub3RpZnkoe21lc3NhZ2U6J1NhdmVkJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICB9XG5cblxuICAgIC8vVXBkYXRlIEJpb1xuICAgIHByb2ZpbGVDdHJsLnVwZGF0ZUJpbyA9IGZ1bmN0aW9uKCl7XG4gICAgICBwcm9maWxlQ3RybC51c2Vycy51c2VyQXJyUmVmKEF1dGgucmVmLmdldEF1dGgoKS51aWQpLnVwZGF0ZSh7XCJiaW9ncmFwaHlcIjogcHJvZmlsZUN0cmwucHJvZmlsZS5iaW9ncmFwaHl9KVxuXG4gICAgICBub3RpZnkoe21lc3NhZ2U6J1NhdmVkJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICB9XG5cblxuICAgIHByb2ZpbGVDdHJsLnVwZGF0ZVByb2ZpbGUgPSBmdW5jdGlvbigpe1xuICAgICAgLy9wcm9maWxlQ3RybC5wcm9maWxlLmVtYWlsSGFzaCA9IG1kNS5jcmVhdGVIYXNoKGF1dGgucGFzc3dvcmQuZW1haWwpO1xuICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS4kc2F2ZSgpLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgJHN0YXRlLmdvKCdkYXNoYm9hcmQnKTtcbiAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vQ2hlY2sgaWYgdXNlciBleGlzdCwgcmV0dXJuIGZhbHNlIGlmIHRoZXkgZG9cbiAgICBwcm9maWxlQ3RybC5jaGVja1VzZXJuYW1lID0gZnVuY3Rpb24oKXtcblxuICAgICAgcHJvZmlsZUN0cmwudXNlcnMuY2hlY2tVc2VybmFtZUV4aXN0KHByb2ZpbGVDdHJsLnByb2ZpbGUuZGlzcGxheU5hbWUpLm9uY2UoJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgaWYoc25hcHNob3QudmFsKCkgIT09IG51bGwpe1xuICAgICAgICAgIHJldHVybiBwcm9maWxlQ3RybC5uYW1lRXhpc3Q9dHJ1ZTtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgIHJldHVybiBwcm9maWxlQ3RybC5uYW1lRXhpc3Q9ZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuZmFjdG9yeSgnVXNlcnMnLCBbXCIkZmlyZWJhc2VBcnJheVwiLCBcIiRmaXJlYmFzZU9iamVjdFwiLCBcIkZpcmViYXNlVXJsXCIsIFwiJGh0dHBcIiwgZnVuY3Rpb24gKCRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIEZpcmViYXNlVXJsLCAkaHR0cCkge1xuICAgIHZhciB1c2Vyc1JlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCArICd1c2VycycpXG4gICAgdmFyIHVzZXJzID0gJGZpcmViYXNlQXJyYXkodXNlcnNSZWYpXG5cbiAgICB2YXIgVXNlcnMgPSB7XG4gICAgICBnZXRMb2NhdGlvbklQOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgdXJsOiAnaHR0cDovL2lwaW5mby5pby9qc29uJyxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICBnZXRMb2NhdGlvbklQRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgIHVybDogJ2h0dHA6Ly9pcGluZm8uaW8vanNvbicsXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YVxuICAgICAgICB9KVxuICAgICAgfSxcblxuICAgICAgcHJvZmlsZTogZnVuY3Rpb24odWlkKXtcbiAgICAgICAgcmV0dXJuIHVzZXJzLiRnZXRSZWNvcmQodWlkKTtcbiAgICAgIH0sXG5cblxuICAgICAgLy9TZWFyY2ggYW5kIHJldHVybiB1c2VybmFtZVxuICAgICAgZ2V0UHJvZmlsZUJ5VXNlcm5hbWU6ZnVuY3Rpb24odXNlcm5hbWUpe1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkodXNlcnNSZWYub3JkZXJCeUNoaWxkKCdkaXNwbGF5TmFtZScpLmVxdWFsVG8odXNlcm5hbWUpKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vQ2hlY2sgaWYgdXNlcm5hbWUgZXhpc3QsIGlmIG5vdCByZXR1cm4gbnVsbFxuICAgICAgY2hlY2tVc2VybmFtZUV4aXN0OmZ1bmN0aW9uKHVzZXJuYW1lKXtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLm9yZGVyQnlDaGlsZCgnZGlzcGxheU5hbWUnKS5lcXVhbFRvKHVzZXJuYW1lKTtcbiAgICAgIH0sXG5cblxuICAgICAgZ2V0UHJvZmlsZTogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHVzZXJzUmVmLmNoaWxkKHVpZCkpXG4gICAgICB9LFxuXG4gICAgICBnZXREaXNwbGF5TmFtZTogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICBpZiAodWlkID09IG51bGwgfHwgdWlkID09PSAnJykge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB1c2Vycy4kZ2V0UmVjb3JkKHVpZCkuZGlzcGxheU5hbWVcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy9HZXQgdXNlciBGb2xsb3dlcnNcbiAgICAgIGdldEZvbGxvd2VyOmZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5jaGlsZCh1aWQrJy9zdGF0L2ZvbGxvd2VyL3VpZCcpO1xuICAgICAgfSxcblxuICAgICAgLy9DaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgZm9sbG93aW5nXG4gICAgICBjaGVja0ZvbGxvdzpmdW5jdGlvbih1aWQsZm9sbG93X2lkKXtcblxuICAgICAgICB2YXIgZm9sbG93PWZhbHNlO1xuICAgICAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKyd1c2Vycy8nK3VpZCsnL3N0YXQvZm9sbG93aW5nL3VpZC8nK2ZvbGxvd19pZCk7XG4gICAgICAgIHJlZi5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgICBmb2xsb3cgPSBzbmFwc2hvdC5leGlzdHMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZvbGxvdztcbiAgICAgIH0sXG5cbiAgICAgIC8vQ2hhbmdlIHBhc3N3b3JkXG4gICAgICB1c2VyQ2hhbmdlUGFzc3dvcmQ6ZnVuY3Rpb24oZW1haWwsb2xkcGFzcyxuZXdwYXNzKXtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKTtcbiAgICAgICAgcmVmLmNoYW5nZVBhc3N3b3JkKHtcbiAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgb2xkUGFzc3dvcmQ6IG9sZHBhc3MsXG4gICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld3Bhc3NcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiSU5WQUxJRF9QQVNTV09SRFwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHNwZWNpZmllZCB1c2VyIGFjY291bnQgcGFzc3dvcmQgaXMgaW5jb3JyZWN0LlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcIklOVkFMSURfVVNFUlwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHNwZWNpZmllZCB1c2VyIGFjY291bnQgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgY2hhbmdpbmcgcGFzc3dvcmQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIHBhc3N3b3JkIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgdXNlclJlZjogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gdXNlcnNSZWYuY2hpbGQodWlkKVxuICAgICAgfSxcblxuICAgICAgdXB2b3RlczogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gdXNlcnNSZWYuY2hpbGQodWlkKS5jaGlsZCgndXB2b3RlcycpXG4gICAgICB9LFxuXG4gICAgICBkb3dudm90ZXM6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLmNoaWxkKHVpZCkuY2hpbGQoJ2Rvd252b3RlcycpXG4gICAgICB9LFxuXG4gICAgICAvL1VzZXIgZm9sbG93aW5nIHRvcGljXG4gICAgICBmb2xsb3dpbmc6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLmNoaWxkKHVpZCkuY2hpbGQoJ2ZvbGxvd2luZycpXG4gICAgICB9LFxuXG4gICAgICB1c2VyQXJyUmVmOiBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5jaGlsZCh1aWQpXG4gICAgICB9LFxuXG4gICAgICBhbGw6IHVzZXJzXG4gICAgfVxuXG4gICAgcmV0dXJuIFVzZXJzXG4gIH1dKVxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXHJcbiAgLmNvbnRyb2xsZXIoJ0F1dGhDdHJsJywgZnVuY3Rpb24oQXV0aCwgVXNlcnMsICRzdGF0ZSwkcm9vdFNjb3BlLCRtZFNpZGVuYXYsJHRyYW5zbGF0ZSwgJGNvb2tpZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90aVNlcnZpY2Upe1xyXG4gICAgdmFyIGF1dGhDdHJsID0gdGhpcztcclxuXHJcblxyXG4gICAgLy9QYXJzZXJcclxuICAgIGF1dGhDdHJsLmF1dGggICAgID0gQXV0aDtcclxuICAgIGF1dGhDdHJsLnVzZXJzICAgID0gVXNlcnM7XHJcbiAgICBhdXRoQ3RybC5ub3RpZmljYXRpb24gPSBOb3RpU2VydmljZTtcclxuXHJcblxyXG4gICAgaWYoQXV0aC5yZWYuZ2V0QXV0aCgpICE9IG51bGwgKXtcclxuICAgICAgYXV0aEN0cmwucHJvZmlsZSAgPSBhdXRoQ3RybC51c2Vycy5nZXRQcm9maWxlKEF1dGgucmVmLmdldEF1dGgoKS51aWQpO1xyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgYXV0aEN0cmwucHJvZmlsZSA9JydcclxuICAgIH1cclxuXHJcblxyXG4gICAgYXV0aEN0cmwudXNlciA9IHtcclxuICAgICAgZW1haWw6ICcnLFxyXG4gICAgICBwYXNzd29yZDogJydcclxuICAgIH07XHJcblxyXG5cclxuICAgIC8vR2V0IHRoZSBiYWRnZSBub3RpZmljYXRpb25cclxuICAgIGF1dGhDdHJsLmJhZGdlTm90aWZpY2F0aW9uID0gIGF1dGhDdHJsLm5vdGlmaWNhdGlvbi5hZGRBcnJDaGlsZChhdXRoQ3RybC5wcm9maWxlLiRpZCsnL3VucmVhZCcpO1xyXG4gICAgLy9SZXNldCBjb3VudGVyXHJcbiAgICBhdXRoQ3RybC5yZXNldENvdW50ZXIgPSBmdW5jdGlvbigpe1xyXG4gICAgICBhdXRoQ3RybC5ub3RpZmljYXRpb24ucmVzZXRVbnJlYWQoYXV0aEN0cmwucHJvZmlsZS4kaWQpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL0NoYW5nZSBsYW5ndWFnZVxyXG4gICAgYXV0aEN0cmwudG9nZ2xlTGFuZyA9IGZ1bmN0aW9uIChsYW5nS2V5KSB7XHJcbiAgICAgICR0cmFuc2xhdGUudXNlKGxhbmdLZXkpO1xyXG4gICAgICAvLyBTZXR0aW5nIGEgY29va2llXHJcbiAgICAgICRjb29raWVzLnB1dCgndXNlckxhbmcnLCBsYW5nS2V5KTtcclxuICAgICAgLy9JZiB1c2VyIHJlZ2lzdGVyZWQgLSB1cGRhdGUgdGhpcyBpbiB0aGVpciBwcmVmZXJlbmNlXHJcbiAgICAgIGlmKEF1dGgucmVmLmdldEF1dGgoKSl7XHJcbiAgICAgICAgYXV0aEN0cmwudXNlcnMudXNlckFyclJlZihBdXRoLnJlZi5nZXRBdXRoKCkudWlkKS51cGRhdGUoe1wibGFuZ1wiOmxhbmdLZXl9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9DaGVja2sgdXNlciBzZWxlY3RlZCBsYW5ndWFnZVxyXG4gICAgaWYoIWF1dGhDdHJsLnByb2ZpbGUubGFuZyl7XHJcbiAgICAgIGlmKCRjb29raWVzLmdldCgndXNlckxhbmcnKSl7XHJcbiAgICAgICAgYXV0aEN0cmwudG9nZ2xlTGFuZygkY29va2llcy5nZXQoJ3VzZXJMYW5nJykpO1xyXG4gICAgICB9ZWxzZXtcclxuICAgICAgICBhdXRoQ3RybC50b2dnbGVMYW5nKCdFbmcnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZXtcclxuICAgICAgYXV0aEN0cmwudG9nZ2xlTGFuZyhhdXRoQ3RybC5wcm9maWxlLmxhbmcpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvL0xvZ2luXHJcbiAgICBhdXRoQ3RybC5sb2dpbiA9IGZ1bmN0aW9uICgpe1xyXG4gICAgICBhdXRoQ3RybC5hdXRoLmF1dGguJGF1dGhXaXRoUGFzc3dvcmQoYXV0aEN0cmwudXNlcikudGhlbihmdW5jdGlvbiAoYXV0aCl7XHJcbiAgICAgICAgJHN0YXRlLmdvKCdkYXNoYm9hcmQnKTtcclxuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKXtcclxuICAgICAgICBhdXRoQ3RybC5lcnJvciA9IGVycm9yO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy9Mb2dvdXRcclxuICAgIGF1dGhDdHJsLmxvZ291dCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgIEF1dGguYXV0aC4kdW5hdXRoKCk7XHJcbiAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcclxuICAgIH1cclxuXHJcbiAgICAvL1JlZ2lzdGVyIHVzZXJcclxuICAgIGF1dGhDdHJsLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCl7XHJcbiAgICAgIEF1dGguYXV0aC4kY3JlYXRlVXNlcihhdXRoQ3RybC51c2VyKS50aGVuKGZ1bmN0aW9uICh1c2VyKXtcclxuICAgICAgICBhdXRoQ3RybC5sb2dpbigpO1xyXG4gICAgICB9LCBmdW5jdGlvbiAoZXJyb3Ipe1xyXG4gICAgICAgIGF1dGhDdHJsLmVycm9yID0gZXJyb3I7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgYXV0aEN0cmwudG9nZ2xlUmlnaHQgPSBidWlsZFRvZ2dsZXIoJ3JpZ2h0Jyk7XHJcbiAgICBmdW5jdGlvbiBidWlsZFRvZ2dsZXIobmF2SUQpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICRtZFNpZGVuYXYobmF2SUQpXHJcbiAgICAgICAgICAudG9nZ2xlKClcclxuICAgICAgfTtcclxuICAgIH1cclxuICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5mYWN0b3J5KCdBdXRoJywgZnVuY3Rpb24oJGZpcmViYXNlQXV0aCwgRmlyZWJhc2VVcmwpe1xuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwpO1xuICAgIHZhciBhdXRoID0gJGZpcmViYXNlQXV0aChyZWYpO1xuXG4gICAgdmFyIEF1dGggPSB7XG4gICAgICByZWY6cmVmLFxuICAgICAgYXV0aDogYXV0aCxcblxuICAgICAgZ2V0VWlkOmZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciB1aWQgPSByZWYuZ2V0QXV0aCgpO1xuICAgICAgICBpZih1aWQgIT0gbnVsbCApe1xuICAgICAgICAgIHJldHVybiByZWYuZ2V0QXV0aCgpLnVpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICB9XG5cbiAgICByZXR1cm4gQXV0aDtcbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcclxuICAuY29udHJvbGxlcignQ2F0ZUN0cmwnLCBmdW5jdGlvbigkc3RhdGUsIENhdGVnb3J5LGNhdGVOYW1lLGNhdGVUb3BpY3Mpe1xyXG4gICAgdmFyIGNhdGVDdHJsID0gdGhpcztcclxuXHJcbiAgICAvL1BhcnNlcnNcclxuICAgIGNhdGVDdHJsLmNhdGVOYW1lICAgPSBjYXRlTmFtZTtcclxuICAgIGNhdGVDdHJsLmNhdGVnb3J5ICAgPSBDYXRlZ29yeTtcclxuICAgIGNhdGVDdHJsLmNhdGVUb3BpY3MgPSBjYXRlVG9waWNzO1xyXG5cclxuICB9KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG5cbiAgLy9Ub3BpYyBsaXN0XG4gIC5mYWN0b3J5KCdDYXRlU2VydmljZScsIGZ1bmN0aW9uKCRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkgLCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiAgICA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnY2F0ZWdvcmllcycpO1xuICAgIHZhciBjYXRlZ29yaWVzID0gJGZpcmViYXNlT2JqZWN0KHJlZik7XG5cbiAgICB2YXIgQ2F0ZSA9IHtcblxuICAgICAgbmFtZTogZnVuY3Rpb24odG9waWNfc2x1Zyl7XG4gICAgICAgIHZhciBkYXRhID0gcmVmLm9yZGVyQnlDaGlsZChcInNsdWdcIikuZXF1YWxUbyh0b3BpY19zbHVnKTtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdChkYXRhKTtcbiAgICAgIH0sXG5cbiAgICAgIGZvcnRvcGljOiBmdW5jdGlvbih0b3BpY19zbHVnKXtcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdCh1c2Vyc1JlZi5jaGlsZCh1aWQpKTtcbiAgICAgIH0sXG5cbiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihjaGlsZG5hbWUpe1xuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKGNoaWxkbmFtZSlcbiAgICAgIH0sXG5cbiAgICAgIGZvbGxvd0xpc3Q6ZnVuY3Rpb24odWlkKXtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKFwibmV3cy9mb2xsb3dlclwiKS5lcXVhbFRvKHVpZCk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShkYXRhKTtcbiAgICAgIH0sXG5cbiAgICAgIHVuRm9sbG93OmZ1bmN0aW9uKHNsdWcsdWlkKXtcbiAgICAgICAgdmFyIHJlZiAgICA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnY2F0ZWdvcmllcy8nK3NsdWcrJy9mb2xsb3dlci8nK3VpZCk7XG4gICAgICAgIHJlZi5yZW1vdmUoKTtcbiAgICAgIH0sXG5cbiAgICAgIHVzZXJGb2xsb3c6ZnVuY3Rpb24oc2x1Zyx1aWQpe1xuICAgICAgICB2YXIgZm9sbG93PWZhbHNlO1xuICAgICAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydjYXRlZ29yaWVzLycrc2x1ZysnL2ZvbGxvd2VyLycrdWlkKTtcbiAgICAgICAgcmVmLm9uY2UoXCJ2YWx1ZVwiLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuICAgICAgICAgIGZvbGxvdyA9IHNuYXBzaG90LmV4aXN0cygpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZm9sbG93O1xuICAgICAgfSxcbiAgICAgIGFycjogJGZpcmViYXNlQXJyYXkocmVmKSxcbiAgICAgIGFsbDpjYXRlZ29yaWVzXG4gICAgfVxuICAgIHJldHVybiBDYXRlO1xuICB9KVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcblxuICAvL1RvcGljIGxpc3RcbiAgLmZhY3RvcnkoJ1Bvc3QnLCBmdW5jdGlvbigkZmlyZWJhc2VPYmplY3QsIEZpcmViYXNlVXJsKXtcbiAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKyd0b3BpY3MnKTtcbiAgICB2YXIgdG9waWNzID0gJGZpcmViYXNlT2JqZWN0KHJlZik7XG5cbiAgICB2YXIgVFMgPSB7XG4gICAgICB0b3BpY05hbWU6IGZ1bmN0aW9uKHRvcGljX3NsdWcpe1xuICAgICAgICB2YXIgZGF0YSA9IHJlZi5vcmRlckJ5Q2hpbGQoXCJzbHVnXCIpLmVxdWFsVG8odG9waWNfc2x1Zyk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSk7XG4gICAgICB9LFxuICAgICAgZm9ydG9waWM6IGZ1bmN0aW9uKHRvcGljX3NsdWcpe1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHVzZXJzUmVmLmNoaWxkKHVpZCkpO1xuICAgICAgfSxcbiAgICAgIGFsbDp0b3BpY3NcbiAgICB9XG4gICAgcmV0dXJuIFRTO1xuICB9KVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZEN0cmwnLCBmdW5jdGlvbihBdXRoLCAkc3RhdGUsQ2F0ZWdvcnksQ2F0ZVNlcnZpY2UsVGFncyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dCwgJG1kU2lkZW5hdiwgJGxvZykge1xuICAgIHZhciBkYXNoYm9hcmRDdHJsID0gdGhpcztcblxuICAgIGRhc2hib2FyZEN0cmwuYXV0aCA9IEF1dGg7XG5cbiAgICBkYXNoYm9hcmRDdHJsLmNhdGUgPSBDYXRlU2VydmljZTtcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGVnb3JpZXMgICAgICA9IENhdGVnb3J5LmFsbDtcbiAgICBkYXNoYm9hcmRDdHJsLnRvcGljX2dyaWQgID0gZmFsc2U7XG4gICAgZGFzaGJvYXJkQ3RybC50YWdzICAgICAgICA9IFRhZ3MuYXJyO1xuXG4gICAgZGFzaGJvYXJkQ3RybC51c2VyQ2F0ZUZvbGxvdyAgPSBbXTtcbiAgICBkYXNoYm9hcmRDdHJsLmNhdGVJc0ZvbGxvdyAgICA9IFtdO1xuICAgIGRhc2hib2FyZEN0cmwuZm9sbG93TGlzdCAgICAgID0gJyc7XG5cblxuICAgIC8vQ2xvc2UgU2lkZSBiYXJcbiAgICBkYXNoYm9hcmRDdHJsLmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgJG1kU2lkZW5hdigncmlnaHQnKS5jbG9zZSgpO1xuICAgIH07XG5cblxuICAgIGRhc2hib2FyZEN0cmwuZm9sbG93Q2F0ZSA9IGZ1bmN0aW9uKGNhdGVfc2x1Zyl7XG4gICAgICBkYXNoYm9hcmRDdHJsLmNhdGUuYWRkQ2hpbGQoY2F0ZV9zbHVnKycvZm9sbG93ZXInKVxuICAgICAgICAuY2hpbGQoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICB9XG4gIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG5cblxuICAvL0xpc3Qgb2YgY2F0ZWdvcmllcyBvbiB0aGUgc2lkZXJiYXJcbiAgLmRpcmVjdGl2ZSgncmV2aWV3U2NvcmUnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAgICAgJ0UnLFxuICAgICAgdHJhbnNjbHVkZTogICB0cnVlLFxuICAgICAgY29udHJvbGxlcjogICAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogICd0ZW1wbGF0ZXMvaHRtbC9yZXZpZXctc3VtbWFyeS1saXN0Lmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcmV2aWV3OiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy9Gb2xsb3cgQnV0dG9uXG4gIC5kaXJlY3RpdmUoJ3VzZXJGb2xsb3dlckJ0bicsZnVuY3Rpb24oKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICAgICAnRScsXG4gICAgICB0cmFuc2NsdWRlOiAgIHRydWUsXG4gICAgICBjb250cm9sbGVyOiAgICdUb3BpY0N0cmwgYXMgdG9waWNDdHJsJyxcbiAgICAgIHRlbXBsYXRlVXJsOiAgJ3RlbXBsYXRlcy9odG1sL2ZvbGxvdy11c2VyLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgZm9sbG93OiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cbiAgLy9DYXRlZ29yeSBmb2xsb3cgYnV0dG9uXG4gIC5kaXJlY3RpdmUoJ2NhdGVGb2xsb3dCdG4nLGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9jYXRlZ29yeS1mb2xsb3ctYnRuLmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgY2F0ZTogJz0nXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC8vTGlzdCBvZiBjYXRlZ29yaWVzIG9uIHRoZSBzaWRlcmJhclxuICAuZGlyZWN0aXZlKCd0b3BpY0dyaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC9jYXRlZ29yeS1ncmlkLmh0bWwnXG4gICAgfVxuICB9KVxuXG4gIC8vR3JpZCBUYWdzIGZvciBzaWRlYmFyXG4gIC5kaXJlY3RpdmUoJ3RhZ0dyaWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsIGFzIGRhc2hib2FyZEN0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC90YWctZ3JpZC5odG1sJ1xuICAgIH1cbiAgfSlcblxuXG4gIC5kaXJlY3RpdmUoJ3RvcGljQ3JlYXRlJywgZnVuY3Rpb24oKXtcblxuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sbGVyOiAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL3RvcGljLWNyZWF0ZS5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHRvcGljOiAnPSdcbiAgICAgIH1cbiAgICB9XG5cbiAgfSlcblxuXG4gIC5kaXJlY3RpdmUoJ3RvcGljTGlzdCcsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udHJvbGxlcjogJ1RvcGljQ3RybCBhcyB0b3BpY0N0cmwnLFxuICAgICAgdGVtcGxhdGVVcmw6ICd0ZW1wbGF0ZXMvaHRtbC90b3BpYy1saXN0Lmh0bWwnLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgdG9waWNzOiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cblxuICAuZGlyZWN0aXZlKCd0b3BpY0FjdGlvbnNDYXJkJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250cm9sbGVyOiAnVG9waWNDdHJsIGFzIHRvcGljQ3RybCcsXG4gICAgICB0ZW1wbGF0ZVVybDogJ3RlbXBsYXRlcy9odG1sL3RvcGljLWFjdGlvbnMtY2FyZC5odG1sJyxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHRvcGljOiAnPSdcbiAgICAgIH1cbiAgICB9XG4gIH0pXG5cblxuICAvL2ZvciB0YWdzIC0gbWF4IHRhZ3NcbiAgLmRpcmVjdGl2ZSgnZW5mb3JjZU1heFRhZ3MnLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ0N0cmwpIHtcbiAgICAgIHZhciBtYXhUYWdzID0gYXR0cnMubWF4VGFncyA/IHBhcnNlSW50KGF0dHJzLm1heFRhZ3MsICc0JykgOiBudWxsO1xuXG4gICAgICBuZ0N0cmwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgJiYgbWF4VGFncyAmJiB2YWx1ZS5sZW5ndGggPiBtYXhUYWdzKSB7XG4gICAgICAgICAgdmFsdWUuc3BsaWNlKHZhbHVlLmxlbmd0aCAtIDEsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdIb21lQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSxDYXRlZ29yeSxUb3BpY3MsZmVlZCl7XG4gICAgdmFyIGhvbWVDdHJsID0gdGhpcztcblxuICAgIGhvbWVDdHJsLnRvcGljcyA9IENhdGVnb3J5O1xuICAgIGhvbWVDdHJsLnRvcGljcyA9IFRvcGljcztcbiAgICBob21lQ3RybC5mZWVkICAgPSBmZWVkO1xuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29uZmlnKFsnJHRyYW5zbGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCR0cmFuc2xhdGVQcm92aWRlcikge1xuICAgICR0cmFuc2xhdGVQcm92aWRlci50cmFuc2xhdGlvbnMoJ0VuZycsIHtcbiAgICAgICdLRVlfREFTSEJPQVJEJzogICdEYXNoYm9hcmQnLFxuICAgICAgJ0tFWV9MQU5HVUFHRVMnOiAgJ0xhbmd1YWdlcycsXG4gICAgICAnS0VZX0hPTUUnOiAgICAgICAnSG9tZScsXG4gICAgICAnS0VZX1JFR0lTVEVSJzogICAnUmVnaXN0ZXInLFxuICAgICAgJ0tFWV9MT0dJTic6ICAgICAgJ0xvZyBpbicsXG4gICAgICAnS0VZX0xPR09VVCc6ICAgICAnTG9nIG91dCcsXG4gICAgICAnS0VZX0ZPTExPVyc6ICAgICAnRm9sbG93JyxcbiAgICAgICdLRVlfRk9MTE9XRVInOiAgICdGb2xsb3dlcicsXG4gICAgICAnS0VZX1VORk9MTE9XJzogICAnVW5mb2xsb3cnLFxuICAgICAgJ0tFWV9GT0xMT1dJTkcnOiAgJ0ZvbGxvd2luZycsXG4gICAgICAnS0VZX1BPU1QnOiAgICAgICAnUG9zdCcsXG4gICAgICAnS0VZX1BPU1RFRCc6ICAgICAnUG9zdGVkJyxcbiAgICAgICdLRVlfVVBWT1RFJzogICAgICdVcHZvdGUnLFxuICAgICAgJ0tFWV9VUFZPVEVEJzogICAgJ1Vwdm90ZWQnLFxuICAgICAgJ0tFWV9EV05fVk9URSc6ICAgJ0Rvd252b3RlJyxcbiAgICAgICdLRVlfRFdOX1ZPVEVEJzogICdEb3dudm90ZWQnLFxuICAgICAgJ0tFWV9WSUVXJzogICAgICAgJ1ZpZXcnLFxuICAgICAgJ0tFWV9SRU1PVkUnOiAgICAgJ1JlbW92ZScsXG4gICAgICAnS0VZX0NBTkNFTCc6ICAgICAnQ2FuY2VsJyxcbiAgICAgICdLRVlfUVVFU1RJT04nOiAgICdRdWVzdGlvbicsXG4gICAgICAnS0VZX1RPUElDJzogICAgICAnVG9waWMnLFxuICAgICAgJ0tFWV9DSEdfUFdEJzogICAgJ0NoYW5nZSBQYXNzd29yZCcsXG4gICAgICAnS0VZX1BBU1NXT1JEJzogICAnUGFzc3dvcmQnLFxuICAgICAgJ0tFWV9PTERfUFdEJzogICAgJ09sZCBQYXNzd29yZCcsXG4gICAgICAnS0VZX05FV19QV0QnOiAgICAnTmV3IFBhc3N3b3JkJyxcbiAgICAgICdLRVlfTkVXX1BXRF9DJzogICdOZXcgcGFzc3dvcmQgY29uZmlybWF0aW9uJyxcbiAgICAgICdLRVlfU0FWRSc6ICAgICAgICdTYXZlJyxcbiAgICAgICdLRVlfU0FWRV9EUkFGVCc6ICdTYXZlIGFzIGRyYWZ0JyxcbiAgICAgICdLRVlfVEFHUyc6ICAgICAgICdUYWdzJyxcbiAgICAgICdLRVlfRVhQTE9SRSc6ICAgICdFeHBsb3JlJyxcbiAgICAgICdLRVlfQ09NTUVOVFMnOiAgICdDb21tZW50cycsXG4gICAgICAnS0VZX1JFUExZJzogICAgICAnUmVwbHknLFxuICAgICAgJ0tFWV9SRVZJRVcnOiAgICAgJ1JldmlldycsXG4gICAgICAnS0VZX0VESVQnOiAgICAgICAnRWRpdCcsXG4gICAgICAnS0VZX1RSRU5EJzogICAgICAnVHJlbmQnLFxuICAgICAgJ0tFWV9UUkVORElORyc6ICAgJ1RyZW5kaW5nJyxcbiAgICAgICdLRVlfV1JJVEVfUkVQTFknOidXcml0ZSBhIHJlcGx5JyxcbiAgICAgICdLRVlfTEFURVNUX0ZFRUQnOidMYXRlc3QgRmVlZCcsXG5cbiAgICAgIC8vUmVtb3ZlIHRvcGljXG4gICAgICAnS0VZX0NPTkZfUkVNT1ZFJzonQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHJlbW92ZT8nLFxuICAgICAgJ0tFWV9DT05GX1JFTV9DJzogJ09uY2UgcmVtb3ZlLCB5b3Ugd2lsbCBub3QgYmUgYWJsZXRvIHRvIGdldCB0aGlzIHRvcGljIGJhY2snLFxuXG5cbiAgICAgIC8vU0VOVEVOQ0VcbiAgICAgICdLRVlfV0hBVF9PTl9VUl9NSU5EJzogICdXaGF0XFwncyBvbiB5b3VyIG1pbmQ/JyxcbiAgICAgICdLRVlfWU9VX1dBTlRfRk9MTE9XJzogICdZb3UgbWF5IHdhbnQgdG8gZm9sbG93JyxcbiAgICAgICdLRVlfTk9fQUNDVF9SRUdJU1RFUic6ICdEb25cXCd0IGhhdmUgYWNjb3VudD8gUmVnaXN0ZXInLFxuICAgICAgJ0tFWV9DQU5UX0NITkdfVVNFUic6ICAgJ0RvblxcJ3QgaGF2ZSBhY2NvdW50PyBSZWdpc3RlcicsXG4gICAgICAnS0VZX1lPVVJfQUNDT1VOVCc6ICAgICAnWW91ciBhY2NvdW50JyxcbiAgICAgICdLRVlfTk9USElOR19IRVJFJzogICAgICdOb3RoaW5nIGhlcmUsIHlldCcsXG4gICAgICAnS0VZX1dIT19UT19GT0xMT1cnOiAgICAnV2hvIHRvIGZvbGxvdycsXG4gICAgICAnS0VZX0NBVF9XSUxMX0FQUEVBUic6ICAnRm9sbG93IHNvbWUgY2F0ZWdvcmllcyBhbmQgaXQgd2lsbCBhcHBlYXIgaGVyZScsXG4gICAgICAnS0VZX1dIVF9VUl9TVE9SWSc6ICAgICAnV2hhdFxcJ3MgeW91ciBzdG9yeScsXG4gICAgICAnS0VZX1dSVF9DT01NRU5UJzogICAgICAnV3JpdGUgYSBjb21tZW50JyxcblxuXG5cbiAgICAgIC8vVVNFUiBJTlBVVFxuICAgICAgJ0tFWV9GSVJTVE5BTUUnOiAgJ0ZpcnN0IG5hbWUnLFxuICAgICAgJ0tFWV9MQVNUTkFNRSc6ICAgJ0xhc3QgbmFtZScsXG4gICAgICAnS0VZX0JJUlRIREFZJzogICAnQmlydGhkYXknLFxuICAgICAgJ0tFWV9NT05USCc6ICAgICAgJ01vbnRoJyxcbiAgICAgICdLRVlfREFZJzogICAgICAgICdEYXknLFxuICAgICAgJ0tFWV9FTUFJTCc6ICAgICAgJ0VtYWlsJyxcbiAgICAgICdLRVlfQ09ORl9FTUFJTCc6ICdDb25maXJtIEVtYWlsJyxcbiAgICAgICdLRVlfR0VOREVSJzogICAgICdHZW5kZXInLFxuICAgICAgJ0tFWV9NQUxFJzogICAgICAgJ01hbGUnLFxuICAgICAgJ0tFWV9GRU1BTEUnOiAgICAgJ0ZlbWFsZScsXG4gICAgICAnS0VZX1VTRVJOQU1FJzogICAnVXNlcm5hbWUnLFxuICAgICAgJ0tFWV9MT0NBVElPTic6ICAgJ0xvY2F0aW9uJyxcblxuICAgICAgLy9Vc2VyIEVkaXRcbiAgICAgICdLRVlfRURfUFJPRklMRSc6ICdFZGl0IFByb2ZpbGUnLFxuICAgICAgJ0tFWV9FRF9DSEdfUFdEJzogJ0NoYW5nZSBQYXNzd29yZCcsXG4gICAgICAnS0VZX0VEX1BST0ZJTEUnOiAnRWRpdCBQcm9maWxlJyxcbiAgICAgICdLRVlfRURfU0lURSc6ICAgICdXZWJzaXRlJyxcbiAgICAgICdLRVlfRURfUEhPTkUnOiAgICdQaG9uZScsXG4gICAgICAnS0VZX0VEX0JJTyc6ICAgICAnQmlvZ3JhcGh5JyxcblxuICAgIH0pO1xuXG4gICAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucygn4LmE4LiX4LiiJywge1xuICAgICAgJ0tFWV9EQVNIQk9BUkQnOiAgJ+C4q+C5ieC4reC4h+C4l+C4seC5ieC4h+C4q+C4oeC4lCcsXG4gICAgICAnS0VZX0xBTkdVQUdFUyc6ICAn4Lig4Liy4Lip4LiyJyxcbiAgICAgICdLRVlfSE9NRSc6ICAgICAgICfguKvguJnguYnguLLguYHguKPguIEnLFxuICAgICAgJ0tFWV9SRUdJU1RFUic6ICAgJ+C4quC4oeC4seC4hOC4o+C5g+C4iuC5iScsXG4gICAgICAnS0VZX0xPR0lOJzogICAgICAn4LmA4LiC4LmJ4Liy4Liq4Li54LmI4Lij4Liw4Lia4LiaJyxcbiAgICAgICdLRVlfRk9MTE9XJzogICAgICfguJXguLTguJTguJXguLLguKEnLFxuICAgICAgJ0tFWV9QT1NUJzogICAgICAgJ+C5guC4nuC4quC4leC5jCdcbiAgICB9KTtcblxuICAgICR0cmFuc2xhdGVQcm92aWRlci5wcmVmZXJyZWRMYW5ndWFnZSgnZW4nKTtcbiAgfV0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ05vdGlDdHJsJywgZnVuY3Rpb24oJHN0YXRlLENhdGVnb3J5LFRvcGljcyxOb3RpU2VydmljZSl7XG4gICAgdmFyIG5vdGlDdHJsID0gdGhpcztcblxuXG4gICAgbm90aUN0cmwudG9waWNzID0gVG9waWNzO1xuICAgIG5vdGlDdHJsLmZlZWQgICA9IGZlZWQ7XG4gICAgbm90aUN0cmwubm90aVNlcnZpY2UgPSBOb3RpU2VydmljZTtcblxuICAgIG5vdGlDdHJsLm5vdGlmeVRvID1mdW5jdGlvbih1aWQpe1xuICAgICAgcmV0dXJuIG5vdGlDdHJsLmFyci5wdXNoKHVpZCkuJGFkZCh1aWQpXG4gICAgfVxuICB9KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuXG4gIC5mYWN0b3J5KCdOb3RpU2VydmljZScsIGZ1bmN0aW9uKCRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXkgLCBGaXJlYmFzZVVybCwgVXNlcnMpe1xuICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ25vdGlmaWNhdGlvbicpO1xuICAgIHZhciBub3RpID0gJGZpcmViYXNlT2JqZWN0KHJlZik7XG4gICAgdmFyIHVzZXJzID0gVXNlcnM7XG5cbiAgICB2YXIgTm90aWZpY2F0aW9uID0ge1xuXG4gICAgICB1bnJlYWROb3RpZmljYXRpb246ZnVuY3Rpb24odWlkKXtcbiAgICAgICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnbm90aWZpY2F0aW9uLycrdWlkKTtcbiAgICAgICAgY29uc29sZS5sb2coJGZpcmViYXNlT2JqZWN0KHJlZi5vcmRlckJ5Q2hpbGQoXCJpc19yZWFkXCIpLmVxdWFsVG8oXCJmYWxzZVwiKSkpO1xuICAgICAgfSxcblxuICAgICAgLy9Ob3RpZnkgZm9sbG93ZXJzXG4gICAgICBub3RpZnlGb2xsb3dlcjpmdW5jdGlvbih0b3BpY0lkLHVpZCl7XG4gICAgICAgIHZhciByZWYgPSB1c2Vycy5nZXRGb2xsb3dlcih1aWQpO1xuICAgICAgICByZWYub25jZShcInZhbHVlXCIsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG4gICAgICAgICAgc25hcHNob3QuZm9yRWFjaChmdW5jdGlvbihjaGlsZFNuYXBzaG90KSB7XG4gICAgICAgICAgICAvL3VwZGF0ZSBub3RpZmljYXRpb24gYW5kIGRldGFpbHNcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbi51cGRhdGVOb3RpZmljYXRpb25Db3VudCh0b3BpY0lkLGNoaWxkU25hcHNob3Qua2V5KCkpO1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICAvL0FkZCBkZXRhaWwgZm9yIHRoaXMgbm90aWZpY3RpYW9uXG4gICAgICBub3RpZnlMb2c6ZnVuY3Rpb24odG9waWNJZCx1aWQpe1xuICAgICAgICBOb3RpZmljYXRpb24uYWRkQ2hpbGQodWlkKS5wdXNoKCkuc2V0KHtcbiAgICAgICAgICB0b3BpY0lkOiAgICB0b3BpY0lkLFxuICAgICAgICAgIGZyb206ICAgICAgIHVpZCxcbiAgICAgICAgICBpc19yZWFkOiAgICBmYWxzZSxcbiAgICAgICAgICB0aW1lc3RhbXA6ICBtb21lbnQoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuXG4gICAgICAvL1Jlc2V0IHVucmVhZCBjb3VudGVyXG4gICAgICByZXNldFVucmVhZDpmdW5jdGlvbih1aWQpe1xuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydub3RpZmljYXRpb24vJyt1aWQrJy91bnJlYWQnKTtcbiAgICAgICAgcmVmLnNldCgwKTtcbiAgICAgIH0sXG5cblxuICAgICAgLy9VcGRhdGUgbm90aWZpY2F0aW9uXG4gICAgICAvL0BwYXJhbXMgdWlkIC0gd2hvIHRoaXMgbm90aWZpY2F0aW9uIGlzIGdvaW5nIHRvXG4gICAgICB1cGRhdGVOb3RpZmljYXRpb25Db3VudDpmdW5jdGlvbih0b3BpY0lkLHVpZCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiPj4+XCIgKyB1aWQpO1xuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKydub3RpZmljYXRpb24vJyt1aWQrJy91bnJlYWQnKTtcbiAgICAgICAgcmVmLm9uY2UoXCJ2YWx1ZVwiLCBmdW5jdGlvbihzbmFwc2hvdCkge1xuICAgICAgICAgIC8vZGVmYXVsdCB1bnJlYWQgaXMgMVxuICAgICAgICAgaWYoc25hcHNob3QudmFsKCkgPT0gJ251bGwnKXtcbiAgICAgICAgICAgIHJlZi5zZXQoMSlcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHJlZi5zZXQoc25hcHNob3QudmFsKCkgKyAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvck9iamVjdCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHJlYWQgZmFpbGVkOiBcIiArIGVycm9yT2JqZWN0LmNvZGUpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy9BZGQgdG8gbG9nXG4gICAgICAgICAgTm90aWZpY2F0aW9uLm5vdGlmeUxvZyh0b3BpY0lkLHVpZCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuXG4gICAgICBhZGRDaGlsZDpmdW5jdGlvbihjaGlsZCl7XG4gICAgICAgIHJldHVybiByZWYuY2hpbGQoY2hpbGQpO1xuICAgICAgfSxcblxuICAgICAgYWRkQXJyQ2hpbGQ6ZnVuY3Rpb24oY2hpbGQpe1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZChjaGlsZCkpO1xuICAgICAgfSxcblxuICAgICAgYXJyOiAkZmlyZWJhc2VBcnJheShyZWYpLFxuICAgICAgYWxsOiBub3RpXG4gICAgfVxuICAgIHJldHVybiBOb3RpZmljYXRpb247XG4gIH0pXG5cbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxuICAuY29udHJvbGxlcignUGxhY2VzQ3RybCcsIGZ1bmN0aW9uKCRzdGF0ZSwkc2NvcGUsJHJvb3RTY29wZSwgJG1kRGlhbG9nLCAkbWRNZWRpYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1NlcnZpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGFncywgVG9waWNzLCBBdXRoLCBVc2VycywgU2x1ZyxMYW5ndWFnZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VMYW5kaW5nKSB7XG5cbiAgICB2YXIgcGxhY2VzQ3RybCA9IHRoaXM7XG4gICAgY29uc29sZS5sb2cocGxhY2VMYW5kaW5nKTtcbiAgICBwbGFjZXNDdHJsLnBsYWNlTGFuZGluZyA9IHBsYWNlTGFuZGluZztcblxuICB9KTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5mYWN0b3J5KCdQbGFjZXMnLCBmdW5jdGlvbigkZmlyZWJhc2VBcnJheSwgRmlyZWJhc2VVcmwpe1xuXG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsncGxhY2VzJyk7XG4gICAgdmFyIHBsYWNlRGV0YWlsX3JlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsncGxhY2VzX2RldGFpbHMnKTtcblxuICAgIHZhciBwbGFjZXMgPSAkZmlyZWJhc2VBcnJheShyZWYpO1xuXG4gICAgdmFyIFBsYWNlcyA9IHtcbiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihjaGlsZG5hbWUpe1xuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKGNoaWxkbmFtZSlcbiAgICAgIH0sXG5cbiAgICAgIGFkZFBsYWNlRGV0YWlsQ2hpbGQ6IGZ1bmN0aW9uKGNoaWxkbmFtZSl7XG4gICAgICAgIHJldHVybiBwbGFjZURldGFpbF9yZWYuY2hpbGQoY2hpbGRuYW1lKVxuICAgICAgfSxcblxuICAgICAgZ2V0UGxhY2VSZWY6ZnVuY3Rpb24ocGxhY2VfaWQpe1xuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHBsYWNlX2lkKycvaW5mbycpO1xuICAgICAgfSxcbiAgICAgIGFycjogcGxhY2VzXG4gICAgfVxuICAgIHJldHVybiBQbGFjZXM7XG4gIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcblxuICAvL0NhdGVnb3J5IGxpc3RcbiAgLmZhY3RvcnkoJ0NhdGVnb3J5JywgZnVuY3Rpb24oJGZpcmViYXNlT2JqZWN0LCAkZmlyZWJhc2VBcnJheSwgRmlyZWJhc2VVcmwpe1xuICAgIHZhciByZWYgICAgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ2NhdGVnb3JpZXMnKTtcbiAgICB2YXIgY2F0ZWdvcmllcyA9ICRmaXJlYmFzZU9iamVjdChyZWYpO1xuICAgIHZhciB0b3BpY0FyciA9ICRmaXJlYmFzZUFycmF5KHJlZik7XG5cbiAgICB2YXIgQ2F0ZWdvcnkgPSB7XG4gICAgICBnZXROYW1lOiBmdW5jdGlvbihzbHVnKXtcbiAgICAgICAgdmFyIGRhdGEgPSByZWYuY2hpbGQoc2x1Zyk7XG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QoZGF0YSk7XG4gICAgICB9LFxuXG4gICAgICBhbGw6IGNhdGVnb3JpZXNcbiAgICB9XG4gICAgcmV0dXJuIENhdGVnb3J5O1xuICB9KVxuXG5cbiAgLy9MYW5ndWFnZXNcbiAgLmZhY3RvcnkoJ0xhbmd1YWdlcycsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnbGFuZ3VhZ2VzJyk7XG4gICAgdmFyIGxhbmcgPSAkZmlyZWJhc2VBcnJheShyZWYpO1xuXG4gICAgcmV0dXJuIGxhbmc7XG4gIH0pXG5cblxuICAvL0xhbmd1YWdlc1xuICAuZmFjdG9yeSgnQXJjaGl2ZScsIGZ1bmN0aW9uKCRmaXJlYmFzZUFycmF5LCBGaXJlYmFzZVVybCl7XG4gICAgdmFyIHJlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCsnYXJjaGl2ZScpO1xuICAgIHZhciBhcmNoaXZlID0gJGZpcmViYXNlQXJyYXkocmVmKTtcblxuICAgIHZhciBBcmNoaXZlID17XG4gICAgICBhZGRDaGlsZDogZnVuY3Rpb24oc2x1Zyl7XG4gICAgICAgIHJldHVybiByZWYuY2hpbGQoc2x1Zyk7XG4gICAgICB9LFxuICAgICAgcmVmOiByZWYsXG4gICAgICBhcnI6IGFyY2hpdmVcbiAgICB9XG4gICAgcmV0dXJuIEFyY2hpdmU7XG4gIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXG4gIC5jb250cm9sbGVyKCdUYWdDdHJsJywgZnVuY3Rpb24oQXV0aCwgVXNlcnMsICRzdGF0ZSwkcm9vdFNjb3BlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vUmVzb2x2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ0xhbmRpbmcsdGFnTmFtZSkge1xuXG4gICAgdmFyIHRhZ0N0cmwgPSB0aGlzO1xuICAgIHRhZ0N0cmwudGFnTGFuZGluZyAgPSB0YWdMYW5kaW5nO1xuICAgIHRhZ0N0cmwudGFnTmFtZSAgICAgPSB0YWdOYW1lO1xuXG4gIH0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcCcpXHJcbiAgLmZhY3RvcnkoJ1RhZ3MnLCBmdW5jdGlvbigkZmlyZWJhc2VBcnJheSwgJGZpcmViYXNlT2JqZWN0LCBGaXJlYmFzZVVybCwgJHEpe1xyXG5cclxuICAgIHZhciByZWYgPSBuZXcgRmlyZWJhc2UoRmlyZWJhc2VVcmwrJ3RhZ3MnKTtcclxuICAgIHZhciB0YWdzID0gJGZpcmViYXNlQXJyYXkocmVmKTtcclxuXHJcbiAgICB2YXIgVGFncyA9IHtcclxuXHJcbiAgICAgIGFkZENoaWxkOiBmdW5jdGlvbihjaGlsZG5hbWUpe1xyXG4gICAgICAgIHJldHVybiByZWYuY2hpbGQoY2hpbGRuYW1lKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdGFnc1VybDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0VGFnUmVmOmZ1bmN0aW9uKHRhZyl7XHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0YWcpO1xyXG4gICAgICB9LFxyXG5cclxuICAgICAgZ2V0VGFnT2JqZWN0OmZ1bmN0aW9uKHRhZyl7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQodGFnKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHRvcGljVGFnczpmdW5jdGlvbih0YWcpe1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgIHZhciBmYiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCk7XHJcbiAgICAgICAgdmFyIGRhdGFSZXQgPSAnJztcclxuXHJcbiAgICAgICAgcmV0dXJuIGZiLmNoaWxkKCd0YWdzLycrdGFnKVxyXG4gICAgICAgICAgLm9uKCdjaGlsZF9hZGRlZCcsIGZ1bmN0aW9uKHRhZ1NuYXApe1xyXG4gICAgICAgICAgICBmYi5jaGlsZCgndG9waWNzJylcclxuICAgICAgICAgICAgICAub3JkZXJCeUNoaWxkKFwidGFnc1wiKVxyXG4gICAgICAgICAgICAgIC5lcXVhbFRvKHRhZylcclxuICAgICAgICAgICAgICAub24oJ2NoaWxkX2FkZGVkJywgZnVuY3Rpb24odG9waWNTbmFwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAvL3Nob3coIGV4dGVuZCh7fSwgdGFnU25hcC52YWwoKSwgdG9waWNTbmFwLnZhbCgpKSApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVuZCh7fSwgdGFnU25hcC52YWwoKSwgdG9waWNTbmFwLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YVJldCk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBhcnI6IHRhZ3NcclxuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gVGFncztcclxuICB9KVxyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcclxuICAuY29udHJvbGxlcignVG9waWNMYW5kaW5nQ3RybCcsIGZ1bmN0aW9uICgkc3RhdGUsICRzY29wZSwgU2x1ZywgVG9waWNzLCBBdXRoLCBVc2VycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1Jlc29sdmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc093bmVyLHRvcGljTGFuZGluZywgcmVwbHlMaXN0LCB2aWV3RGF0YSwgZm9sbG93ZXJzKSB7XHJcblxyXG4gICAgdmFyIHRvcGljTGFuZGluZ0N0cmwgPSB0aGlzXHJcblxyXG5cclxuICAgIHRvcGljTGFuZGluZ0N0cmwuYXV0aCAgICAgICAgID0gQXV0aDtcclxuICAgIHRvcGljTGFuZGluZ0N0cmwudXNlcnMgICAgICAgID0gVXNlcnM7XHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnRvcGljTGFuZGluZyA9IHRvcGljTGFuZGluZztcclxuICAgIHRvcGljTGFuZGluZ0N0cmwudG9waWNzICAgICAgID0gVG9waWNzO1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC5yZXBseUxpc3QgICAgPSByZXBseUxpc3Q7XHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnZpZXdzICAgICAgICA9IHZpZXdEYXRhO1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC5mb2xsb3dlcnMgICAgPSBmb2xsb3dlcnM7XHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLmlzT3duZXIgICAgICA9IGlzT3duZXI7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLy9HZXR0aW5nIFJlcGxpZXMgaW4gcmVwbGllc1xyXG4gICAgdG9waWNMYW5kaW5nQ3RybC5pblJlcGx5QXJyID0gW107XHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnJlcGx5SW5SZXBseSA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICBmb3IodmFyIGk9MDsgaTx0b3BpY0xhbmRpbmdDdHJsLnJlcGx5TGlzdC5sZW5ndGg7aSsrKXtcclxuICAgICAgICB2YXIgdG9waWNJZCA9IHRvcGljTGFuZGluZ0N0cmwucmVwbHlMaXN0W2ldLnRvcGljSWQ7XHJcbiAgICAgICAgdmFyIHJlcGx5SWQgPSB0b3BpY0xhbmRpbmdDdHJsLnJlcGx5TGlzdFtpXS4kaWQ7XHJcbiAgICAgICAgdG9waWNMYW5kaW5nQ3RybC5pblJlcGx5QXJyW2ldID0gdG9waWNMYW5kaW5nQ3RybC50b3BpY3MucmVwbHlJblJlcGx5KHRvcGljSWQscmVwbHlJZCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0b3BpY0xhbmRpbmdDdHJsLnJlcGx5SW5SZXBseSgpO1xyXG4gIH0pXHJcbiIsImFuZ3VsYXIubW9kdWxlKCdBcHAnKVxyXG4gIC8vIFRvcGljIGxpc3RcclxuICAuZmFjdG9yeSgnVG9waWNzJywgZnVuY3Rpb24gKCRmaXJlYmFzZU9iamVjdCwgJGZpcmViYXNlQXJyYXksIEZpcmViYXNlVXJsKSB7XHJcbiAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsICsgJ3RvcGljcycpXHJcbiAgICB2YXIgdG9waWNzID0gJGZpcmViYXNlT2JqZWN0KHJlZilcclxuICAgIHZhciB0b3BpY3NBcnIgPSAkZmlyZWJhc2VBcnJheShyZWYpXHJcbiAgICB2YXIgdG9waWNLZXkgPSAnJ1xyXG5cclxuICAgIHZhciBUb3BpY3MgPSB7XHJcbiAgICAgIC8vIEdldCB0b3BpYyB0YWdcclxuICAgICAgZ2V0VGFnOiBmdW5jdGlvbiAodGFnKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5vcmRlckJ5Q2hpbGQoJ3RhZ3MnKS5lcXVhbFRvKHRhZykpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBHZXQgdG9waWMgc2x1Z1xyXG4gICAgICBnZXRTbHVnOiBmdW5jdGlvbiAoc2x1Zykge1xyXG4gICAgICAgIHZhciBkYXRhID0gcmVmLm9yZGVyQnlDaGlsZCgnc2x1ZycpLmVxdWFsVG8oc2x1ZylcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoZGF0YSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIEdldHRpbmcgdGhlIGxpc3Qgb2YgdG9waWNzIGNyZWF0ZWQgYnkgdXNlcl9pZFxyXG4gICAgICBjcmVhdGVkQnk6IGZ1bmN0aW9uICh1aWQpIHtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkocmVmLm9yZGVyQnlDaGlsZCgndWlkJykuZXF1YWxUbyh1aWQpKVxyXG5cclxuICAgICAgfSxcclxuICAgICAgcmVmQ2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCkge1xyXG4gICAgICAgIHJldHVybiByZWYuY2hpbGQoY2hpbGQpXHJcbiAgICAgIH0sXHJcbiAgICAgIGNvdW50VXNlclRvcGljczogZnVuY3Rpb24gKCkge30sXHJcblxyXG4gICAgICAvLyBHZXR0aW5nIHRoZSBsaXN0IG9mIHRvcGljIGJhc2Ugb24gY2F0ZWdvcnlcclxuICAgICAgbGlzdDogZnVuY3Rpb24gKGNhdGVnb3J5KSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSByZWYub3JkZXJCeUNoaWxkKCdjYXRlZ29yeScpLmVxdWFsVG8oY2F0ZWdvcnkpXHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KGRhdGEpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBuYW1lOiBmdW5jdGlvbiAodG9waWNfc2x1Zykge1xyXG4gICAgICAgIHZhciBkYXRhID0gcmVmLm9yZGVyQnlDaGlsZCgnc2x1ZycpLmVxdWFsVG8odG9waWNfc2x1ZylcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KGRhdGEpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBSZXR1cm4gdG9waWMgZGV0YWlscyBpbiBSZWZcclxuICAgICAgZm9ydG9waWNSZWY6IGZ1bmN0aW9uICh0b3BpY19zbHVnKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlZi5vcmRlckJ5Q2hpbGQoJ3NsdWcnKS5lcXVhbFRvKHRvcGljX3NsdWcpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBnZXRUb3BpY0J5S2V5OiBmdW5jdGlvbiAodG9waWNfa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCArICd0b3BpY3MvJyArIHRvcGljX2tleSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldFRvcGljQnlTbHVnOiBmdW5jdGlvbiAodG9waWNfc2x1Zykge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYub3JkZXJCeUNoaWxkKCdzbHVnJykuZXF1YWxUbyh0b3BpY19zbHVnKS5saW1pdFRvRmlyc3QoMSkpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBpbmNyZW1lbnRWaWV3OiBmdW5jdGlvbiAodG9waWNfc2x1Zykge30sXHJcblxyXG4gICAgICAvLyBSZXR1cm4gdG9waWMgZGV0YWlscyBpbiBhcnJheVxyXG4gICAgICBmb3J0b3BpYzogZnVuY3Rpb24gKHRvcGljX3NsdWcpIHtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkoVG9waWNzLmZvcnRvcGljUmVmKHRvcGljX3NsdWcpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gUmVwbHkgbGlzdGluZ1xyXG4gICAgICByZXBseUxpc3Q6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSByZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcycpXHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KGRhdGEpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBSZXBseSBBcnJheVxyXG4gICAgICByZXBseUFycjogZnVuY3Rpb24gKHRvcGljSWQpIHtcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkocmVmLmNoaWxkKHRvcGljSWQgKyAnL3JlcGxpZXMnKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIFJlcGx5IGNvdW50XHJcbiAgICAgIHJlcGx5Q291bnQ6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZU9iamVjdChyZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcy8nKSlcclxuICAgICAgfSxcclxuICAgICAgcmVwbHlDb3VudFJlZjogZnVuY3Rpb24gKHRvcGljSWQpIHtcclxuICAgICAgICByZXR1cm4gcmVmLmNoaWxkKHRvcGljSWQgKyAnL3JlcGxpZXMvY291bnQnKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgcmVwbHlJblJlcGx5OiBmdW5jdGlvbiAodG9waWNJZCwgcmVwbHlJZCkge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYuY2hpbGQodG9waWNJZCArICcvcmVwbGllcy8nICsgcmVwbHlJZCArICcvaW5SZXBseScpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gUmVwbHkgaW4gUmVwbHkgQXJyYXlcclxuICAgICAgcmVwbHlJblJlcGx5QXJyOiBmdW5jdGlvbiAodG9waWNJZCwgcmVwbHlJZCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzLycrcmVwbHlJZCsnL2luUmVwbHknKSkpXHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9yZXBsaWVzLycgKyByZXBseUlkICsgJy9pblJlcGx5JykpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyB1cHZvdGVzXHJcbiAgICAgIGdldFVwdm90ZXM6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlZjogcmVmLmNoaWxkKHRvcGljSWQgKyAnL3Vwdm90ZXMnKSxcclxuICAgICAgICAgIGFycmF5OiAkZmlyZWJhc2VBcnJheShyZWYuY2hpbGQodG9waWNJZCArICcvdXB2b3RlcycpKVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8vIGRvd252b3Rlc1xyXG4gICAgICBnZXREb3dudm90ZXM6IGZ1bmN0aW9uICh0b3BpY0lkKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIHJlZjogcmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpLFxyXG4gICAgICAgICAgYXJyYXk6ICRmaXJlYmFzZUFycmF5KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9kb3dudm90ZXMnKSlcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvLyBmb2xsb3dlcnNcclxuICAgICAgZ2V0Rm9sbG93ZXJzOiBmdW5jdGlvbiAodG9waWNJZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZWY6IHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKSxcclxuICAgICAgICAgIG9iajogJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKSlcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB1cHZvdGVUb3BpYzogZnVuY3Rpb24gKHRvcGljSWQsIHVpZCkge1xyXG4gICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy91cHZvdGVzJykuY2hpbGQodWlkKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSlcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy91cHZvdGVzJykuY2hpbGQodWlkKSlcclxuICAgICAgfSxcclxuXHJcbiAgICAgIHVuZG9VcHZvdGU6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcclxuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvdXB2b3RlcycpLmNoaWxkKHVpZCkucmVtb3ZlKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjonLCBlcnJvcilcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmVkIHN1Y2Nlc3NmdWxseSEnKVxyXG4gICAgICAgICAgfX0pXHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0b3BpY0lkICsgJy91cHZvdGVzJylcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGRvd252b3RlVG9waWM6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcclxuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvZG93bnZvdGVzJykuY2hpbGQodWlkKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSlcclxuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9kb3dudm90ZXMnKS5jaGlsZCh1aWQpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdW5kb0Rvd252b3RlOiBmdW5jdGlvbiAodG9waWNJZCwgdWlkKSB7XHJcbiAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL2Rvd252b3RlcycpLmNoaWxkKHVpZCkucmVtb3ZlKGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjonLCBlcnJvcilcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmVkIHN1Y2Nlc3NmdWxseSEnKVxyXG4gICAgICAgICAgfX0pXHJcbiAgICAgICAgcmV0dXJuIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9kb3dudm90ZXMnKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgZm9sbG93OiBmdW5jdGlvbiAodG9waWNJZCwgdWlkKSB7XHJcbiAgICAgICAgcmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpLmNoaWxkKCdoaXN0b3J5JykuY2hpbGQodWlkKS5zZXQobW9tZW50KCkudG9JU09TdHJpbmcoKSlcclxuICAgICAgICAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpLmNoaWxkKCdjb3VudCcpKS4kbG9hZGVkKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgaWYgKGRhdGEudmFsdWUgPT09IG51bGwgfHwgZGF0YS52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnY291bnQnKS5zZXQoMSlcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnY291bnQnKS5zZXQoZGF0YS4kdmFsdWUgKyAxKVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VPYmplY3QocmVmLmNoaWxkKHRvcGljSWQgKyAnL2ZvbGxvd2VycycpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgdW5mb2xsb3c6IGZ1bmN0aW9uICh0b3BpY0lkLCB1aWQpIHtcclxuICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2hpc3RvcnknKS5jaGlsZCh1aWQpLnJlbW92ZShmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6JywgZXJyb3IpXHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCBzdWNjZXNzZnVsbHkhJylcclxuICAgICAgICAgICAgJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkICsgJy9mb2xsb3dlcnMnKS5jaGlsZCgnY291bnQnKSkuJGxvYWRlZCgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICByZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJykuY2hpbGQoJ2NvdW50Jykuc2V0KGRhdGEuJHZhbHVlIC0gMSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH19KVxyXG4gICAgICAgIHJldHVybiByZWYuY2hpbGQodG9waWNJZCArICcvZm9sbG93ZXJzJylcclxuICAgICAgfSxcclxuXHJcbiAgICAgIGdldFZpZXdzOiBmdW5jdGlvbiAodG9waWNJZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZWY6IHJlZi5jaGlsZCh0b3BpY0lkKS5jaGlsZCgndmlld3MnKSxcclxuICAgICAgICAgIG9iajogJGZpcmViYXNlT2JqZWN0KHJlZi5jaGlsZCh0b3BpY0lkKS5jaGlsZCgndmlld3MnKSlcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICBsYXRlc3RGZWVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICRmaXJlYmFzZUFycmF5KHJlZi5vcmRlckJ5Q2hpbGQoJ2NyZWF0ZWQnKS5saW1pdFRvTGFzdCgxMCkpXHJcbiAgICAgIH0sXHJcblxyXG4gICAgICB0b3BpY3NCeVRhZzogZnVuY3Rpb24gKHRhZykge1xyXG4gICAgICAgIHJldHVybiAkZmlyZWJhc2VBcnJheShyZWYub3JkZXJCeUNoaWxkKCd0YWdzJykuZXF1YWxUbyh0YWcpKVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgLy8gUmV0dXJuIGFycmF5XHJcbiAgICAgIGFycjogJGZpcmViYXNlQXJyYXkocmVmKSxcclxuXHJcbiAgICAgIGFsbDogdG9waWNzLFxyXG4gICAgICByZWY6IHJlZlxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gVG9waWNzXHJcblxyXG4gIH0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmNvbnRyb2xsZXIoJ1Byb2ZpbGVDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkc3RhdGUsICRmaWx0ZXIsIG1kNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXJ2aWNlc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBdXRoLFVzZXJzLFRvcGljcywgRmFjZWJvb2ssbm90aWZ5LENhdGVTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1Jlc29sdmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZmlsZSxpc093bmVyLHVzZXJQb3N0cyl7XG4gICAgdmFyIHByb2ZpbGVDdHJsID0gdGhpcztcblxuICAgIC8vUGFyc2VyXG4gICAgcHJvZmlsZUN0cmwucHJvZmlsZSAgID0gcHJvZmlsZTtcbiAgICBwcm9maWxlQ3RybC5hdXRoICAgICAgPSBBdXRoO1xuICAgIHByb2ZpbGVDdHJsLnVzZXJzICAgICA9IFVzZXJzO1xuICAgIHByb2ZpbGVDdHJsLnRvcGljcyAgICA9IFRvcGljcztcbiAgICBwcm9maWxlQ3RybC5mYWNlYm9vayAgPSBGYWNlYm9vaztcbiAgICBwcm9maWxlQ3RybC5pc093bmVyICAgPSBpc093bmVyO1xuICAgIHByb2ZpbGVDdHJsLmNhdGUgICAgICA9IENhdGVTZXJ2aWNlO1xuICAgIHByb2ZpbGVDdHJsLiRzdGF0ZSAgICA9ICRzdGF0ZTtcbiAgICBwcm9maWxlQ3RybC51c2VyUG9zdHMgPSB1c2VyUG9zdHM7XG5cbiAgICBwcm9maWxlQ3RybC5mZWVkID0gJyc7XG4gICAgcHJvZmlsZUN0cmwuZWRpdEluaXQgPSAndXNlckVkaXQnO1xuXG4gICAgcHJvZmlsZUN0cmwubmFtZUV4aXN0PSBmYWxzZTtcblxuXG4gICAgcHJvZmlsZUN0cmwuZ2V0VXNlclBvc3QgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgcHJvZmlsZUN0cmwuZmVlZCA9IHByb2ZpbGVDdHJsLnRvcGljcy5jcmVhdGVkQnkodWlkKTtcbiAgICB9XG5cblxuXG4gICAgLypMaW5rIGFjY291bnQgd2l0aCBmYWNlYm9vayovXG4gICAgcHJvZmlsZUN0cmwubGlua0ZhY2Vib29rID0gZnVuY3Rpb24oKXtcbiAgICAgIHByb2ZpbGVDdHJsLmZhY2Vib29rLmxvZ2luKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHByb2ZpbGVDdHJsLmZhY2Vib29rLmdldExvZ2luU3RhdHVzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBpZihyZXNwb25zZS5zdGF0dXMgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICAkc2NvcGUubG9nZ2VkSW4gPSB0cnVlO1xuICAgICAgICAgICAgcHJvZmlsZUN0cmwuZmFjZWJvb2suYXBpKCcvbWUnLCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIm5vdCBsb2dnZWQgaW5cIik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgLy9UaGUgb3JpZ2luYWwgdmFsdWUgZnJvbSBwcm9maWxlXG4gICAgcHJvZmlsZUN0cmwub2xkUHJvZmlsZVZhbHVlID0gcHJvZmlsZUN0cmwucHJvZmlsZTtcblxuXG4gICAgcHJvZmlsZUN0cmwudXNlckNyZWF0ZWQgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgcmV0dXJuIHByb2ZpbGVDdHJsLnRvcGljcy5jcmVhdGVkQnkodWlkKTtcbiAgICB9XG5cblxuICAgIC8vUHJlc2V0IFBhcmFtZXRlcnNcbiAgICBwcm9maWxlQ3RybC5pbWFnZVN0cmluZ3MgICAgPSBbXTtcbiAgICBwcm9maWxlQ3RybC51c2VyQ2F0ZUZvbGxvdyAgPSBbXTtcbiAgICBwcm9maWxlQ3RybC5jYXRlSXNGb2xsb3cgICAgPSBbXTtcbiAgICBwcm9maWxlQ3RybC5mb2xsb3dMaXN0ICAgICAgPSAnJztcblxuXG5cblxuXG4gICAgcHJvZmlsZUN0cmwuZm9sbG93Q2F0ZUxpc3RBcnIgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgcHJvZmlsZUN0cmwuZm9sbG93TGlzdCA9IHByb2ZpbGVDdHJsLmNhdGUuZm9sbG93TGlzdCh1aWQpO1xuICAgIH1cblxuICAgIGlmKEF1dGgucmVmLmdldEF1dGgoKSl7XG4gICAgICBwcm9maWxlQ3RybC5mb2xsb3dDYXRlTGlzdEFycihBdXRoLnJlZi5nZXRBdXRoKCkudWlkKTtcbiAgICB9XG5cbiAgICBwcm9maWxlQ3RybC5mb2xsb3dDYXRlID0gZnVuY3Rpb24oaW5kZXgsY2F0ZV9zbHVnKXtcbiAgICAgIHByb2ZpbGVDdHJsLmNhdGVJc0ZvbGxvd1tpbmRleF0gID0gdHJ1ZTtcbiAgICAgIHByb2ZpbGVDdHJsLmNhdGUuYWRkQ2hpbGQoY2F0ZV9zbHVnKycvZm9sbG93ZXInKVxuICAgICAgICAuY2hpbGQoQXV0aC5yZWYuZ2V0QXV0aCgpLnVpZCkucHVzaCgpLnNldChtb21lbnQoKS50b0lTT1N0cmluZygpKTtcbiAgICB9XG5cblxuXG5cblxuICAgIC8vVXBsb2FkIFByb2ZpbGUgaW1hZ2VcbiAgICBwcm9maWxlQ3RybC51cGxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZXMpIHtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChmaWxlcywgZnVuY3Rpb24gKGZsb3dGaWxlLCBpKSB7XG4gICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICB2YXIgdXJpID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICBwcm9maWxlQ3RybC5pbWFnZVN0cmluZ3NbaV0gPSB1cmk7XG4gICAgICAgICAgcHJvZmlsZUN0cmwudXNlcnMudXNlckFyclJlZihBdXRoLnJlZi5nZXRBdXRoKCkudWlkKS51cGRhdGUoe1wicGhvdG9cIjogdXJpfSlcbiAgICAgICAgICBub3RpZnkoe21lc3NhZ2U6J1NhdmVkJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZsb3dGaWxlLmZpbGUpO1xuICAgICAgfSlcbiAgICB9O1xuXG5cbiAgICAvL1NhdmUgcHJvZmlsZSB3aXRoIHByb2ZpbGVDdHJsLnByb2ZpbGVcbiAgICAvL3BhcmFtczogcmVkaXJlY3QsIGlmIGV4aXN0IHRoZW4gcmVkaXJlY3QgYWZ0ZXIgc2F2ZVxuICAgIHByb2ZpbGVDdHJsLnNhdmVQcm9maWxlID0gZnVuY3Rpb24ocmVkaXJlY3Qpe1xuICAgICAgcHJvZmlsZUN0cmwucHJvZmlsZS51cGRhdGVkID0gbW9tZW50KCkudG9JU09TdHJpbmcoKTtcblxuXG4gICAgICBpZihwcm9maWxlQ3RybC5sb2NhdGlvbiAhPT0gbnVsbCApIHtcbiAgICAgICAgbG9jYXRpb25EZXRhaWwgPSB7XG4gICAgICAgICAgcGxhY2VfaWQ6IHByb2ZpbGVDdHJsLmxvY2F0aW9uLmRldGFpbHMucGxhY2VfaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZUN0cmwubG9jYXRpb24uZGV0YWlscy5uYW1lLFxuICAgICAgICAgIGFkZHJlc3M6IHByb2ZpbGVDdHJsLmxvY2F0aW9uLmRldGFpbHMuZm9ybWF0dGVkX2FkZHJlc3MsXG4gICAgICAgICAgbGF0OiBwcm9maWxlQ3RybC5sb2NhdGlvbi5kZXRhaWxzLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLFxuICAgICAgICAgIGxuZzogcHJvZmlsZUN0cmwubG9jYXRpb24uZGV0YWlscy5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSxcbiAgICAgICAgfVxuXG4gICAgICAgIHByb2ZpbGVDdHJsLnByb2ZpbGUudXNlckxvY2F0aW9uID0gbG9jYXRpb25EZXRhaWw7XG4gICAgICB9XG5cbiAgICAgIHByb2ZpbGVDdHJsLnByb2ZpbGUuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBub3RpZnkoe21lc3NhZ2U6J1NhdmVkJyxwb3NpdGlvbjonY2VudGVyJyxkdXJhdGlvbjogMzAwMCB9KTtcbiAgICAgICAgaWYocmVkaXJlY3QgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgJHN0YXRlLmdvKHJlZGlyZWN0KTtcbiAgICAgICAgfVxuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgbm90aWZ5KHttZXNzYWdlOidFcnJvciBzYXZpbmcgZGF0YScscG9zaXRpb246J2NlbnRlcicsZHVyYXRpb246IDMwMDAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIC8vVXBkYXRlIG5hbWVcbiAgICBwcm9maWxlQ3RybC51cGRhdGVOYW1lID0gZnVuY3Rpb24oKXtcblxuICAgICAgcHJvZmlsZUN0cmwudXNlcnMudXNlckFyclJlZihBdXRoLnJlZi5nZXRBdXRoKCkudWlkKS51cGRhdGUoXG4gICAgICAgIHtcbiAgICAgICAgICBcImZpcnN0bmFtZVwiOiAgcHJvZmlsZUN0cmwucHJvZmlsZS5maXJzdG5hbWUsXG4gICAgICAgICAgXCJsYXN0bmFtZVwiOiAgIHByb2ZpbGVDdHJsLnByb2ZpbGUubGFzdG5hbWUsXG4gICAgICAgIH1cbiAgICAgIClcblxuICAgICAgcHJvZmlsZUN0cmwudXNlcnMudXNlckFyclJlZihBdXRoLnJlZi5nZXRBdXRoKCkudWlkKycvbG9nJykucHVzaCgpLnNldCh7XG4gICAgICAgIGFjdGlvbjogICBcIm5hbWVfY2hhbmdlXCIsXG4gICAgICAgIG9sZG5hbWU6ICBwcm9maWxlQ3RybC5vbGRQcm9maWxlVmFsdWUuZmlyc3RuYW1lICsgXCItXCIgKyBwcm9maWxlQ3RybC5vbGRQcm9maWxlVmFsdWUubGFzdG5hbWUsXG4gICAgICAgIGNyZWF0ZWQ6ICBtb21lbnQoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcblxuICAgICAgbm90aWZ5KHttZXNzYWdlOidTYXZlZCcscG9zaXRpb246J2NlbnRlcicsZHVyYXRpb246IDMwMDAgfSk7XG4gICAgfVxuXG5cbiAgICAvL1VwZGF0ZSBCaW9cbiAgICBwcm9maWxlQ3RybC51cGRhdGVCaW8gPSBmdW5jdGlvbigpe1xuICAgICAgcHJvZmlsZUN0cmwudXNlcnMudXNlckFyclJlZihBdXRoLnJlZi5nZXRBdXRoKCkudWlkKS51cGRhdGUoe1wiYmlvZ3JhcGh5XCI6IHByb2ZpbGVDdHJsLnByb2ZpbGUuYmlvZ3JhcGh5fSlcblxuICAgICAgbm90aWZ5KHttZXNzYWdlOidTYXZlZCcscG9zaXRpb246J2NlbnRlcicsZHVyYXRpb246IDMwMDAgfSk7XG4gICAgfVxuXG5cbiAgICBwcm9maWxlQ3RybC51cGRhdGVQcm9maWxlID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vcHJvZmlsZUN0cmwucHJvZmlsZS5lbWFpbEhhc2ggPSBtZDUuY3JlYXRlSGFzaChhdXRoLnBhc3N3b3JkLmVtYWlsKTtcbiAgICAgIHByb2ZpbGVDdHJsLnByb2ZpbGUuJHNhdmUoKS50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XG4gICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvL0NoZWNrIGlmIHVzZXIgZXhpc3QsIHJldHVybiBmYWxzZSBpZiB0aGV5IGRvXG4gICAgcHJvZmlsZUN0cmwuY2hlY2tVc2VybmFtZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgIHByb2ZpbGVDdHJsLnVzZXJzLmNoZWNrVXNlcm5hbWVFeGlzdChwcm9maWxlQ3RybC5wcm9maWxlLmRpc3BsYXlOYW1lKS5vbmNlKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7XG4gICAgICAgIGlmKHNuYXBzaG90LnZhbCgpICE9PSBudWxsKXtcbiAgICAgICAgICByZXR1cm4gcHJvZmlsZUN0cmwubmFtZUV4aXN0PXRydWU7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHJvZmlsZUN0cmwubmFtZUV4aXN0PWZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnQXBwJylcbiAgLmZhY3RvcnkoJ1VzZXJzJywgZnVuY3Rpb24gKCRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VPYmplY3QsIEZpcmViYXNlVXJsLCAkaHR0cCkge1xuICAgIHZhciB1c2Vyc1JlZiA9IG5ldyBGaXJlYmFzZShGaXJlYmFzZVVybCArICd1c2VycycpXG4gICAgdmFyIHVzZXJzID0gJGZpcmViYXNlQXJyYXkodXNlcnNSZWYpXG5cbiAgICB2YXIgVXNlcnMgPSB7XG4gICAgICBnZXRMb2NhdGlvbklQOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkaHR0cCh7XG4gICAgICAgICAgdXJsOiAnaHR0cDovL2lwaW5mby5pby9qc29uJyxcbiAgICAgICAgICBtZXRob2Q6ICdHRVQnXG4gICAgICAgIH0pXG4gICAgICB9LFxuXG4gICAgICBnZXRMb2NhdGlvbklQRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAoe1xuICAgICAgICAgIHVybDogJ2h0dHA6Ly9pcGluZm8uaW8vanNvbicsXG4gICAgICAgICAgbWV0aG9kOiAnR0VUJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YVxuICAgICAgICB9KVxuICAgICAgfSxcblxuICAgICAgcHJvZmlsZTogZnVuY3Rpb24odWlkKXtcbiAgICAgICAgcmV0dXJuIHVzZXJzLiRnZXRSZWNvcmQodWlkKTtcbiAgICAgIH0sXG5cblxuICAgICAgLy9TZWFyY2ggYW5kIHJldHVybiB1c2VybmFtZVxuICAgICAgZ2V0UHJvZmlsZUJ5VXNlcm5hbWU6ZnVuY3Rpb24odXNlcm5hbWUpe1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlQXJyYXkodXNlcnNSZWYub3JkZXJCeUNoaWxkKCdkaXNwbGF5TmFtZScpLmVxdWFsVG8odXNlcm5hbWUpKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vQ2hlY2sgaWYgdXNlcm5hbWUgZXhpc3QsIGlmIG5vdCByZXR1cm4gbnVsbFxuICAgICAgY2hlY2tVc2VybmFtZUV4aXN0OmZ1bmN0aW9uKHVzZXJuYW1lKXtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLm9yZGVyQnlDaGlsZCgnZGlzcGxheU5hbWUnKS5lcXVhbFRvKHVzZXJuYW1lKTtcbiAgICAgIH0sXG5cblxuICAgICAgZ2V0UHJvZmlsZTogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gJGZpcmViYXNlT2JqZWN0KHVzZXJzUmVmLmNoaWxkKHVpZCkpXG4gICAgICB9LFxuXG4gICAgICBnZXREaXNwbGF5TmFtZTogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICBpZiAodWlkID09IG51bGwgfHwgdWlkID09PSAnJykge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB1c2Vycy4kZ2V0UmVjb3JkKHVpZCkuZGlzcGxheU5hbWVcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy9HZXQgdXNlciBGb2xsb3dlcnNcbiAgICAgIGdldEZvbGxvd2VyOmZ1bmN0aW9uKHVpZCl7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5jaGlsZCh1aWQrJy9zdGF0L2ZvbGxvd2VyL3VpZCcpO1xuICAgICAgfSxcblxuICAgICAgLy9DaGVjayBpZiB1c2VyIGlzIGFscmVhZHkgZm9sbG93aW5nXG4gICAgICBjaGVja0ZvbGxvdzpmdW5jdGlvbih1aWQsZm9sbG93X2lkKXtcblxuICAgICAgICB2YXIgZm9sbG93PWZhbHNlO1xuICAgICAgICB2YXIgcmVmICAgID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKyd1c2Vycy8nK3VpZCsnL3N0YXQvZm9sbG93aW5nL3VpZC8nK2ZvbGxvd19pZCk7XG4gICAgICAgIHJlZi5vbmNlKFwidmFsdWVcIiwgZnVuY3Rpb24oc25hcHNob3QpIHtcbiAgICAgICAgICBmb2xsb3cgPSBzbmFwc2hvdC5leGlzdHMoKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZvbGxvdztcbiAgICAgIH0sXG5cbiAgICAgIC8vQ2hhbmdlIHBhc3N3b3JkXG4gICAgICB1c2VyQ2hhbmdlUGFzc3dvcmQ6ZnVuY3Rpb24oZW1haWwsb2xkcGFzcyxuZXdwYXNzKXtcblxuICAgICAgICB2YXIgcmVmID0gbmV3IEZpcmViYXNlKEZpcmViYXNlVXJsKTtcbiAgICAgICAgcmVmLmNoYW5nZVBhc3N3b3JkKHtcbiAgICAgICAgICBlbWFpbDogZW1haWwsXG4gICAgICAgICAgb2xkUGFzc3dvcmQ6IG9sZHBhc3MsXG4gICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld3Bhc3NcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IuY29kZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiSU5WQUxJRF9QQVNTV09SRFwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHNwZWNpZmllZCB1c2VyIGFjY291bnQgcGFzc3dvcmQgaXMgaW5jb3JyZWN0LlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgY2FzZSBcIklOVkFMSURfVVNFUlwiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVGhlIHNwZWNpZmllZCB1c2VyIGFjY291bnQgZG9lcyBub3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgY2hhbmdpbmcgcGFzc3dvcmQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIHBhc3N3b3JkIGNoYW5nZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgdXNlclJlZjogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gdXNlcnNSZWYuY2hpbGQodWlkKVxuICAgICAgfSxcblxuICAgICAgdXB2b3RlczogZnVuY3Rpb24gKHVpZCkge1xuICAgICAgICByZXR1cm4gdXNlcnNSZWYuY2hpbGQodWlkKS5jaGlsZCgndXB2b3RlcycpXG4gICAgICB9LFxuXG4gICAgICBkb3dudm90ZXM6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLmNoaWxkKHVpZCkuY2hpbGQoJ2Rvd252b3RlcycpXG4gICAgICB9LFxuXG4gICAgICAvL1VzZXIgZm9sbG93aW5nIHRvcGljXG4gICAgICBmb2xsb3dpbmc6IGZ1bmN0aW9uICh1aWQpIHtcbiAgICAgICAgcmV0dXJuIHVzZXJzUmVmLmNoaWxkKHVpZCkuY2hpbGQoJ2ZvbGxvd2luZycpXG4gICAgICB9LFxuXG4gICAgICB1c2VyQXJyUmVmOiBmdW5jdGlvbiAodWlkKSB7XG4gICAgICAgIHJldHVybiB1c2Vyc1JlZi5jaGlsZCh1aWQpXG4gICAgICB9LFxuXG4gICAgICBhbGw6IHVzZXJzXG4gICAgfVxuXG4gICAgcmV0dXJuIFVzZXJzXG4gIH0pXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
